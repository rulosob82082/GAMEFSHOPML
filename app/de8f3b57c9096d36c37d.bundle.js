"use strict";(self.webpackChunkgameflip_market=self.webpackChunkgameflip_market||[]).push([[9443],{49280:(e,t,a)=>{a.d(t,{Z:()=>d});var l=a(67294),s=a(46858),i=a(84766),n=a(32510),r=a(1055),c=a(96655);const o=[25,50,75,100];class d extends l.Component{constructor(e,t){super(e,t),this.state=this.getState(this.props)}componentDidUpdate(e,t){this.props.tab!=e.tab&&(this.searchFilters=null),JSON.stringify(this.props.query)!==JSON.stringify(e.query)&&this.setState(this.getState(this.props))}getState(e){let{term:t,sort:a,limit:l,status:s,handling_status:i,digital:n,escrow:r}=e.query||{};return{term:t,sort:a,limit:l,status:s,handling_status:i,digital:n,escrow:r}}onChangeTerm(e){this.searchFilters&&void 0!==this.searchFilters.term&&delete this.searchFilters.term;let t=e&&e.target&&e.target.value||"";this.setState({term:t})}onSelectSort(e,t){t.preventDefault(),this.setState({sort:e},(()=>{this.filter()}))}onSelectPerPage(e,t){t.preventDefault(),this.setState({limit:e},(()=>{this.filter()}))}onSearchFilter(e){this.searchFilters={},this.searchFilters.category=e.category||"",this.searchFilters.platform=e.platform||"",this.searchFilters.genre=e.genre||"",this.searchFilters.price=e.price||"",this.searchFilters.digital_deliverable=e.digital_deliverable||"",this.searchFilters.shipping_within_days=e.shipping_within_days||"",this.searchFilters.term=e.term||"",this.searchFilters.digital=void 0!==e.digital?e.digital:"",this.filter()}filter(e){e&&e.preventDefault();let{term:t,sort:a,limit:l}=this.state,s={page:1,term:t,sort:a,limit:l};this.searchFilters&&(s=i.Util.merge(this.searchFilters,s),void 0!==this.searchFilters.term&&(s.term=this.searchFilters.term)),this.props.callbacks.filterItems(s)}onButtonClick(e,t){t.preventDefault();let a=this.props.callbacks.onClickActionButton;a&&a(e)}actionButtons(){let{role:e}=this.props,{status:t,handling_status:a,digital:l,escrow:s}=this.state;if(l=!0===l||"true"===l,s=!0===s||"true"===s,e==c.Efm){if(t==c.V5K)return[{action:"rate",label:(0,r._)("Rate Buyer")}];if(t==c.rlS)switch(a){case"need_label":return[{action:"label",label:(0,r._)("Create Shipping Label")}];case"shipping":return[{action:"ship",label:(0,r._)("I've Shipped")}];case"need_tracking":return l?[{action:"ship",label:(0,r._)("I've Delivered")}]:[]}}else if(e==c._Kh&&"settled,pending"==t&&"need_tracking"===a)return l&&s?[{action:"bulk_retrieve",label:(0,r._)("Retrieve All")}]:[];return[]}render(){let{position:e,type:t,role:a,config:i,callbacks:d,query:h}=this.props;i=i||{buttons:this.actionButtons(),sort:!0};let p="";if("header"==e){let e=a==c.Efm?(0,r._)("Search your listings"):(0,r._)("Search your purchases"),t=l.createElement("div",{className:"input-group-append"},l.createElement("span",{className:"btn btn-clear fas fa-times",onClick:this.onChangeTerm.bind(this)}));p=l.createElement("div",{className:"search-box col-12 col-md-4"},l.createElement("form",{className:"form-inline",role:"search",onSubmit:this.filter.bind(this)},l.createElement("div",{className:"input-group"},l.createElement("input",{className:"form-control",value:this.state.term||"",onChange:this.onChangeTerm.bind(this),type:"text",placeholder:e}),this.state.term?t:"",l.createElement("span",{className:"input-group-append"},l.createElement("button",{className:"btn btn-primary",type:"submit"},l.createElement("img",{src:"/img/app/icon_search_white.png"}))))))}let u=[{label:(0,r._)("Created: Recent"),sort:"created:desc"},{label:(0,r._)("Created: Oldest"),sort:"created:asc"},{label:(0,r._)("Price: Ascending"),sort:"price:asc"},{label:(0,r._)("Price: Descending"),sort:"price:desc"},{label:(0,r._)("Relevance"),sort:""}],g="";if("header"==e&&i.sort){let e=u[0],t=u.map(((t,a)=>(this.state.sort===t.sort&&(e=t),l.createElement("li",{key:a,onClick:this.onSelectSort.bind(this,t.sort)},l.createElement("a",null,t.label)))));g=l.createElement("div",{className:"d-none d-md-inline-block col-12 col-md-3"},l.createElement("div",{className:"btn-group float-right"},l.createElement("button",{className:"d-none d-lg-block btn btn-outline-secondary",onClick:this.filter.bind(this)},l.createElement("span",{className:"fa fa-sync-alt","aria-hidden":"true"})),l.createElement("button",{className:"btn btn-outline-secondary dropdown-toggle",type:"button","data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"true"},e.label," ",l.createElement("span",{className:"caret"})),l.createElement("ul",{className:"dropdown-menu pointer",role:"menu"},t)))}let b="";if("footer"==e){let e=25,t=o.map(((t,a)=>(t==this.state.limit&&(e=t),l.createElement("li",{key:a,onClick:this.onSelectPerPage.bind(this,t)},l.createElement("a",null,t," rows")))));b=l.createElement("div",{className:"text-right d-none d-md-inline-block col-md-7"},(0,r._)("Show"),":",l.createElement("button",{className:"btn dropdown-toggle",type:"button","data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"true"},e," rows ",l.createElement("span",{className:"caret"})),l.createElement("ul",{className:"dropdown-menu pointer float-right",role:"menu"},t))}let _=this.props.callbacks.onSelectAll,E=this.props.checked_one,k=this.props.checked_all,v="main-button btn btn-primary"+(E?"":" disabled"),f=s.Z.notEmpty(i.buttons),S=i.buttons.map(((e,t)=>l.createElement("button",{key:t,className:v,onClick:this.onButtonClick.bind(this,e.action)},e.label))),N="";"exchange"==t&&"header"==e&&(N=l.createElement(m,{role:a,callbacks:d,query:h}));let w="";return"header"!=e||s.Z.isMobile||(w=l.createElement(n.Z,{mode:"sm",query:h,onSelect:this.onSearchFilter.bind(this)})),l.createElement("div",null,N,l.createElement("div",{className:"item-list-"+e+" row"},l.createElement("div",{className:"d-none d-md-inline-block col-md-1 select-all text-center",style:{marginLeft:"-5px"}},f?l.createElement("input",{type:"checkbox",onChange:_,checked:k}):""),l.createElement("div",{className:"d-none d-md-inline-block col-md-4 buttons"},S),p,g,b),w)}}class m extends l.Component{constructor(e,t){super(e,t),this.state=this.getState(this.props)}componentDidUpdate(e,t){JSON.stringify(this.props.query)!==JSON.stringify(e.query)&&this.setState(this.getState(this.props))}updateDimensions(){this.setState({viewXS:s.Z.browser().viewXS||!1})}componentDidMount(){this.updateDimensions(),s.Z.isBrowser&&window.addEventListener("resize",this.updateDimensions.bind(this))}componentWillUnmount(){s.Z.isBrowser&&window.removeEventListener("resize",this.updateDimensions.bind(this))}getState(e){let{status:t,handling_status:a,digital:l,escrow:s}=e.query||{};return{status:t,handling_status:a,digital:l,escrow:s}}onSelectTab(e,t,a){a&&a.preventDefault(),t||(t={});let l=!0===t.digital?"true":!1===t.digital?"false":"",s=t.handling_status||"",i=t.hold_status||"";this.setState({status:e,handling_status:s,digital:l,hold_status:i});let n=this.props.callbacks.filterItems;e?t.status=e:delete t.status,l?t.digital=l:delete t.digital,i||delete t.hold_status,n&&n(t,!0)}handlingLabel(e,t,a){let{role:s}=this.props;t=!0===t||"true"===t,a=!0===a||"true"===a;let i=(0,r._)("Need Tracking"),n=(0,r._)("Need Shipping Label"),o=(0,r._)("Need to Ship"),d=(0,r._)("Shipping"),m=(0,r._)("Need to Send"),h=(0,r._)("Need to Retrieve"),p=(0,r._)("Already Sent / Shipped"),u=(0,r._)("Already Sent / Received"),g=(0,r._)("digital"),b=(0,r._)("physical"),_=(0,r._)("Bot Trade"),E="";switch(e){case"need_tracking":E=s==c.Efm?t?l.createElement("span",null,m," ",l.createElement("small",null,"(",g,")")):l.createElement("span",null,i," ",l.createElement("small",null,"(",b,")")):a?l.createElement("span",null,h," ",l.createElement("small",null,"(",_,")")):"";break;case"shipping":E=t?l.createElement("span",null,m," ",l.createElement("small",null,"(",g,")")):l.createElement("span",null,s==c.Efm?o:d," ",l.createElement("small",null,"(",b,")"));break;case"shipped":E=s==c.Efm?p:u;break;case"need_label":E=l.createElement("span",null,n," ",l.createElement("small",null,"(",b,")"));break;case"need_label,need_tracking,shipping":E=l.createElement("span",null,(0,r._)("Wait for Delivery"))}return E}render(){let{role:e,callbacks:t}=this.props,{status:a,handling_status:s,hold_status:i,digital:n,escrow:o}=this.state;a=a||"all";let d=e==c.Efm,m=this.handlingLabel(s,n,o)||(0,r._)("In-Progress");return l.createElement("div",{className:"item-list-header"},l.createElement("div",{className:"row"},l.createElement("div",{className:"col-12"},l.createElement("ul",{className:"nav nav-tabs"+(this.state.viewXS?" nav-stacked":"")},l.createElement("li",{className:"nav-item"},l.createElement("a",{className:"text-left nav-link "+("all"==a?"active":""),onClick:this.onSelectTab.bind(this,"",null)},(0,r._)("Show All"))),l.createElement("li",{className:"nav-item"},l.createElement("a",{className:"text-left nav-link "+(a==c.WWs?"active":""),onClick:this.onSelectTab.bind(this,c.WWs,null)},(0,r._)("Pending"))),l.createElement("li",{className:"nav-item"},l.createElement("a",{className:"dropdown-toggle nav-link "+(a&&a.indexOf(c.rlS)>=0&&s?"active":""),"data-toggle":"dropdown",href:"#",role:"button","aria-haspopup":"true","aria-expanded":"false"},m," ",l.createElement("span",{className:"caret"})),l.createElement("ul",{className:"dropdown-menu"},d?l.createElement("li",{className:"dropdown-item"},l.createElement("a",{onClick:this.onSelectTab.bind(this,"settled",{handling_status:"need_tracking",digital:!0})},this.handlingLabel("need_tracking",!0))):"",d?l.createElement("li",{className:"dropdown-item"},l.createElement("a",{onClick:this.onSelectTab.bind(this,"settled",{handling_status:"need_tracking",digital:!1})},this.handlingLabel("need_tracking",!1))):"",d?l.createElement("li",{className:"dropdown-item"},l.createElement("a",{onClick:this.onSelectTab.bind(this,"settled",{handling_status:"shipping",digital:!1})},this.handlingLabel("shipping",!1))):"",d?l.createElement("li",{className:"dropdown-item"},l.createElement("a",{onClick:this.onSelectTab.bind(this,"settled",{handling_status:"need_label"})},this.handlingLabel("need_label"))):"",d?l.createElement("li",{className:"dropdown-item"},l.createElement("a",{onClick:this.onSelectTab.bind(this,"settled",{handling_status:"shipped"})},this.handlingLabel("shipped"))):"",d?"":l.createElement("li",{className:"dropdown-item"},l.createElement("a",{onClick:this.onSelectTab.bind(this,"settled",{handling_status:"need_label,need_tracking,shipping"})},this.handlingLabel("need_label,need_tracking,shipping"))),d?"":l.createElement("li",{className:"dropdown-item"},l.createElement("a",{onClick:this.onSelectTab.bind(this,"settled,pending",{handling_status:"need_tracking",digital:!0,escrow:!0})},this.handlingLabel("need_tracking",!0,!0))),d?"":l.createElement("li",{className:"dropdown-item"},l.createElement("a",{onClick:this.onSelectTab.bind(this,"settled,received",{handling_status:"shipped",buyer_rated:!1})},this.handlingLabel("shipped"))))),d?l.createElement("li",{className:"nav-item"},l.createElement("a",{className:"text-left nav-link "+(a==c.V5K?"active":""),onClick:this.onSelectTab.bind(this,c.V5K,null)},(0,r._)("Received"))):"",l.createElement("li",{className:"nav-item"},l.createElement("a",{className:"text-left nav-link "+("settled,received"==a&&i?"active":""),onClick:this.onSelectTab.bind(this,"settled,received",{hold_status:d?"hold_dispute":"hold_buy,hold_dispute"})},(0,r._)("Under Review / Dispute"))),l.createElement("li",{className:"nav-item"},l.createElement("a",{className:"text-left nav-link "+("cancelled,rescinded,pending_rescinding"==a?"active":""),onClick:this.onSelectTab.bind(this,"cancelled,rescinded,pending_rescinding",null)},(0,r._)("Cancelled"))),l.createElement("li",{className:"nav-item"},l.createElement("a",{className:"text-left nav-link "+("complete,pending_complete"==a?"active":""),onClick:this.onSelectTab.bind(this,"complete,pending_complete",null)},(0,r._)("Complete")))))))}}},57097:(e,t,a)=>{a.d(t,{Z:()=>n});var l=a(84766);const s="dialog_event";class i extends l.EventHandler{onShowDialog(e){this.on(s,e)}offShowDialog(e){this.off(s,e)}showDialog(e,t){t&&e||Log.error("Missing item or tag"),this.emit(s,e,t)}}const n=new i}}]);