"use strict";(self.webpackChunkgameflip_market=self.webpackChunkgameflip_market||[]).push([[5239],{97614:(e,t,a)=>{a.d(t,{Z:()=>n});var l=a(67294),i=(a(84766),a(46858)),s=(a(42741),a(58166),a(1055));const r={all:["name","description","image","external_url"],axie:["genes","owner","created_time"],cryptopunks:["id","sale_price"]};class n extends l.Component{constructor(e,t){super(e,t)}parseData(){let e=this.props;this.nftAttrMap=e&&e.item&&e.item.nft_metadata?i.Z.arrayToMap(e.item.nft_metadata.attributes,"trait_type"):{},this.deck={overview:{title:"Overview",icon:"fas fa-info-circle",elms:[],collapsed:!!e.collapsed},tags:{title:"Tags",icon:"fas fa-tag",elms:[],collapsed:!!e.collapsed},props:{title:"Properties",icon:"fas fa-tag",elms:[],collapsed:!!e.collapsed},stats:{title:"Stats",icon:"fas fa-chart-bar",elms:[],collapsed:!!e.collapsed},points:{title:"Points",icon:"fas fa-child",elms:[],collapsed:!!e.collapsed},levels:{title:"Levels",icon:"fas fa-star-half-alt",elms:[],collapsed:!!e.collapsed},parts:{title:"Parts",icon:"fas fa-chart-pie",elms:[],collapsed:!!e.collapsed},abilities:{title:"Abilities",icon:"fas fas fa-bolt",elms:[],collapsed:!!e.collapsed},dates:{title:"Dates",icon:"fas fa-calendar",elms:[],collapsed:!!e.collapsed}},this.cards=[],e&&e.item&&e.item.nft_metadata?(Array.isArray(e.item.nft_metadata.attributes)?e.item.nft_metadata.attributes:this.convertNFTProperties(e.item)).forEach((e=>{this.insertCardDetail(e)})):e&&Array.isArray(e.tag_info)&&e.tag_info.forEach((e=>{this.insertCardDetail({trait_type:e.header||"",value:e.content||"",display_type:"tag"})}));for(let e in this.deck){let t=this.deck[e];t.id=e,t.elms.length&&("props"===e?this.cards.push(this.getCard(t,e)):this.cards.push(this.getCard(t)))}}convertNFTProperties(e){let t=e.nft_metadata,a=r[e.platform],i=[],n=(t,a)=>{switch(e.platform){case"axie":if("stats"===t)for(let e in a){let t=a[e];i.push({trait_type:e,value:t,display_type:"point"})}else"parts"===t&&Array.isArray(a)&&a.forEach((e=>{let t=e.abilities;Array.isArray(t)&&t[0]?(t=t[0],i.push({trait_type:t.name,value:l.createElement("div",null,l.createElement("i",{className:"fas fa-gavel"})," ",t.attack||0," Â  ",l.createElement("i",{className:"fas fa-shield-alt"})," ",t.defense||0,l.createElement("br",null),t.description||""),display_type:"ability"})):e.name&&i.push({trait_type:e.class||"",value:e.name||"",display_type:"part"})}));break;case"topps_mlb":if("data"===t)for(let e in a){let t=a[e];"img"!==e&&"legal"!==e&&"backimg"!==e&&i.push({trait_type:e,value:t,display_type:"overview"})}break;case"cryptopunks":if("accessories"===t&&Array.isArray(a))try{a.forEach((e=>{i.push({trait_type:"Accessory",value:e,display_type:"part"})}))}catch(e){}break;default:if(Array.isArray(a))try{a.forEach((e=>{i.push({trait_type:t,value:e})}))}catch(e){}}};for(let e in t){let l=t[e],c=e.toLowerCase(),o={trait_type:c,value:l},d=!0;a&&a.includes(c)||r.all.includes(c)||null===l?d=!1:c.includes("date")&&!c.includes("update")||c.includes("time")||/\d{4}-\d{2}-\d{2}T\d{2}:\d{2}:\d{2}.\d{3}Z/.test(c)?o.display_type="date":"number"!=typeof l&&isNaN(l)?"boolean"==typeof l?o.value=l?(0,s._)("Yes"):(0,s._)("No"):("object"==typeof l||Array.isArray(l))&&(n(c,l),d=!1):o.display_type="number",d&&i.push(o)}return i}insertCardDetail(e){let t,a=e.trait_type;if(!a||"string"!=typeof a)return;let r=i.Z.capitalize(a,!0),n=e.value,c=e.max_value;c&&!isNaN(c)&&(c=parseFloat(c));let o=e.display_type,d=c?` ${(0,s._)("of")} ${c}`:"";if("number"===o){let e=isNaN(n)?n:parseFloat(n);this.deck.stats.elms.push(this.getCardDetail(r,e+d))}else if("ranking"===o){let t=isNaN(n)?n:parseFloat(n);this.deck.levels.elms.push(this.getCardDetail(r,t+d,e))}else if("date"===o){let e=n;isNaN(n)||(e=parseFloat(n));let t=("number"==typeof e?new Date(1e3*e):new Date(e)).toLocaleDateString(void 0,{weekday:"long",year:"numeric",month:"long",day:"numeric"});this.deck.dates.elms.push(this.getCardDetail(r,t))}else"string"==typeof a&&a.endsWith("_id")||(t="tag"===o?"tags":"overview"===o?"overview":"point"===o?"points":"part"===o?"parts":"ability"===o?"abilities":"props");t&&this.deck[t].elms.push(l.createElement("div",{key:a,className:"card-element col-4 d-flex flex-column"},l.createElement("div",{className:"h-100 bg-light rounded border border-secondary px-1 px-lg-2 py-2 m-1 text-center"},l.createElement("div",{className:"text-primary text-uppercase small d-flex justify-content-center overflow-hidden mb-2"},r),l.createElement("div",{className:"text-break text-capitalize d-flex justify-content-center overflow-hidden"},n))))}getCardDetail(e,t,a){let i;if(a&&"ranking"===a.display_type&&a.max_value){let e=Math.floor(t/a.max_value*100);i=l.createElement("div",{className:"progress mt-1 mb-2"},l.createElement("div",{className:"progress-bar bg-warning",role:"progressbar",style:{width:e+"%"},"aria-valuenow":e,"aria-valuemin":"0","aria-valuemax":a.max_value}))}return l.createElement("div",{key:e,className:"py-1 w-100"},l.createElement("div",{className:"d-flex justify-content-between"},l.createElement("div",{className:""},e),l.createElement("div",{className:""},t)),i)}getCard(e,t){let{id:a,title:i,icon:s,collapsed:r,elms:n}=e,c="props"===t?"row no-gutters":"d-flex flex-wrap";return l.createElement("div",{key:a,className:"card"},l.createElement("div",{className:"card-header",id:a+"Heading"},l.createElement("div",{className:"btn btn-link w-100 d-flex justify-content-between","data-toggle":"collapse","data-target":"#"+a+"Collapse","aria-expanded":"true","aria-controls":a+"Collapse"},l.createElement("div",{className:"p text-left"},l.createElement("span",{className:"mr-1 "+s})," ",l.createElement("b",null,i)),l.createElement("div",{className:"collapsed-hide"},l.createElement("span",{className:"fas fa-chevron-up"})),l.createElement("div",{className:"collapsed-show"},l.createElement("span",{className:"fas fa-chevron-down"})))),l.createElement("div",{id:a+"Collapse",className:"collapse "+(r?"":"show"),"aria-labelledby":a+"Heading"},l.createElement("div",{className:"card-body "+c},n)))}render(){let{item:e,description:t,className:a,tag_info:r}=this.props;if(!e&&!r)return null;this.parseData();let n=e&&e.description?e.description:t||"";return l.createElement("div",{className:"info-card"+(a?" "+a:"")},n?l.createElement("div",{className:"card"},l.createElement("div",{className:"card-header"},l.createElement("div",{className:"btn btn-link w-100"},l.createElement("div",{className:"p text-left"},l.createElement("span",{className:"mr-1 fas fa-list-ul"})," ",l.createElement("b",null,(0,s._)("Details"))))),l.createElement("div",{className:"card-body d-flex flex-wrap"},i.Z.replaceLineBreak(n))):null,this.cards)}}},7537:(e,t,a)=>{a.d(t,{Z:()=>c});var l=a(67294),i=a(42741),s=(a(46858),a(84766)),r=(a(64927),a(77596)),n=a(1055);class c extends l.Component{constructor(e,t){super(e,t),this.state={collection:null}}componentDidMount(){let{item:e,item_id:t,collection_id:a}=this.props;e&&e.collection_id?this.loadCollection(e.collection_id,e.id):t&&a&&this.loadCollection(a,t)}componentDidUpdate(e,t){let{item:a,item_id:l,collection_id:i,collection:s}=this.props,r=a?a.id:l,n=i||(a?a.collection_id:null),c=a&&!e.item||!a&&e.item;c||(c=a&&e.item?a.id!=e.item.id:l&&!e.item_id||!l&&e.item_id||l!=e.item_id),c&&(s&&s.id?this.loadCollectionItems(s,r):this.loadCollection(n,r))}loadCollection(e,t){e&&i.Z.getCollectibleCollection(e,(e=>{t&&this.loadCollectionItems(e,t)}),(e=>{s.Log.error(e)}))}loadCollectionItems(e,t){let a={collection_id:e.id,visibility:"public"};i.Z.searchCollection("item",a,(a=>{let l=a.items.map((e=>e.id));i.Z.searchListings({kind:"drop",collectible_item_id:l.join(",")},(l=>{let i={};for(let e in l){let t=l[e];i[t.collectible_item_id]=t}e.items=a.items,e.items&&Array.isArray(e.items)&&(e.items=e.items.filter((e=>(i[e.id]&&(e.price=i[e.id].price),e&&e.id!=t)))),this.setState({collection:e})}),(t=>{s.Log.error(t,"Error getting drops"),this.setState({collection:e})}))}))}render(){let{header:e,className:t}=this.props,{collection:a}=this.state;if(!a||!a.items||a.items.length<=0)return l.createElement("div",null);let i=[];return a.items&&a.items.map(((e,t)=>{i.push(l.createElement(r.Z,{key:t,className:"col-12 col-md-4 col-lg-3 listing-detail",key:t,item:e,collection:a}))})),l.createElement("div",{className:t||"container-fluid border-top"},l.createElement("div",{className:"row pt-3 pb-3 ml-0 ml-xl-5"},l.createElement("h2",{className:"col-12"},e||(0,n._)("More from this collection"))),l.createElement("div",{className:"row pt-2 pb-3 ml-0 ml-xl-5"},i))}}},85239:(e,t,a)=>{a.r(t),a.d(t,{default:()=>f});var l=a(67294),i=(a(47675),a(84766)),s=a(42741),r=a(46858),n=a(64927),c=a(97614),o=a(7537),d=a(21397),m=a(1055),p=a(17515),u=a(96655);class f extends l.Component{constructor(e,t){super(e,t);let a=r.Z.contextData(e);this.state={loaded:!1,htmlHeaders:a.htmlHeaders||null}}static fetchData(e,t){let a=e.id||e.name;s.Z.getCollectibleItem(a,(e=>{t(null,e)}),(e=>{t(e)}))}static propData(){return"item"}componentDidMount(){p.Z.update();let e=this.props.match.params;this.loadDrop(e)}componentDidUpdate(e,t){let a=this.props.match?this.props.match.params:{},l=e.match?e.match.params:{};(a.id||a.name)!=(l.id||l.name)&&this.loadDrop(a)}loadDrop(e){f.fetchData(e,((e,t)=>{t?(this.setState({item:t,loaded:!0}),this.loadListing(t),this.loadCollection(t.collection_id)):this.setState({item:null,loaded:!0})}))}loadCollection(e){s.Z.getCollectibleCollection(e,(e=>{this.setState({collection:e})}),(e=>{i.Log.error(e)}))}loadListing(e){s.Z.searchListings({kind:u.n$X,cognitoidp_client:"marketplace",collectible_item_id:e.id,visibility:"public",sort:"end_date:desc"},(t=>{i.Log.debug(t,"Drop listings");let a=[];t.map(((t,l)=>{t.collectible_item_id==e.id&&(t.collectible_item=e,a.push(t))})),this.setState({drops:a})}),(e=>{i.Log.error(e,"Error loading drops")}))}onClickAction(e,t,a){if(i.Log.debug(e,"Action"),r.Z.checkVerified()&&"buy"===e){let e={id:t};a&&(e.offer=a),r.Z.transitionTo("checkout",e)}}headerMetas(e){return{}}render(){let{item:e,drops:t,collection:a,loaded:i}=this.state;if(i&&(!e||!e.id))return l.createElement("div",{className:"row text-center"},l.createElement("h1",{className:"col-12"},(0,m._)("Not Found")),l.createElement("p",{className:"col-12 pt-3"},(0,m._)("Item not found or is no longer available!")));e&&(e.nft_metadata=e.details,void 0!==e.series&&(e.nft_metadata.series=e.series),void 0!==e.edition&&(e.nft_metadata.edition=e.edition));let s=t?t[0]:null;return l.createElement("div",{id:"item",className:"gf-background-a"},l.createElement("div",{className:"screen container-lg mt-0 mb-4 pt-5"},l.createElement(h,{item:e,listing:s,collection:a,onClickAction:this.onClickAction.bind(this)})),l.createElement("div",{className:"screen container-lg"},s?l.createElement("div",{className:"mb-4"},l.createElement("div",{className:"row pt-2 pb-2 mx-0 mx-xl-5"},l.createElement("h2",{className:"col-12"},(0,m._)("About this Drop"))),l.createElement("div",{className:"row pt-2 pb-2 mx-0 mx-xl-5"},l.createElement("div",{className:"col-12"},r.Z.replaceLineBreak(s.description)))):"",l.createElement(o.Z,{className:"border-top",item:e})))}}class h extends l.Component{onClickAction(e,t){this.props.onClickAction&&this.props.onClickAction(e,t)}render(){let{item:e,collection:t,listing:a}=this.props;if(!e)return l.createElement("div",null);let s=null,o=null,p=null,f="USD";if(a){let t=new Date,n=r.Z.collectibleItemRemaining(e);n>0&&(p=l.createElement("div",{className:"gf-text-normal"},(0,m._)("Available Quantity"),": ",n,"/",e.supply)),a.start_date&&t<new Date(a.start_date)?s=l.createElement("span",null,(0,m._)("Sale starts in")," ",l.createElement(i.TimeCountDown,{datetime:a.start_date})):a.end_date&&t<new Date(a.end_date)&&(s=l.createElement("span",null,(0,m._)("Sale ends in")," ",l.createElement(i.TimeCountDown,{datetime:a.end_date})));let c="btn btn-primary gf-button-huge my-2";0===n||a.status==u.A9h?(o=l.createElement("button",{className:c+" disabled"},(0,m._)("Sold")),s=l.createElement("span",{className:"text-danger font-weight-bold text-capitalize small"},(0,m._)("Sold out"))):a.end_date&&t>new Date(a.end_date)?(o=l.createElement("button",{className:c+" disabled"},(0,m._)("Sale Ended")),s=l.createElement("span",{className:"text-danger font-weight-bold"},(0,m._)("Sale Ended")),p=e.token_sold_count>0?l.createElement("div",{className:"gf-text-normal"},(0,m._)("Quantity Sold"),": ",e.token_sold_count):null):a.start_date&&t<new Date(a.start_date)?o=l.createElement("button",{className:c+" disabled"},(0,m._)("Coming Soon")):n>0&&(o=l.createElement("button",{className:c,onClick:this.onClickAction.bind(this,"buy",a.id)},(0,m._)("Buy"))),s&&(s=l.createElement("div",{className:"gf-text-normal"},s)),f="USD"!=m.Z.currencyLocale()?m.Z.currencyLocale():!r.Z.flpEnabled||a.accept_currency!=u.jtz&&a.accept_currency!=u.QV0?"USD":"FLP"}else{let t={};e.collection_id&&(t.collectible_item_id=e.id),o=l.createElement("button",{className:"btn btn-primary gf-button-huge my-2",onClick:()=>{r.Z.transitionTo("shop/nft",{},t)}},(0,m._)("Search Marketplace"))}return l.createElement("div",{className:"row py-6"},l.createElement("div",{className:"col-12 col-lg-6 text-center"},l.createElement(d.Z,{item:e,show:"video"})),l.createElement("div",{className:"col-12 col-lg-6"},l.createElement("div",{className:"gf-text-header-boldest mb-3"},e.name),t?l.createElement("div",{className:"mt-2 mb-4"},l.createElement(i.Link,{className:"gf-text-normal mb-2",to:`/collection/${r.Z.slug(t.name)}/${t.id}`},t.name)):null,a?l.createElement("div",{id:"sale",className:"my-3 d-flex flex-column"},l.createElement("div",{className:"d-flex"},l.createElement("div",{className:"mr-auto"},a?l.createElement(n.Z,{money:a.price,moneyClassName:"nftc-drop-price",currencyClassName:"nftc-drop-currency"}):""),l.createElement("div",{className:"align-self-center"},a&&"USD"!=f?l.createElement(n.Z,{money:a.price,currency:f,leadingText:"â "}):"")),p,s,l.createElement("div",{className:"mt-5 mb-3 d-flex justify-content-center justify-content-lg-start"},o)):null,l.createElement(c.Z,{item:e}),a?null:l.createElement("div",{className:"my-3 d-flex flex-column"},l.createElement("div",{className:"mt-5 mb-3 d-flex justify-content-center justify-content-lg-start"},o))))}}}}]);