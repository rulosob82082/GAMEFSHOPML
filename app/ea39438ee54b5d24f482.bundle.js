"use strict";(self.webpackChunkgameflip_market=self.webpackChunkgameflip_market||[]).push([[2928],{33727:(e,a,t)=>{t.d(a,{Z:()=>c});var n=t(67294),s=(t(46858),t(84766)),l=t(42741),r=t(1055),i=t(96655);class c extends n.Component{constructor(e,a){super(e,a),this.state={unsaved:!1,selectedIndex:-1,userLanguages:this.getLanguages(),selectedLanguage:"",selectedProficiency:"fluent"},this.selectableLanguages=[];for(let e in i.a2c)this.selectableLanguages.push({id:e,label:i.a2c[e]});this.PROFICIENCIES={native:(0,r._)("Native"),fluent:(0,r._)("Fluent"),conversational:(0,r._)("Conversational"),basic:(0,r._)("Basic")}}componentDidMount(){this.setState({userLanguages:this.getLanguages()})}componentDidUpdate(e,a){e.profile&&this.props.profile&&e.profile.owner!=this.props.profile.owner&&this.setState({userLanguages:this.getLanguages()})}getLanguages(e){let a=e||this.props.profile;return a&&a.languages||[]}getLanguageIndex(){let{userLanguages:e,selectedLanguage:a}=this.state;for(let t=0;t<e.length;t++)if(a&&e[t].code==a)return t;return-1}addLanguage(){let{selectedIndex:e,userLanguages:a,selectedLanguage:t,selectedProficiency:n}=this.state;if(!t)return;let s=this.getLanguageIndex(),l=s>=0?s:e;l>=0?(a[l]={code:t,proficiency:n},this.setState({unsaved:!0,selectedIndex:-1,userLanguages:a})):a.length<5&&(a.push({code:t,proficiency:n}),this.setState({unsaved:!0,selectedIndex:-1,userLanguages:a}))}changeLanguage(e){let{userLanguages:a}=this.state,t=a[e],n=t.code;this.setState({selectedIndex:e,selectedLanguage:n,selectedProficiency:t.proficiency})}removeLanguage(e){let{userLanguages:a}=this.state;a.splice(e,1),this.setState({unsaved:!0,userLanguages:a})}saveLanguages(){let{userLanguages:e}=this.state,a=[];a.push({op:"replace",path:"/languages",value:e}),l.Z.patchProfile(a,(e=>{this.setState({unsaved:!1,userLanguages:this.getLanguages(e),selectedLanguage:null})}),(e=>{this.setState({error:e})}))}onChange(e,a){let t=a&&a.target?a.target.value:a;this.setState({[e]:t})}render(){let{max:e,sentenceOnly:a,readOnly:t}=this.props,{unsaved:l,selectedIndex:c,userLanguages:o,selectedLanguage:m,selectedProficiency:d}=this.state,g=this.getLanguageIndex()>=0,u=g?(0,r._)("Change"):(0,r._)("Add"),p=!t&&(o.length<5||g),h=[],f=[];if(o.length&&(h=o.map(((e,s)=>{let l=c==s?" bg-light":"",o=i.a2c[e.code]||(0,r._)("Unknown Language"),m=this.PROFICIENCIES[e.proficiency]||(0,r._)("Unknown Proficiency");return a&&f.push(`${o} (${m})`),n.createElement("div",{className:"row pt-2 pb-2 border-bottom"+l,key:s},n.createElement("div",{className:"col-5"},o),n.createElement("div",{className:"col-4"},m),t?n.createElement("div",{className:"col-3"}):n.createElement("div",{className:"col-3"},n.createElement("span",{className:"pointer mr-2",onClick:this.changeLanguage.bind(this,s)},n.createElement("i",{className:"fas fa-pen"})),n.createElement("span",{className:"pointer",onClick:this.removeLanguage.bind(this,s)},n.createElement("i",{className:"fas fa-times-circle text-danger"}))))}))),a)return e&&(f=f.slice(0,e)),f.join(", ");let v=[];for(let e in this.PROFICIENCIES)v.push(n.createElement("option",{key:e,value:e},this.PROFICIENCIES[e]));return n.createElement("div",null,n.createElement("div",{className:"table-responsive"},h.length>0?n.createElement("div",{className:"container-fluid mb-3"},n.createElement("div",{className:"row font-weight-bold border-bottom pb-2"},n.createElement("div",{className:"col-5"},(0,r._)("Language")),n.createElement("div",{className:"col-5"},(0,r._)("Proficiency")),n.createElement("div",{className:"col-3"})),h):""),p?n.createElement("div",null,n.createElement("div",{className:"form-row align-items-center"},n.createElement("div",{className:"col-5"},n.createElement(s.Dropdown,{allowSearch:!0,label:(0,r._)("Language"),labelClass:"text-secondary",selectedId:m,onSelect:this.onChange.bind(this,"selectedLanguage"),selections:this.selectableLanguages})),n.createElement("div",{className:"col-4"},n.createElement("select",{className:"custom-select",value:d,onChange:this.onChange.bind(this,"selectedProficiency")},v)),n.createElement("div",{className:"col-3"},n.createElement("button",{className:"btn btn-primary"+(m?"":" disabled"),onClick:m?this.addLanguage.bind(this):null},u))),l?n.createElement("button",{className:"btn btn-primary mt-3",onClick:this.saveLanguages.bind(this)},(0,r._)("Update Languages")):""):"")}}},82928:(e,a,t)=>{t.d(a,{Z:()=>u});var n=t(67294),s=(t(47675),t(42741)),l=t(46858),r=t(84766),i=t(90135),c=t(94643),o=t(53414),m=t(33727),d=t(1055),g=t(78314);class u extends n.Component{constructor(e,a){super(e,a),this.state={profile:{},expand_about:!1}}componentDidMount(){this.props.id&&!this.props.profile&&this.loadProfile(this.props.id)}componentDidUpdate(e,a){let t=this.props.id||"",n=this.props.profile;(e.id||"")==t||n||(t?this.loadProfile(t):this.setState({profile:{},expand_about:!1}))}loadProfile(e){s.Z.getProfile(e,(e=>{this.setState({profile:e})}),(e=>{})),l.Z.canUsePresence()&&s.Z.getPresence(e,(e=>{e&&e.online_until&&this.setState({online_until:e.online_until})})),this.loadRatingSummary(e)}loadRatingSummary(e){let a={owner:e,role:"seller"};s.Z.searchRatingSummary(a,(e=>{this.setState({rating_summary:e}),r.Log.debug(e,"Search rating summary result")}),(e=>{this.setState({rating_summary:null}),r.Log.error(e)}))}expandAbout(){this.setState({expand_about:!0})}convertLineBreak(e){return e?(e=e.replace(/(?:\r\n|\r)/g,"\n")).split("\n").map(((e,a)=>n.createElement("p",{className:"col-12",key:a},e))):""}infoPopover(e,a){let t="",s="",l=!1,r=a||"fa fa-question-circle";return"seller_rating"===e&&(t=(0,d._)("How is Seller Rating calculated?"),s=(0,d._)("The Seller Rating is calculated as <strong>Positives / (Positives + Negatives)</strong> of feedback ratings for the transactions that ended in the last 180 days. Seller Rating is shown as <i>Not Available</i> when there are too few feedback ratings."),l=!0),s?n.createElement("a",{tabIndex:"0",role:"button",className:"btn-link","data-toggle":"popover","data-trigger":"focus","data-placement":"top","data-container":"body","data-original-title":t,"data-content":s,"data-html":l},n.createElement("span",{className:r,"aria-hidden":"true"})):""}formatCount(e){return e<1e3?e:e<1e6?parseFloat(e/1e3).toFixed(0)+"k+":parseFloat(e/1e3).toFixed(0)+"M+"}render(){let{online_until:e,expand_about:a,rating_summary:t}=this.state,{allow_contact:s,include_about:u,small_avatar:p,is_compact:h,className:f}=this.props,v=this.props.profile||this.state.profile,b=(l.Z.isMobile,"");if(v.created){let e={year:"numeric",month:"short",day:"numeric"};b=new Date(v.created).toLocaleDateString(d.Z.lang,e)}let E=this.props.as_seller?(0,d._)("Sell by"):"",N=this.props.nolink,_=v.owner||this.props.id,L=!(g.Z.isLoggedIn&&g.Z.profile.owner==_)&&l.Z.canUseMessaging&&v.chat_enabled&&s,y="";v.languages&&v.languages.length&&(y=n.createElement("div",{className:"d-none d-sm-block col-12 text-muted"},(0,d._)("Languages"),": ",n.createElement(m.Z,{profile:v,sentenceOnly:"true",max:2})));let x="";if(v.about&&u){let e=v.about.replace(/\n/g,"                                                            ");x=n.createElement("div",{className:"container-fluid profile-about"},n.createElement("div",{className:"about-text row",style:a?{height:"auto"}:{}},this.convertLineBreak(v.about)),e.length>200&&!a?n.createElement("p",{className:"btn btn-link",onClick:this.expandAbout.bind(this)},(0,d._)("Load more"),"..."):"")}let k="";if(t){let e={},a="180day";t[a].num_ratings>=5&&(e.as_percent=parseFloat(100*t[a].good/(t[a].good+t[a].poor)).toFixed(1),e.ratings=this.formatCount(t[a].good+t[a].poor)),k=n.createElement("div",{className:"col-12"},n.createElement("span",{className:"text-muted"},h?(0,d._)("Rating"):(0,d._)("Seller Rating"),": "),n.createElement("span",{className:"font-weight-bold"},e.as_percent?e.as_percent+"% ":" "),n.createElement("span",{className:"small text-muted"},e.as_percent?"("+e.ratings+")":(0,d._)("Not available")),n.createElement("span",{className:"text-muted"},"  ",this.infoPopover("seller_rating")))}else k=n.createElement("div",{className:"col-12 text-muted"},(0,d._)("Feedback Score"),": ",v.score);return h?n.createElement("div",{className:f||"row no-gutters avatar-compact"},n.createElement("div",{className:"row no-gutters"},n.createElement("h4",{className:"col-10"},n.createElement("span",{className:"text-muted mr-1"},E),n.createElement("b",null,N?v.display_name:n.createElement("span",null,n.createElement(c.Z,{profile:v}),n.createElement(r.Link,{to:"profile",params:{id:_,name:l.Z.slug(v.display_name)}},v.display_name))),n.createElement(o.Z,{className:"ml-1 d-inline d-sm-none",online_until:e,hideOffline:!0,noText:!0})),k)):n.createElement("div",{className:f||"row no-gutters border my-3 p-2 avatar-container"},n.createElement("div",{className:"text-center d-none d-sm-block "+(p?"col-2":"col-3")},n.createElement(i.Z,{profile:v,nolink:N}),n.createElement(o.Z,{online_until:e,hideOffline:!0})),n.createElement("div",{className:p?"col-10":"col-9"},n.createElement("div",{className:"row no-gutters pl-3 pr-3"},n.createElement("h4",{className:L?"col-10":"col-12"},n.createElement("span",{className:"text-muted mr-1"},E),n.createElement("b",null,N?v.display_name:n.createElement("span",null,n.createElement(c.Z,{profile:v}),n.createElement(r.Link,{to:"profile",params:{id:_,name:l.Z.slug(v.display_name)}},v.display_name))),n.createElement(o.Z,{className:"ml-1 d-inline d-sm-none",online_until:e,hideOffline:!0,noText:!0})),n.createElement("div",{className:"col-12"},(0,d._)("Member since {member_date}",{member_date:b})),k,y)),n.createElement("div",{className:"p-relative"},L?n.createElement("button",{className:"avatar-contact btn btn-sm btn-primary",onClick:()=>{l.Z.onContactUser(_)}},n.createElement("span",{className:"fa fa-comments","aria-hidden":"true"})," ",n.createElement("span",{className:"d-none d-sm-inline"},(0,d._)("Contact"))):""),x?n.createElement("div",{className:"col-12 profile-info"},x):"")}}},90135:(e,a,t)=>{t.d(a,{Z:()=>c});var n=t(67294),s=t(84766),l=t(95835),r=t(46858);class i extends n.Component{render(){let{profile:e,nolink:a,className:t}=this.props;if(!e)return null;let i=n.createElement("div",{className:t},n.createElement(l.Z,{src:r.Z.avatarUrl(e.avatar),alt:e.display_name,className:"img-fluid rounded-circle img-thumbnail avatar-image avatar-dummy",dim:200}),n.createElement(l.Z,{src:r.Z.avatarUrl(e.avatar),alt:e.display_name,className:"img-fluid rounded-circle img-thumbnail avatar-image",dim:200}),e.id_verified?n.createElement("img",{src:"/img/app/verified_frame.png",className:"img-fluid avatar-verified-frame"}):"");return a?i:n.createElement(s.Link,{className:t,to:"profile",params:{id:e.owner,name:r.Z.slug(e.display_name)}},i)}}const c=i},94643:(e,a,t)=>{t.d(a,{Z:()=>i});var n=t(67294),s=t(46858),l=(t(84766),t(1055));class r extends n.Component{componentDidMount(){s.Z.reloadPopover()}componentDidUpdate(){s.Z.reloadPopover()}render(){let{profile:e,className:a}=this.props;if(!e||!e.id_verified)return null;let t=(0,l._)("Gameflip Verified"),s=(0,l._)("This profile has been verified by Gameflip.");return n.createElement("a",{tabIndex:"0",role:"button",className:"btn-link"+(a?" "+a:""),"data-toggle":"popover","data-trigger":"focus","data-placement":"top","data-container":"body","data-original-title":t,"data-content":s,"data-html":!0},n.createElement("img",{className:"img-fluid avatar-verified-badge",src:"/img/app/icon_badge_verified.png",alt:"Verified User Badge"}))}}const i=r}}]);