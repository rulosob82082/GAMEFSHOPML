"use strict";(self.webpackChunkgameflip_market=self.webpackChunkgameflip_market||[]).push([[4475,8258],{95835:(e,t,a)=>{a.d(t,{Z:()=>c});var n=a(87462),s=a(67294),i=a(45697),l=a.n(i),r=a(47675),o=a(46858);class c extends s.Component{constructor(e,t){super(e,t),this.state={src:""},this.setDisplayImage=this.setDisplayImage.bind(this)}componentDidMount(){let{src:e,placeholder:t}=this.props;t&&this.setDisplayImage(e,t)}componentDidUpdate(e,t){e.src!==this.props.src&&this.props.placeholder&&this.setDisplayImage(this.props.src,this.props.placeholder)}componentWillUnmount(){this.unmounted=!0}setDisplayImage(e,t){let a=new Image;e&&e.includes("https://ipfs")&&(e=r.Z.config.server_url+"/api/util/image/"+encodeURIComponent(e)),a.onerror=()=>{this.unmounted||this.setState({src:t},(()=>{this.props.onError&&this.props.onError(e)}))},a.onload=()=>{this.unmounted||this.setState({src:e},(()=>{this.props.onLoad&&this.props.onLoad(e)}))},a.src=e}imgUrl(e,t,a){return-1!==e.indexOf("gameflipusercontent.fingershock.com")?e+="/"+t+"x"+t+a:e.match(/gameflip.fingershock.com\/api\/v1\/listing\/.+\/photo\/cover_photo/)&&(e+="?format="+t+"x"+t+a),e}render(){let{className:e,alt:t,dim:a,onClick:i,onContextMenu:l,aspectRatio:c,loading:m,style:d,schema:h}=this.props,{src:p}=this.state,u="";p||(p=this.props.src),p&&p.includes("https://ipfs")&&(p=r.Z.config.server_url+"/api/util/image/"+encodeURIComponent(p));let g=[{type:"image/webp",ext:".webp"},{type:"image/jpeg",ext:".jpg"}],_=[];if(a&&p&&(-1!==p.indexOf("gameflipusercontent.fingershock.com")||-1!==p.indexOf("gameflip.fingershock.com"))?g.map(((e,t)=>{let n=this.imgUrl(p,a,e.ext);_.push(s.createElement("source",{key:a+t,type:e.type,srcSet:n})),u||"image/jpeg"!=e.type||(u=n)})):this.props.sources&&Array.isArray(this.props.sources)&&g.map(((e,t)=>{this.props.sources.map(((a,n)=>{a.endsWith(e.ext)&&(_.push(s.createElement("source",{key:t,type:e.type,srcSet:a})),u||"image/jpeg"!=e.type||(u=a))}))})),!p)return!1;u||(u=p),m&&"lazy"!=m&&"eager"!=m&&(m="");let f={};e&&(f.className=e),m&&(f.loading=m),t&&(f.alt=t),h&&(f.itemProp="image");let E=s.createElement("img",(0,n.Z)({},f,{src:u,onClick:i||null,onContextMenu:l||null,style:d||null})),v=o.Z.isSafari?E:s.createElement("picture",null," ",_," ",E," ");return c?s.createElement("div",{style:{"--aspect-ratio":c}},v):v}}c.propTypes={src:l().string.isRequired,onLoad:l().func,onError:l().func}},10894:(e,t,a)=>{a.d(t,{Z:()=>s});var n=a(67294);a(46858),a(84766),a(1055);class s extends n.Component{render(){let{style:e}=this.props;return n.createElement("a",{className:"invest-banner",style:e||null,target:"_blank",href:"https://www.startengine.com/gameflip"})}}},40654:(e,t,a)=>{a.d(t,{Z:()=>h});var n=a(67294),s=a(88601),i=a(84766),l=a(42741),r=a(46858);class o extends n.Component{render(){return n.createElement("div",{id:this.props.id,className:"photo-dialog fade modal",tabIndex:"-1",role:"dialog","aria-labelledby":this.props.id+"Label","aria-hidden":"true"},n.createElement("div",{className:"modal-dialog"},n.createElement("div",{className:"modal-content"},n.createElement("div",{className:"modal-body"},n.createElement("img",{className:"photo-dialog-img",src:""}),n.createElement("button",{type:"button",className:"close","data-dismiss":"modal","aria-label":"Close"},n.createElement("span",{"aria-hidden":"true"},n.createElement("img",{src:"/img/app/icon_close.gif"})))))))}}const c=o;var m=a(78314),d=a(1055);class h extends n.Component{getState(e){return this.exchange_id=e.exchange_id,{messages:[],next_page:null,message:""}}constructor(e,t){super(e,t),this.state=this.getState(this.props),this.loadMessages(this.props.audience)}componentDidUpdate(e,t){JSON.stringify(e)!==JSON.stringify(this.props)&&this.setState(this.getState(this.props),(()=>{this.loadMessages(this.props.audience)}))}loadMessages(e){l.Z.getExchangeMessages(this.exchange_id,this.state.next_page,((t,a)=>{t=t.filter((t=>e?t.audience==e:!t.audience)),this.setState({messages:this.state.messages.concat(t),next_page:a})}),(e=>{i.Log.error(e)}))}refresh(){this.setState(this.getState(this.props),(()=>{this.loadMessages(this.props.audience)}))}onChangeMessage(e){this.setState({message:e.target.value})}sendMessage(e){e.preventDefault();let t=this.state.message.trim();if(!t)return;let a={message:t};this.props.audience&&(a.audience=this.props.audience),l.Z.postExchangeMessage(this.exchange_id,a,(e=>{e.avatar=m.Z.profile.avatar,e.display_name=m.Z.profile.display_name;let t=this.state.messages;t.unshift(e),this.setState({messages:t,message:""})}),(e=>{r.Z.showErrorDialog(e)}))}selectPhoto(e){this.refs.message_photo_dropzone.open()}onDrop(e){i.Log.debug(e,"onDrop files");let t=e[0];r.Z.notValidImage(t)||r.Z.compressImageAny(t.preview,1024,640,0,!1,(e=>{let t=r.Z.dataURItoBlob(e);l.Z.uploadExchangePhoto(this.exchange_id,t,this.props.audience,((e,t,a)=>{i.Log.debug(a),a.avatar=m.Z.profile.avatar,a.display_name=m.Z.profile.display_name,a.media_id=e,a.view_url=t;let n=this.state.messages;n.unshift(a),this.setState({messages:n})}),(e=>{r.Z.showErrorDialog(e)}))}))}loadMore(e){e.preventDefault(),this.loadMessages(this.props.audience)}zoomImage(e,t){$("#message-photo-dialog img.photo-dialog-img").attr("src",e),$("#message-photo-dialog").is(":visible")||$("#message-photo-dialog").modal("show")}render(){let e=this.props.quickview,t=this.props.audience||"",a=this.props.to||"",l=this.state.messages.map(((t,a)=>{let s="";s=t.media_id&&t.view_url?n.createElement("div",{className:"row zoom-photo message-content message-photo"+(e?" quickview":""),onClick:e?null:this.zoomImage.bind(this,t.view_url)},n.createElement("img",{className:"img-fluid img-thumbnail",src:t.view_url})):n.createElement("div",{className:"row message-content"},r.Z.replaceLineBreak(t.message));let l=n.createElement("img",{src:r.Z.avatarUrl(t.avatar),className:"img-fluid rounded-circle"});return n.createElement("div",{className:"row message",key:a},n.createElement("div",{className:"col-2 avatar"},e?l:n.createElement(i.Link,{to:"profile",params:{id:t.owner,name:r.Z.slug(t.display_name)}},l)),n.createElement("div",{className:"col-10"},n.createElement("div",{className:"row"},n.createElement("b",null,t.display_name)),s,n.createElement("div",{className:"row"},n.createElement("p",{className:"text-muted"},r.Z.timePassed(t.created)))))})),o=null;o="support"==t?n.createElement("h3",null,(0,d._)("Dispute Support")):"buyer"==a.toLowerCase()?n.createElement("h3",null,(0,d._)("Messages to Buyer")):"seller"==a.toLowerCase()?n.createElement("h3",null,(0,d._)("Messages to Seller")):n.createElement("p",null," ");let m="support"==t?n.createElement("p",null,(0,d._)("Please provide evidence for the dispute. Be sure to include screenshots or photos to support the investigation.")):n.createElement("p",null,(0,d._)("All messages and photos can be reviewed by Gameflip at any time to support both parties during the transaction.")),h=this.props.readonly?"":n.createElement("div",null,o,m,n.createElement("textarea",{className:"form-control",placeholder:(0,d._)("Type your message"),rows:"4",value:this.state.message,onChange:this.onChangeMessage.bind(this)}),n.createElement("div",{className:"row"},n.createElement("div",{className:"col-4 col-md-6"},n.createElement("button",{className:"btn btn-outline-secondary",onClick:this.selectPhoto.bind(this)},n.createElement("span",{className:"fa fa-picture","aria-hidden":"true"})," ",(0,d._)("Add Photo")),n.createElement(s.Z,{ref:"message_photo_dropzone",className:"dropzone",onDrop:this.onDrop.bind(this),multiple:!1,accept:"image/*"})),n.createElement("div",{className:"col-8 col-md-6 text-right"},n.createElement("div",{className:"btn-group",role:"group"},n.createElement("button",{className:"btn btn-primary",onClick:this.sendMessage.bind(this)},(0,d._)("Send")),n.createElement("button",{className:"btn btn-outline-secondary",onClick:this.refresh.bind(this)},n.createElement("span",{className:"fa fa-sync-alt","aria-hidden":"true"})))))),p=this.state.next_page?n.createElement("div",{className:"load-more row text-center"},n.createElement("button",{className:"btn btn-primary",onClick:this.loadMore.bind(this)},(0,d._)("Load More"))):"";return h||l&&0!=l.length||(l=n.createElement("p",{className:"text-muted"},(0,d._)("There is no message available."))),n.createElement("div",{className:"message-component section"},n.createElement("div",{className:"section-content container-fluid"},h,n.createElement("div",{className:"message-list"},l),p),e?"":n.createElement(c,{id:"message-photo-dialog"}))}}},64927:(e,t,a)=>{a.d(t,{Z:()=>p});var n=a(4942),s=a(67294),i=a(50743),l=a.n(i),r=a(44431),o=a.n(r),c=a(17515),m=a(96655);function d(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function h(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?d(Object(a),!0).forEach((function(t){(0,n.Z)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):d(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}class p extends s.Component{render(){let{money:e,currency:t,rate:a,flpAsUSD:n=!0}=this.props;if(void 0!==e&&t==m.jtz)return n?s.createElement(g,this.props):s.createElement(u,this.props);let i=c.Z.getCurrency(t);return t&&t!=m.qBs&&t!=m.QV0&&i&&"fiat"!=i.type?s.createElement(f,this.props):s.createElement(_,this.props)}}const u=e=>{let{money:t,currency:a,rate:n}=e,i=c.Z.convertFromUSD(t,a,n),l=h({},e);return l.money=i,l.decimals=2,s.createElement(f,l)},g=e=>{let t=h({},e);return t.currency=m.qBs,s.createElement(_,t)},_=e=>{let{money:t,currency:a,rate:n,leadingText:i,trailingText:r,subunit2Unit:o,className:d,moneyClassName:h,currencyClassName:p,schema:u}=e;a&&a!=m.QV0||(a=m.qBs);let g=c.Z.getLocalizedFormat(a);if(a!=m.qBs){void 0!==i&&null!=i||(i="≈ ");let e=c.Z.convertFromUSD(t,a,n);isNaN(e)||e==t||(t=e)}o||(o=100),i=i?s.createElement("span",null,i):"",r=r?s.createElement("span",null,r):"";let _=l().formatMoney(1*t/o,g),f=u?s.createElement("span",{className:h||"money",itemProp:"price",content:_},_):s.createElement("span",{className:h||"money"},_),E=u?s.createElement("span",{className:p||"text-muted",itemProp:"priceCurrency",content:a}," ",a):s.createElement("span",{className:p||"text-muted"}," ",a);return s.createElement("span",{className:d||"formatted-money"},i,f,E,r)},f=e=>{let{money:t,currency:a,rate:n,leadingText:i,trailingText:l,className:r,moneyClassName:d,currencyClassName:h,decimals:p}=e;if(!t)return"";let u=isNaN(p)?a==m.Zp_?2:4:p,g=c.Z.getCurrency(a),_=g?g.subunit_to_unit:"1.0e+"+(a==m.Zp_?6:18),f="bigint"==typeof t||"object"==typeof t,E="string"==typeof t,v=f?t:o()(t);if(f||E||(v=v.times("1.0e+15")),isNaN(v))return s.createElement("span",null);i=i?s.createElement("span",null,i):"",l=l?s.createElement("span",null,l):"";let b=v.div(_).toFixed(u);return s.createElement("span",{className:r||"formatted-money"},i,s.createElement("span",{className:d||"money"},b),s.createElement("span",{className:h||"text-muted"}," ",a),l)}},25315:(e,t,a)=>{a.d(t,{Z:()=>r});var n=a(67294),s=(a(84766),a(46858)),i=a(1055);const l=["good","neutral","poor"];class r extends n.Component{constructor(e,t){super(e,t),this.state={rate:"good",comment:""}}onRate(e,t){this.setState({rate:e})}onChangeComment(e){this.setState({comment:e.target.value})}rate(e){this.isValid()&&this.props.onPostRating&&this.props.onPostRating(this.state)}isValid(){let{rate:e,comment:t}=this.state;return!(!e||-1==l.indexOf(e)||!t||"good"!=e&&t.length<64||"good"==e&&t.length<20)}render(){let{heading:e}=this.props,{rate:t,comment:a}=this.state,r=this.isValid(),o=l.map(((e,a)=>n.createElement("div",{className:"col-3 text-center",key:a},n.createElement("img",{className:"img-fluid",src:"/img/app/icon_rating_"+e+".png"}),n.createElement("span",null,s.Z.capitalize((0,i._)(e))),n.createElement("br",null),n.createElement("input",{type:"radio",name:"rate",value:e,checked:t==e,onChange:this.onRate.bind(this,e)}))));return n.createElement("div",{className:"container-fluid info-table"},n.createElement("div",{className:"row"},n.createElement("p",null,e,":")),n.createElement("div",{className:"row"},n.createElement("div",{className:"col-1"}),o,n.createElement("div",{className:"col-1"})),n.createElement("div",{className:"row form-group"+(r?"":" has-error")},n.createElement("textarea",{className:"form-control",placeholder:(0,i._)("Your comments..."),rows:"3",value:a,onChange:this.onChangeComment.bind(this)}),n.createElement("div",{className:"float-left "+(r?"text-muted":"text-danger")},n.createElement("small",null,(0,i._)("Min.")," ","good"!=t?64:20)),n.createElement("div",{className:"float-right "+(r?"text-muted":"text-danger")},n.createElement("small",null,a.length,"/",512))),n.createElement("div",{className:"row text-center"},n.createElement("button",{className:"btn btn-primary"+(this.isValid()?"":" disabled"),onClick:this.rate.bind(this)},(0,i._)("Send Feedback"))))}}},21397:(e,t,a)=>{a.d(t,{Z:()=>r});var n=a(67294),s=a(84766),i=a(46858),l=(a(1055),a(95835));class r extends n.Component{constructor(e,t){super(e,t)}coverMedia(e){let t=null;if("object"==typeof e){if(!t&&e.cover_media&&e.media){let a=e.media[e.cover_media];s.Log.debug(a,"Has cover media"),a&&(t=a)}if(!t&&e.cover_photo&&e.photo){let a=e.photo[e.cover_photo];s.Log.debug(a,"Has cover photo"),a&&(t=a)}}return t}pickFirstMedia(e,t){let a=[e.media,e.photo],n=[],s=null;if(a.map(((e,t)=>{if(e)for(let t in e){let a=e[t];"active"==a.status&&n.push(a)}})),n.length>0){n=i.Z.sortArrayBy(n,"display_order",1);let e=null,a=null;for(let t=0;t<n.length;t++){let s=n[t];if(!e&&s.mime_type&&/^video\//.test(s.mime_type)?e=s:a||s.mime_type&&!/^image\//.test(s.mime_type)||(a=s),e||a)break}s="video"==t?e||a:a||e}return s}isVideo(e){return e&&(/^video\//.test(e)||/^application\/vnd.apple.mpegurl/.test(e))}render(){let{item:e,show:t,placeholder:a,className:i,alt:l,dim:r,aspectRatio:m,autoPlay:d,urlOnly:h}=this.props;if(!e)return n.createElement("div",null);let p=null,u=this.coverMedia(e);return u&&(s.Log.debug(u,"Cover media"),(t&&"video"==t&&u.mime_type&&this.isVideo(u.mime_type)||!u.mime_type||u.mime_type&&this.isVideo(u.mime_type)&&"video"!==t)&&(p=u)),p||(u=this.pickFirstMedia(e,t||"photo"),s.Log.debug(u,"First available media"),t&&"video"==t&&u&&u.mime_type&&this.isVideo(u.mime_type),p=u),h?p?p.view_url:"/img/app/default_blank_photo.png":p?n.createElement(o,{className:i,media:p,alt:l,dim:r,aspectRatio:m||0,autoPlay:d}):n.createElement(c,{className:i,media:{mime_type:"image/png",view_url:a||"/img/app/default_blank_photo.png"},aspectRatio:m||0})}}const o=e=>{let{show:t,media:a}=e;return a.mime_type&&/^video\//.test(a.mime_type)?n.createElement(m,e):a.mime_type&&/^application\/vnd.apple.mpegurl/.test(a.mime_type)?void(content=n.createElement(d,e)):!a.mime_type||a.mime_type&&/^image\//.test(a.mime_type)?n.createElement(c,e):(s.Log.error(a,"Unknown media mime type"),!1)},c=e=>{let{media:t,className:a,name:s,dim:i,aspectRatio:r}=e;return n.createElement(l.Z,{onContextMenu:e=>{if(e)return e.preventDefault()},className:a||"img-fluid",src:t.view_url,alt:s||"",dim:i,aspectRatio:r||0})};class m extends n.Component{constructor(e){super(e),this.state={loaded:!1,paused:!1===e.autoPlay},this.onPlaying=this.onPlaying.bind(this),this.onPause=this.onPause.bind(this)}componentWillUnmount(){this.thisVideo&&(this.thisVideo.onplaying=null,this.thisVideo.onpause=null,this.thisVideo=null)}hasAudio(e){try{return e.mozHasAudio||Boolean(e.webkitAudioDecodedByteCount)||Boolean(e.audioTracks&&e.audioTracks.length)}catch(e){s.Log.debug(e)}}onClickAudio(e){e&&e.preventDefault(),this.thisVideo&&(this.thisVideo.muted=!this.thisVideo.muted,this.forceUpdate())}onPause(e){e&&e.preventDefault(),this.setState({paused:!0})}onPlaying(e){e&&e.preventDefault(),this.setState({paused:!1})}onClickPlayPause(e){if(e&&e.preventDefault(),this.thisVideo){this.thisVideo.paused||this.thisVideo.ended?this.thisVideo.play():this.thisVideo.pause();let e=this.thisVideo.paused||this.thisVideo.ended;this.setState({paused:e})}}onContextMenu(e){if(e)return e.preventDefault()}onLoadedData(e){this.setState({loaded:!0,paused:this.thisVideo&&(this.thisVideo.paused||this.thisVideo.ended)})}render(){let{media:e,className:t,name:a,autoPlay:s}=this.props,{loaded:i,paused:l}=this.state;void 0===s&&(s=!0);let r=i&&this.hasAudio?n.createElement("div",{className:"nftc-token-video-button "+(this.thisVideo&&!this.thisVideo.muted?"fas fa-volume-up":"fas fa-volume-off"),onClick:this.onClickAudio.bind(this)}):null,o=i?n.createElement("div",{className:"nftc-token-video-button "+(l?"fas fa-play":"fas fa-pause"),onClick:this.onClickPlayPause.bind(this)}):null;return n.createElement("div",{className:"nftc-token-video"},n.createElement("div",{className:"nftc-token-video-buttons"},o,r),n.createElement("video",{className:t||"img-fluid",onLoadedData:this.onLoadedData.bind(this),ref:e=>{this.thisVideo=e,e&&(this.thisVideo.onplaying=this.onPlaying,this.thisVideo.onpause=this.onPause)},onContextMenu:this.onContextMenu.bind(this),key:e.view_url,autoPlay:s,loop:!0,muted:!0,playsInline:!0,controls:!1,controlsList:"nodownload"},n.createElement("source",{src:e.view_url,type:e.mime_type})))}}const d=e=>{let{media:t,className:a,name:s,autoPlay:i}=e,l="";t.poster_selected&&t.posters&&t.posters[t.poster_selected]["640x640"]&&(l=t.posters&&t.posters[t.poster_selected]["640x640"].view_url);let r=l?n.createElement("img",{className:"video-player-poster center-block",itemProp:"image",src:l}):"";return n.createElement("div",{className:a||"img-fluid pointer"},r)}},90135:(e,t,a)=>{a.d(t,{Z:()=>o});var n=a(67294),s=a(84766),i=a(95835),l=a(46858);class r extends n.Component{render(){let{profile:e,nolink:t,className:a}=this.props;if(!e)return null;let r=n.createElement("div",{className:a},n.createElement(i.Z,{src:l.Z.avatarUrl(e.avatar),alt:e.display_name,className:"img-fluid rounded-circle img-thumbnail avatar-image avatar-dummy",dim:200}),n.createElement(i.Z,{src:l.Z.avatarUrl(e.avatar),alt:e.display_name,className:"img-fluid rounded-circle img-thumbnail avatar-image",dim:200}),e.id_verified?n.createElement("img",{src:"/img/app/verified_frame.png",className:"img-fluid avatar-verified-frame"}):"");return t?r:n.createElement(s.Link,{className:a,to:"profile",params:{id:e.owner,name:l.Z.slug(e.display_name)}},r)}}const o=r},94643:(e,t,a)=>{a.d(t,{Z:()=>r});var n=a(67294),s=a(46858),i=(a(84766),a(1055));class l extends n.Component{componentDidMount(){s.Z.reloadPopover()}componentDidUpdate(){s.Z.reloadPopover()}render(){let{profile:e,className:t}=this.props;if(!e||!e.id_verified)return null;let a=(0,i._)("Gameflip Verified"),s=(0,i._)("This profile has been verified by Gameflip.");return n.createElement("a",{tabIndex:"0",role:"button",className:"btn-link"+(t?" "+t:""),"data-toggle":"popover","data-trigger":"focus","data-placement":"top","data-container":"body","data-original-title":a,"data-content":s,"data-html":!0},n.createElement("img",{className:"img-fluid avatar-verified-badge",src:"/img/app/icon_badge_verified.png",alt:"Verified User Badge"}))}}const r=l},4475:(e,t,a)=>{a.r(t),a.d(t,{default:()=>S});var n=a(44431),s=a.n(n),i=a(88601),l=a(67294),r=a(84766),o=a(47675),c=a(46858),m=a(42741),d=a(90135),h=a(94643),p=a(40654),u=a(96637),g=a(21397),_=a(17515),f=a(40872),E=a(24741),v=a(36230),b=a(64927),y=a(38591),x=a(12031),w=a(25315),N=a(10894),C=a(78314),k=a(1055),Z=a(96655);class S extends l.Component{getState(){return{exchange:E.Z.exchange}}constructor(e,t){super(e,t),E.Z.reset(),this.state=this.getState(),this._onChange=this._onChange.bind(this)}componentDidMount(){if(!c.Z.checkLogin(!0))return;_.Z.onChange(this._onChange),E.Z.onChange(this._onChange),f.Z.onChange(this._onChange),_.Z.update();let e=this.props.exchange_id||this.props.match.params.id;this.loadExchange(e),this._startTimer()}componentDidUpdate(e,t){JSON.stringify(this.props)!==JSON.stringify(e)&&this.loadExchange(this.props.exchange_id)}componentWillUnmount(){E.Z.offChange(this._onChange),f.Z.offChange(this._onChange),_.Z.offChange(this._onChange),this._clearTimer()}_onChange(){this.setState(this.getState())}_startTimer(){let e=E.Z.exchange.status,t=e&&e!=Z.WWs?120:10;e!=Z.I2W&&e!=Z.unP&&(r.Log.debug(t,"Starting timer with delay"),this._pollInterval=setInterval((()=>{let e=E.Z.exchange;v.Z.block=!1,this.loadExchange(e.id,(e=>{v.Z.block=!0,this._clearTimer(),this._startTimer()}),(e=>{v.Z.block=!0,this._clearTimer()}))}).bind(this),1e3*t))}_clearTimer(){r.Log.debug("Clearing timer"),this._pollInterval&&(clearInterval(this._pollInterval),this._pollInterval=null)}loadExchange(e,t,a){if(!e)return a?a(""):"";E.Z.fetchExchange(e,(e=>{t&&t(e),c.Z.setDocumentTitle("Order: "+e.name)}),(e=>{r.Log.error(e,"Fetch exchange"),a&&a(e),c.Z.transitionTo("purchases")}))}render(){if(!c.Z.isLoggedIn)return!1;let e=this.state.exchange,t=e.name||"",a=this.props.quickview;return l.createElement("div",{id:"exchange",className:"screen container-lg"},a?"":l.createElement("div",{className:"row"},l.createElement("h1",{className:"col-12 col-md-12"},(0,k._)("Order"),": ",t)),l.createElement("div",{className:"row"},e.category!=Z.QmD?l.createElement("div",{className:"col-12 col-md-6"},l.createElement(D,{quickview:a}),l.createElement(I,{quickview:a})):"",l.createElement("div",{className:"col-12 col-md-6 info-table"},l.createElement(T,{quickview:a}))),l.createElement(M,null))}}class D extends l.Component{constructor(e,t){super(e,t),this.state=this.getState(),this.state.show_item_detail=!1,this._onChange=this._onChange.bind(this)}getState(){return{exchange:E.Z.exchange,item:E.Z.item}}componentDidMount(){E.Z.onChangeItem(this._onChange)}componentWillUnmount(){E.Z.offChangeItem(this._onChange)}_onChange(){this.setState(this.getState())}onListingClick(e){e.preventDefault();var t=this.state;t.show_item_detail=!t.show_item_detail,this.setState(t)}render(){let{exchange:e,item:t}=this.state;if(!t.id)return!1;t.info=[],t.category&&(t.info=c.Z.itemInfo(t));let a="";e.kind==Z.Bxu&&(a=l.createElement("div",{className:"row"},l.createElement("div",{className:"col-7 col-md-7"},l.createElement("label",{className:"gig-label"},e.pkg_name)),l.createElement("div",{className:"col-12"},l.createElement("span",{className:"fa fa-time"}),"  ",l.createElement("span",{className:"text-muted"},1==e.pkg_deliver_within_days?(0,k._)("1 day delivery"):(0,k._)("{day} days delivery",{day:e.pkg_deliver_within_days}))),l.createElement("div",{className:"col-12 gig-tier-description"},e.pkg_description?c.Z.replaceLineBreak(e.pkg_description.trim()):"")));let n=this.props.quickview,s=t.kind==Z.n$X&&t.collectible_item_id||t.id,i=l.createElement(g.Z,{alt:t.name,className:"rounded border img-fluid bg_2d",item:t,dim:320}),o=n?i:l.createElement(r.Link,{to:t.kind||Z.Iox,params:{name:c.Z.slug(t.name),id:s}},i),m=n?e.name:l.createElement(r.Link,{to:t.kind||Z.Iox,params:{name:c.Z.slug(t.name),id:s}},e.name),d=(0,k._)("Show Listing Details"),h=(0,k._)("Hide Listing Details");return l.createElement("div",{className:"exchange-item"},l.createElement("div",{className:"exchange-item-top container-fluid"},l.createElement("div",{className:"row "},l.createElement("div",{className:"col-4 overflow-hidden"},o),l.createElement("div",{className:"col-8"},l.createElement("h3",null,m),l.createElement(P,{quickview:n})))),a?l.createElement("div",{className:"container-fluid inner-content exchange-item-top"},a):"",l.createElement("div",{className:"container-fluid inner-content exchange-item-top"},l.createElement("div",{id:"listing-details-toggle","data-toggle":"collapse","data-target":"#listing-details","aria-expanded":"false","aria-controls":"listing-details",onClick:this.onListingClick.bind(this)},l.createElement("a",{className:"btn-link"},this.state.show_item_detail?h:d),l.createElement("span",{className:"float-right fa "+(this.state.show_item_detail?"fa-chevron-up":"fa-chevron-down"),"aria-hidden":"true"})),l.createElement("div",{className:"collapse",id:"listing-details"},l.createElement(u.Z,{items:t.info}))))}}class I extends l.Component{constructor(e){super(e),this.state={tab:"user"}}selectTab(e){this.setState({tab:e})}render(){let e=E.Z.exchange,t=[Z.rlS,Z.PGQ,Z.Xp3,Z.ggQ,Z.V5K,Z.Zue,Z.c9c,Z.h_V,Z.I2W].indexOf(e.status)>=0&&e.original_status!=Z.WWs,a=[Z.h_V,Z.I2W].indexOf(e.status)>=0,n=this.state.tab||"user",s="support"==n?"support":"",i=e.status==Z.c9c;return t?l.createElement("div",{className:"exchange-item container-fluid inner-content"},l.createElement("p",null," "),l.createElement("ul",{className:"nav nav-tabs"},l.createElement("li",{className:"nav-item"},l.createElement("a",{className:"nav-link "+("user"==n?"active":""),onClick:this.selectTab.bind(this,"user"),role:"tab"},l.createElement("img",{src:"/img/app/icon_conversation.png",className:"menu-icon center-block"}))),i?l.createElement("li",{className:"nav-item"},l.createElement("a",{className:"nav-link "+("support"==n?"active":""),onClick:this.selectTab.bind(this,"support"),role:"tab"},l.createElement("img",{src:"/img/app/icon_support.png",className:"menu-icon center-block"}))):""),l.createElement(p.Z,{exchange_id:e.id,to:"seller",readonly:a,quickview:this.props.quickview,audience:s}),e&&"complete"==e.status?l.createElement(N.Z,null):""):l.createElement("div",null)}}class P extends l.Component{constructor(e,t){super(e,t),this.state=this.getState(),this._onChange=this._onChange.bind(this)}getState(){return{profile:E.Z.profile}}componentDidMount(){E.Z.onChangeProfile(this._onChange)}componentWillUnmount(){E.Z.offChangeProfile(this._onChange)}_onChange(){this.setState(this.getState())}render(){let e=this.state.profile;if(!e.owner)return!1;let t=this.props.quickview,a=l.createElement(d.Z,{profile:e,nolink:t}),n=t?e.display_name:l.createElement("span",null,l.createElement(h.Z,{className:"d-none d-md-inline-block",profile:e}),l.createElement(r.Link,{to:"profile",params:{id:e.owner,name:c.Z.slug(e.display_name)}},e.display_name));return l.createElement("div",{className:"row profile"},l.createElement("div",{className:"col-3 avatar"},a),l.createElement("div",{className:"col-9 info"},l.createElement("div",{className:"row no-gutters"},l.createElement("h5",null,(0,k._)("Sold by")," ",n))))}}class T extends l.Component{constructor(e,t){super(e,t),this.state=this.getState(),this._onChange=this._onChange.bind(this)}getState(){return{vault:E.Z.vault}}componentDidMount(){E.Z.onChangeVault(this._onChange)}componentWillUnmount(){E.Z.offChangeVault(this._onChange)}_onChange(){this.setState(this.getState())}render(){let e=E.Z.exchange;if(!e.id)return!1;let t=e.status,a=!!e.escrow_status,n=(e.kind,Z.Bxu,new Date(e.created)),s=new Date,i=(s.getTime()-n.getTime())/1e3,r={vault:!1,info:!0,tracking:!1,complete:!1,rate:!1,escalate:!1,cancel:!1,notes:!1,dispute:!1,clear_dispute:!1,verify:!1};if(!e.digital||"code"!=e.digital_deliverable||a||t!=Z.Xp3&&t!=Z.V5K&&t!=Z.c9c&&t!=Z.I2W||(r.vault=!0),t==Z.PGQ)e.digital&&(r.notes=!0);else if(t==Z.Xp3||t==Z.V5K)r.dispute=!0,e.digital?(a||"code"!=e.digital_deliverable||this.state.vault)&&(r.complete=!0):(!o.Z.isProduction||i>86400)&&(r.complete=!0);else if(!(e.category==Z.xmu||e.category==Z.QmD||a||e.nft||e.buyer_rated||t!=Z.I2W&&t!=Z.h_V)){let t=e.rate_by?new Date(e.rate_by).getTime():0;r.rate=s.getTime()<t}return e.tracking_code&&e.carrier&&(r.tracking=!0),t==Z.c9c&&(r.clear_dispute=!0),!a&&([Z.WWs,Z.Ev_,Z.lpQ].indexOf(e.status)>=0||e.can_rescind&&e.status!=Z.unP&&e.status!=Z.I2W)&&(r.cancel=!0),e.status==Z.Ev_&&(r.verify=!0),e.status==Z.lpQ&&(r.escalate=!0),l.createElement("div",{className:"exchange-detail"},l.createElement(V,null),r.verify?l.createElement(F,null):"",r.notes?l.createElement(L,null):"",r.vault?l.createElement(O,null):"",r.tracking?l.createElement(W,null):"",r.complete?l.createElement(q,null):"",r.rate?l.createElement(U,null):"",r.clear_dispute?l.createElement(z,null):"",r.info?l.createElement(R,null):"",r.escalate?l.createElement(G,null):"",r.cancel?l.createElement(B,null):"")}}class V extends l.Component{render(){let e=E.Z.exchange,t=e.status==Z.WWs||e.status==Z.rlS||e.status==Z.PGQ?l.createElement("div",{className:"col-md-12 d-none d-md-inline-block"},l.createElement("p",null,(0,k._)("Want to track your transaction on the go? Get the Gameflip mobile app and enable notifications for real-time alerts.")),l.createElement(y.Z,{className:"row container-fluid"})):"",a=e.state.help?l.createElement("a",{className:"btn-link",href:e.state.help,target:"_blank"},l.createElement("span",{className:"fa fa-question-circle","aria-hidden":"true"})):"";return l.createElement("div",{className:"row no-gutters"},l.createElement("div",{className:"col-3 exchange-status-icon"},l.createElement("img",{src:e.state.icon,className:"img-fluid"})),l.createElement("div",{className:"col-9 exchange-status-info"},l.createElement("h3",null,e.state.title," ",a),l.createElement("p",null,e.state.detail)),t)}}class L extends l.Component{constructor(e,t){super(e,t),this.state=this.getState(),this._onChange=this._onChange.bind(this)}getState(){return{escrow:E.Z.escrow}}componentDidMount(){E.Z.onChangeEscrow(this._onChange)}componentWillUnmount(){E.Z.offChangeEscrow(this._onChange)}_onChange(){this.setState(this.getState())}openEscrowDialog(){M.show()}render(){let e=E.Z.exchange,t="",a="",n="",s=this.state.escrow,i=c.Z.gameInfo(e.upc);if(e.digital){let r=e.status,m=e.digital_deliverable;if(e.steam_properties,e.digital_deliver_to){let a=c.Z.deliverToLabels(e.kind==Z.Bxu?e:i),n=e.digital_deliver_to.split("|"),s=0,r=a.map((e=>{let t=s<n.length?n[s]:"";return s++,l.createElement("div",{key:s},l.createElement("span",null,e),l.createElement("pre",{className:"text-center well"},t))}));t=l.createElement("div",{className:"col-12"},l.createElement("p",null,(0,k._)("You provided the seller with this information"),":"),r)}if("code"==m)if(s){let e=(0,k._)("Check the current Steam status");if(r==Z.PGQ){let t=(0,k._)("Retrieve Pending"),i=(0,k._)("Retrieve Your Item");a=(0,k._)("Please retrieve your item from Gameflip Bot to complete your transaction."),n=l.createElement("div",{className:"text-center"},l.createElement("button",{className:"btn btn-primary",onClick:this.openEscrowDialog.bind(this)},s==Z.FKl?t:i),l.createElement("br",null),l.createElement("br",null),l.createElement("p",null,(0,k._)("Having problems to retrieve your item?")," ",l.createElement("a",{href:"https://steamstat.us",target:"_blank"},e)))}else a=(0,k._)("You can retrieve your item from Gameflip Bot later. Please regularly check for updates.")}else if(e.nft){let{transfer_address:t}=e.nft_metadata||e.nft_properties||{};t||(t=""),a=(0,k._)("We will transfer the item to the ETH address below and you will be notified. You can also regularly check for updates."),n=l.createElement("div",{className:"row text-center"},l.createElement("p",null,l.createElement("a",{href:`https://${o.Z.isProduction?"":"goerli."}etherscan.io/address/${t}#tokentxnsErc721`,target:"_blank"},t)))}else a=(0,k._)("Seller will attach the item key or code in Gameflip, and you will be notified. You can also regularly check for updates.");else if("transfer"==m){let e=(0,k._)("Look for incoming trade request in Steam from the Seller."),s=t?"":(0,k._)("Message seller your Gamer ID/Tag and coordinate the transfer of the item you purchased."),r=(0,k._)("Confirm identity."),o=(0,k._)("Verify the item."),c=(0,k._)("Take screenshots or photos.");a=i.steam_app_id?e:s,a+=" "+(0,k._)("For your protection, take the following steps")+":",n=l.createElement("ul",null,i.steam_app_id?"":l.createElement("li",null,l.createElement("b",null,r)," ",(0,k._)("When receiving item in-game, seller may ask you to confirm this Order ID.")),l.createElement("li",null,l.createElement("b",null,o)," ",(0,k._)("Make sure the item is exactly what you purchased before accepting the delivery.")),l.createElement("li",null,l.createElement("b",null,c)," ",(0,k._)("Attach all screenshots to the message with the Seller.")))}}return t||a||n?l.createElement("div",{className:"row no-gutters"},l.createElement("h2",null,(0,k._)("Delivery Notes / Instructions")),t,l.createElement("div",{className:"col-12"},l.createElement("p",null,a),n)):""}}class M extends l.Component{constructor(e,t){super(e,t),this.state=this.getState(),this.offer_id="",this._onChange=this._onChange.bind(this),this.error=null}getState(){return{escrow:E.Z.escrow}}componentDidMount(){E.Z.onChangeEscrow(this._onChange)}componentDidUpdate(){this.error&&(this.error="")}componentWillUnmount(){E.Z.offChangeEscrow(this._onChange)}_onChange(){this.setState(this.getState())}static show(){$("#exchange .escrow-dialog").is(":visible")||$("#exchange .escrow-dialog").modal("show")}static hide(){$("#exchange .escrow-dialog").modal("hide")}setError(e){e&&409==e.code?this.state.escrow==Z.FKl?(c.Z.showErrorDialog((0,k._)("Offer declined or canceled. Please retry.")),E.Z.escrow=Z.X8_):c.Z.showErrorDialog(e.message):(this.error=e.message||(0,k._)("There is an error. Please contact our Customer Support."),this.forceUpdate())}next(){let e=this.state.escrow;e==Z.X8_?E.Z.postEscrowDeliver((e=>{this.offer_id=e.offer_id,E.Z.escrow=Z.FKl}),(e=>{this.setError(e)})):e==Z.FKl&&E.Z.putEscrowDeliver((e=>{e.status==Z.gzR?(M.hide(),E.Z.escrow=Z.gzR):e.status==Z.FKl?c.Z.showInfoDialog((0,k._)("Please complete the Bot Trade and confirm it again.")):(c.Z.showErrorDialog((0,k._)("The bot trade offer has been cancelled. Please retry by starting bot trade again.")),E.Z.escrow=Z.X8_)}),(e=>{this.setError(e)}))}cancel(){M.hide()}render(){let e=this.state.escrow,t=E.Z.exchange,a=(0,k._)("Retrieve item from Bot"),n="",s=(0,k._)("Start Bot Trade"),i=!0,o=!1;e==Z.X8_?n=l.createElement("div",{className:"row text"},(0,k._)("When you click Start, a Gameflip Bot will send you a trade offer in Steam using your Steam Trade URL. The trade offer is automatically cancelled if you do not accept within <b>5 minutes</b>.",{__html:!0}),l.createElement("br",null),l.createElement("br",null),(0,k._)("You must be logged in Steam and have your Steam Guard Mobile ready for trading.")):e==Z.FKl&&(n=l.createElement("div",{className:"row text"},(0,k._)("Please verify that the bot trade offer references the following Order ID"),l.createElement("br",null),l.createElement("br",null),l.createElement("div",{className:"text-center"},l.createElement("b",null,t.id)),l.createElement("br",null),(0,k._)("Once you successfully traded with Gameflip Steam bot, please confirm below.")),s=(0,k._)("I've completed Bot Trade"),i=!1,this.offer_id&&(o=!0)),this.error&&(n=l.createElement("div",{className:"row text"},a," ",(0,k._)("Failed, possibly due to Steam service being unavailable.")," ",l.createElement("a",{href:"https://steamstat.us",target:"_blank"},(0,k._)("Check the current Steam status")),". ",(0,k._)("Please retry by starting bot trade again."),l.createElement("br",null),l.createElement("br",null),l.createElement("div",{className:"alert alert-danger"},this.error),l.createElement("div",{className:"text-muted"},(0,k._)("If you cannot retrieve your item for an extended period of time, this order will automatically cancel, and your payment will be fully returned."))));var c=e==Z.FKl;return l.createElement(r.Dialog,{className:"escrow-dialog fade",title:a,content:l.createElement("div",{className:"container-fluid"},n,l.createElement("div",{className:"row bot-trade-steps"},l.createElement("div",{className:"bg-bar"}),l.createElement("div",{className:"col-4 text-right"},l.createElement("span",{className:"badge done"},c?l.createElement("span",{className:"fa fa-check"}):"1"),l.createElement("br",null),l.createElement("span",{className:"text"},(0,k._)("Start Bot<br/>Trade",{__html:!0}))),l.createElement("div",{className:"col-4 text-center"},l.createElement("span",{className:"badge-steam"},l.createElement("img",{src:"/img/app/steam_icon.png"})),l.createElement("br",null),l.createElement("span",{className:"text"},(0,k._)("Accept Bot Trade Request<br/>in Steam",{__html:!0}))),l.createElement("div",{className:"col-4 text-left"},l.createElement("span",{className:"badge"+(c?" done":"")},"2"),l.createElement("br",null),l.createElement("span",{className:"text"},(0,k._)("Complete<br/>Bot Trade",{__html:!0})))),l.createElement("div",{className:"buttons row text-left"},l.createElement("button",{className:"btn btn-primary",onClick:this.next.bind(this)},s),i?l.createElement("button",{className:"btn btn-outline-secondary",onClick:this.cancel.bind(this)},(0,k._)("Cancel")):"",o?l.createElement("a",{href:"https://steamcommunity.com/tradeoffer/"+this.offer_id+"/",target:"_blank"},(0,k._)("See trade offer")):""))})}}class O extends l.Component{constructor(e,t){super(e,t),this.state=this.getState(),this._onChange=this._onChange.bind(this)}getState(){return{vault:E.Z.vault}}componentDidMount(){E.Z.onChangeVault(this._onChange)}componentWillUnmount(){E.Z.offChangeVault(this._onChange)}_onChange(){this.setState(this.getState())}onChangeVault(e){E.Z.vault=e.target.value}render(){var e=E.Z.exchange,t=this.state.vault;return t?l.createElement("div",{className:"row no-gutters"},l.createElement("h2",{className:"section-title"},(0,k._)("Key or Code")),l.createElement("div",{className:"section-content container-fluid"},l.createElement("br",null),e.status!=Z.I2W?l.createElement("p",{className:"clear-fix text-danger"},(0,k._)("Please verify that the key / code is valid and usable <b>before</b> completing the transaction.",{__html:!0})):"",l.createElement("pre",{className:"text-center vault well"},t),l.createElement("p",{className:"clearfix"},l.createElement("a",{className:"btn-link float-right",href:"https://gameflip.com/static/help/faq.html#activate-digital-code",target:"_blank"},(0,k._)("How do I activate digital code?"))))):l.createElement("div",{className:"row no-gutters"})}}class R extends l.Component{render(){let e=E.Z.exchange,t=(0,k._)("Transaction Details"),a=(0,k._)("Order Details"),n=e.category==Z.QmD,i=e.accept_currency,r=e.bn_price?s()(e.bn_price):e.price,o=e.bn_processing_fee?s()(e.bn_processing_fee):e.processing_fee||0,m="buyer"==e.shipping_paid_by&&e.shipping_fee?e.shipping_fee:0,d=e.bn_discount?s()(e.bn_discount):e.discount||0,h="object"==typeof r?r.plus(o).plus(m).minus(d):r+o-d,p="USD"!=e.charge_currency&&e.charge_amount,g=p?l.createElement(b.Z,{money:e.price,currency:e.charge_currency,rate:e.charge_xrate,leadingText:""}):"",_=p?l.createElement(b.Z,{money:e.processing_fee||0,currency:e.charge_currency,rate:e.charge_xrate,leadingText:""}):"",f=p?l.createElement(b.Z,{money:e.forex_fee||0,currency:e.charge_currency,rate:e.charge_xrate,leadingText:""}):"",v=p?l.createElement(b.Z,{money:h,currency:e.charge_currency,rate:e.charge_xrate,leadingText:""}):"",y=[{header:n?(0,k._)("Transaction ID"):(0,k._)("Order ID"),content:l.createElement("span",{className:"text-warning"},e.id),contentprops:{align:"right",size:8}},{header:(0,k._)("Date"),content:c.Z.timeToDateString(e.created),contentprops:{align:"right",size:8}},{header:n?(0,k._)("Funding Amount"):(0,k._)("Price"),content:l.createElement("div",null,l.createElement(b.Z,{money:e.bn_price||e.price,currency:i})," ",l.createElement("div",{className:"small"},g)),contentprops:{align:"right",size:8}},e.discount?{header:(0,k._)("Discount"),content:l.createElement("span",{className:"text-danger"},l.createElement(b.Z,{money:-1*e.discount,currency:i})),contentprops:{align:"right",size:8}}:"",e.kind!=Z.Iox||e.digital?"":{header:(0,k._)("Shipping"),content:l.createElement(b.Z,{money:m,currency:i}),contentprops:{align:"right",size:8}},{header:(0,k._)("Processing Fee"),content:l.createElement("div",null,l.createElement(b.Z,{money:o,currency:i})," ",l.createElement("div",{className:"small"},_)),contentprops:{align:"right",size:8}},e.forex_fee?{header:(0,k._)("Currency Exchange Fee"),content:l.createElement("div",null,l.createElement(b.Z,{money:e.forex_fee,currency:i})," ",l.createElement("div",{className:"small"},f)),contentprops:{align:"right",size:8}}:"",{header:l.createElement("b",null,n?(0,k._)("Total Paid"):(0,k._)("Order Total")),content:l.createElement("div",null,l.createElement(b.Z,{money:h,currency:i})," ",l.createElement("div",{className:"small"},v)),contentprops:{align:"right",size:8}},e.charge_amount?{header:(0,k._)("Total Charges"),content:l.createElement(b.Z,{money:e.charge_amount,currency:e.charge_currency,rate:1,leadingText:""}),contentprops:{align:"right",size:8}}:""];return l.createElement("div",{className:"row no-gutters"},l.createElement("h2",null,e.category==Z.QmD?t:a),l.createElement(u.Z,{items:y}))}}class W extends l.Component{render(){let e=E.Z.exchange,t=(f.Z.config.shipping||{})[e.carrier.toLowerCase()]+e.tracking_code,a=[{header:e.carrier,content:l.createElement("a",{href:t,target:"_blank"},e.tracking_code)}];return l.createElement("div",{className:"row no-gutters"},l.createElement("h2",null,(0,k._)("Tracking")),l.createElement(u.Z,{items:a}))}}class q extends l.Component{constructor(e,t){super(e,t),this.state={inspected:!1}}onToggleInspected(){this.setState({inspected:!this.state.inspected})}confirmCompletion(){j.show()}completeExchange(){r.Log.debug("Completing exchange"),E.Z.complete()}render(){let{inspected:e}=this.state,t=E.Z.exchange,a=t.digital&&"transfer"==t.digital_deliverable&&t.steam_properties,n=t.kind==Z.Bxu;return l.createElement("div",{className:"row no-gutters"},l.createElement("h2",null,(0,k._)("Review & Complete Transaction")),l.createElement("div",{id:"complete-accordion",className:"container-fluid form-horizontal panel-group"},t.auto_rate_after?l.createElement("p",{className:"mt-3"},(0,k._)("Must complete or hold transaction by"),": ",l.createElement(r.TimeCountDown,{className:"text-danger",datetime:t.auto_rate_after})):"",l.createElement("div",{className:"panel"},l.createElement("div",{id:"complete-toggle"},l.createElement("h3",null,(0,k._)("Complete Transaction")),l.createElement("a",{className:"btn btn-link exchange-btn-toggle","data-toggle":"collapse","data-target":"#complete-container","aria-expanded":"false","aria-controls":"complete-container",style:{whiteSpace:"normal"}},l.createElement("span",{className:"fa fa-chevron-right","aria-hidden":"true"}," "),n?(0,k._)("I've received and verified the gig is working as described"):(0,k._)("I've received and verified the item is working as described"))),l.createElement("div",{id:"complete-container",className:"collapse show","aria-labelledby":"complete-toggle","data-parent":"#complete-accordion"},l.createElement("div",{className:"panel-body"},l.createElement("div",{className:"row no-gutters"},l.createElement("label",{className:"container-fluid pointer"},l.createElement("input",{type:"checkbox",onChange:this.onToggleInspected.bind(this),value:""})," ",(0,k._)("I agree to complete the transaction.")," ",(0,k._)("The seller will receive the funds when the transaction completes.")),l.createElement("div",{className:"h2 text-center"},l.createElement("button",{className:"btn btn-primary"+(e?"":" disabled"),onClick:this.confirmCompletion.bind(this)},(0,k._)("Complete Transaction"))),t.auto_rate_after&&a?l.createElement("p",{className:"text-muted"},(0,k._)("<b>Note:</b> If there is a Steam <a target='_blank' href='https://support.steampowered.com/kb_article.php?ref=8078-TPHC-6195'>trade hold</a> on the Seller, you will need to file a dispute to pause the auto rating.",{__html:!0})):"")),l.createElement(j,{onConfirm:this.completeExchange.bind(this)}))),l.createElement("div",{className:"panel"},l.createElement("div",{id:"dispute-toggle",className:"panel-header"},l.createElement("h3",null,(0,k._)("Hold Transaction and Open Issue")),l.createElement("a",{className:"btn btn-link exchange-btn-toggle","data-toggle":"collapse","data-target":"#dispute-container","aria-expanded":"false","aria-controls":"dispute-container"},l.createElement("span",{className:"fa fa-chevron-right","aria-hidden":"true"}," "),n?(0,k._)("I have not received the gig's service or deliverable, or what I received is not as advertised"):(0,k._)("I have not received the item, or the item I received does not work or not as advertised"))),l.createElement("div",{id:"dispute-container",className:"collapse","aria-labelledby":"dispute-toggle","data-parent":"#complete-accordion"},l.createElement("div",{className:"panel-body"},l.createElement(A,null))))))}}class U extends l.Component{rate(e){E.Z.postRating(e,(()=>{}),(e=>{c.Z.showErrorDialog(e)}))}render(){let e=(0,k._)("My experience with this Seller was");return l.createElement("div",{className:"row no-gutters"},l.createElement("h2",null,(0,k._)("Rate Your Experience")),l.createElement(w.Z,{heading:e,onPostRating:this.rate.bind(this)}))}}class G extends l.Component{holdBuy(){c.Z.showDialog({title:(0,k._)("Request Review"),message:(0,k._)("Please confirm that you want Gameflip to review your purchase. It may take up several business days for Gameflip to complete the review."),ok:{label:(0,k._)("Yes, request for review"),callback:e=>{c.Z.hideDialog(),E.Z.escalateChallengeToHold((()=>{}),(e=>{c.Z.showErrorDialog(e)}))}},cancel:{label:(0,k._)("Go back"),callback:e=>{c.Z.hideDialog()}}})}render(){return l.createElement("div",null,l.createElement("div",{className:"mt-3"},l.createElement("small",{className:"text-danger"},(0,k._)("Can't find the 4-character code for your card? You can request Gameflip to review your purchase. It may take up several business days for Gameflip to complete the review."))),l.createElement("div",{className:"text-center exchange-cancel"},l.createElement("button",{className:"btn btn-outline-secondary btn-sm",onClick:this.holdBuy.bind(this)},(0,k._)("Request Review"))))}}class B extends l.Component{confirmCancel(){let e=E.Z.exchange,t=(0,k._)("Are you sure you want to cancel this order?");e.status==Z.Ev_&&(t=(0,k._)("Canceling the order when it is Under Review will delay subsequent purchases. Are you sure you want to cancel this order?"));let a=this;c.Z.showDialog({title:(0,k._)("Cancel Order"),message:t,ok:{label:(0,k._)("Yes, cancel the order"),callback:e=>{c.Z.hideDialog(),a.cancel()}},cancel:{label:(0,k._)("Go back"),callback:e=>{c.Z.hideDialog()}}})}cancel(){let e=E.Z.cancelStatus;E.Z.cancel(e.status,(e=>{}),(e=>{c.Z.showErrorDialog(e)}))}render(){let e=E.Z.cancelStatus;return l.createElement("div",null,l.createElement("div",{className:"mt-3"},l.createElement("small",{className:"text-danger"},e.description)),l.createElement("div",{className:"text-center exchange-cancel"},l.createElement("button",{className:"btn btn-outline-secondary btn-sm",onClick:this.confirmCancel.bind(this)},(0,k._)("Cancel Order"))))}}class A extends l.Component{constructor(e,t){super(e,t),this.state={reason:"",details:"",submission:"new",attachments:[]},this.valid=!1}componentDidMount(){E.Z.exchange.status==Z.c9c&&this.setState({submission:"sent"})}onError(e){let t=e&&e.message?e.message:"string"==typeof e?e:null,a="";a=t?l.createElement("div",null,l.createElement("p",{className:"text-danger"},t)," ",l.createElement("p",null,(0,k._)("Please try submitting again."))):(0,k._)("We encountered an error. Please try submitting again."),this.setState({submission:"new"}),c.Z.showDialog({title:(0,k._)("An unexpected error has occured"),message:a,ok:{label:(0,k._)("OK"),callback:e=>{c.Z.hideDialog()}}})}onSend(e){let{reason:t,details:a,attachments:n}=this.state,s=(C.Z.profile,E.Z.exchange);this.setState({submission:"sending"});let i=this;E.Z.hold(t,(e=>{i.setState({submission:"sent"});let t={message:a,audience:"support"};m.Z.postExchangeMessage(s.id,t,(e=>{E.Z.fetchExchange(s.id,(()=>{}),(e=>{c.Z.showErrorDialog(e)}))}),(e=>{c.Z.showErrorDialog(e)}))}),(e=>{i.onError(e)}))}onDisputeReason(e){let t=e.target.value;r.Log.debug(t,"Got reason"),this.setState({reason:t})}onDisputeDetails(e){let t=e.target.value;r.Log.debug(t,"Got details"),this.setState({details:t})}onDrop(e){r.Log.debug(e,"onDrop files");let{attachments:t}=this.state;if(t.length>=6)return;let a=-1,n=()=>{if(a++,a>=e.length||a>=6)return;let t=e[a];c.Z.notValidImage(t)||this.uploadAttachment(t,(()=>{n()}))};n()}uploadAttachment(e,t){let a=E.Z.exchange;c.Z.compressImageAny(e.preview,1920,1200,0,!1,(e=>{let n=c.Z.dataURItoBlob(e);m.Z.uploadExchangePhoto(a.id,n,"support",((e,a,n)=>{n.media_id=e,n.view_url=a;let{attachments:s}=this.state;s.push(n),this.setState({attachments:s}),t()}),(e=>{c.Z.showErrorDialog(e),t()}))}))}zoomImage(e,t){$("#message-photo-dialog").length>0&&($("#message-photo-dialog img.photo-dialog-img").attr("src",e),$("#message-photo-dialog").is(":visible")||$("#message-photo-dialog").modal("show"))}deleteAttachment(e,t){let{attachments:a}=this.state;a=a.filter((t=>t.media_id!=e.media_id)),this.setState({attachments:a})}render(){let{reason:e,details:t,submission:a,attachments:n}=this.state,s=E.Z.exchange,r={not_as_described:{digital:null,screens:!0,text:(0,k._)("The item condition is significantly not as what the listing described.")},not_functional:{digital:!1,screens:!0,text:(0,k._)("The item is defective, non-functional or has missing parts.")},not_redeemable:{digital:!0,screens:!0,text:(0,k._)("The item cannot be used or not redeemable.")},item_revoked:{digital:!0,screens:!0,text:(0,k._)("The item was subsequently revoked or taken back after redemption.")},not_received:{digital:null,screens:!1,text:(0,k._)("I haven't received the item.")}},o={not_as_described:{digital:null,screens:!0,text:(0,k._)("The service provided did not match the listing description")},not_received:{digital:null,screens:!0,text:(0,k._)("The service was never delivered")},violate_copyright:{digital:null,screens:!0,text:(0,k._)("The service provided infringes upon copyright or trademarks")},violate_tos:{digital:null,screens:!0,text:(0,k._)("The seller is trying to abuse the Gameflip system")}},m=s.kind==Z.Iox?r:o,d="sent"==a||"sending"==a;this.valid=t&&t.length&&e&&(m[e]&&!m[e].screens||c.Z.notEmpty(n));let h=[];for(let e in m){let t=m[e],a=t.text;(t.digital&&s.digital||!t.digital&&!s.digital||null===t.digital)&&h.push(l.createElement("div",{className:"radio"+(d?" disabled":""),key:e},l.createElement("label",null,l.createElement("input",{type:"radio",name:"dispute",value:e,onChange:this.onDisputeReason.bind(this)}),a)))}let p="";c.Z.notEmpty(n)&&(p=n.map(((e,t)=>l.createElement("div",{className:"col-4",key:t},l.createElement("div",{className:"attachment zoom-photo"},l.createElement("img",{className:"img-fluid img-thumbnail pointer",src:e.view_url,onClick:this.zoomImage.bind(this,e.view_url)}),l.createElement("button",{className:"close",onClick:this.deleteAttachment.bind(this,e)},l.createElement("img",{src:"/img/app/icon_close.gif"})))))));let u=e&&m[e]&&m[e].screens,g="sent"!=a?l.createElement("div",{className:"container-fluid",id:"dispute-details"},l.createElement("img",{className:"mini-icon",src:"/img/app/icon_support.png"}),"  ",l.createElement("b",null,(0,k._)("What is the issue?")),l.createElement("fieldset",{disabled:d},h,l.createElement("div",{className:"form-group",style:{marginTop:"4px"}},l.createElement("textarea",{className:"form-control",placeholder:(0,k._)("Please describe in more details."),rows:"3",value:t,onChange:this.onDisputeDetails.bind(this)})),u?l.createElement("div",{className:"attachments"},l.createElement("small",{className:"text-muted"},(0,k._)("You must submit <b>screenshots or photos</b> showing the errors or issues with the item received. Gameflip requires evidence to review your dispute claim.",{__html:!0})),l.createElement("div",{className:"row"},p,n.length>0?l.createElement("p",{className:"col-12"}," "):"",n.length<6&&u?l.createElement(i.Z,{className:"col-12 dropzone",onDrop:this.onDrop.bind(this),multiple:!0,accept:"image/*"},l.createElement("button",{className:"btn btn-outline-secondary btn-lg center-block"},l.createElement("span",{className:"fa fa-picture"}),"  ",(0,k._)("Attach Screenshot"))):"")):"",l.createElement("div",{className:"row"},l.createElement("span",{className:"col-9"},(0,k._)("Please review <a target='_blank' href='https://gameflip.zendesk.com/hc/en-us/articles/115000885633'>how to open a dispute</a> with your order for faster resolution.",{__html:!0})),l.createElement("div",{className:"col-3"},l.createElement("span",{className:"float-right"},l.createElement("button",{className:"btn btn-primary"+(this.valid?"":" disabled"),onClick:this.valid?this.onSend.bind(this):null},(0,k._)("Submit"))))))):"";return l.createElement("div",{className:"row no-gutters"},g,"sent"==a?l.createElement("p",null,(0,k._)("You have submitted an issue and the order has been placed on hold. Our customer support will be reaching out to you"),"."):"")}}class z extends l.Component{constructor(e,t){super(e,t),this.state={sellerMustRespondExpired:!1,buyerMustEscalateExpired:!1}}escalate(e){this.escalated||(this.escalated=!0,E.Z.escalate((()=>{}),(e=>{c.Z.showErrorDialog(e),this.escalated=!1,this.forceUpdate()})))}sellerMustRespondExpire(){this.setState({sellerMustRespondExpired:!0})}buyerMustEscalateExpire(){this.setState({buyerMustEscalateExpired:!0})}confirmCompletion(){j.show()}completeExchange(){r.Log.debug("Completing exchange after disputed"),E.Z.clearHold((()=>{E.Z.complete()}),(e=>{c.Z.showErrorDialog(e)}))}render(){let e=this.escalated?"":" disabled",t=E.Z.exchange,a=t.hold_dispute_auto_rescind_after,n=t.hold_dispute_auto_accept_after,s=t.hold_dispute_ticket_id,i=a&&!n,o=n&&!s&&!this.escalated,c=new Date,m=this.state.sellerMustRespondExpired||i&&c>new Date(a),d=this.state.buyerMustEscalateExpired||o&&c>new Date(n);return m||d?l.createElement("div",{className:"row no-gutters"},l.createElement("div",{className:"col"},l.createElement("h2",null,(0,k._)("Issue Resolution")),m?l.createElement("p",null,(0,k._)("Since the seller did not communicate with you nor respond to the dispute, the dispute has been closed in your favor.")):"",d?l.createElement("p",null,(0,k._)("Because you did not escalate the issue further, we conclude that your issue has been resolved.")):"",l.createElement("p",null,(0,k._)("Please wait while the resolution is being processed.")))):l.createElement("div",{className:"row no-gutters"},l.createElement("div",{className:"col"},l.createElement("h2",null,(0,k._)("Issue Resolution")),i?l.createElement("p",null,(0,k._)("Seller must respond within"),": ",l.createElement(r.TimeCountDown,{className:"text-danger",datetime:t.hold_dispute_auto_rescind_after,onZero:this.sellerMustRespondExpire.bind(this)})):"",o?l.createElement("p",null,(0,k._)("Must close or escalate issue within"),": ",l.createElement(r.TimeCountDown,{className:"text-danger",datetime:t.hold_dispute_auto_accept_after,onZero:this.buyerMustEscalateExpire.bind(this)})):"",s?l.createElement("p",{className:"text-danger"},(0,k._)("You have escalated the dispute to Dispute Support. Additional evidence may be requested from you to resolve the issue.")):"",l.createElement("div",{id:"resolve-accordion",className:"mb-2 container-fluid form-horizontal panel-group"},l.createElement("div",{className:"panel"},l.createElement("div",{id:"resolve-toggle"},l.createElement("h3",null,(0,k._)("Clear Hold & Complete Transaction")),l.createElement("a",{className:"btn btn-link exchange-btn-toggle","data-toggle":"collapse","data-target":"#complete-container","aria-expanded":"false","aria-controls":"complete-container",style:{whiteSpace:"normal"}},l.createElement("span",{className:"fa fa-chevron-right","aria-hidden":"true"}," "),(0,k._)("I've resolved the issue with the seller and agree to complete the transaction."))),l.createElement("div",{id:"complete-container",className:"collapse","aria-labelledby":"resolve-toggle","data-parent":"#resolve-accordion"},l.createElement("div",{className:"row no-gutters"},l.createElement("div",{className:"text-center"},l.createElement("button",{className:"btn btn-primary",onClick:this.confirmCompletion.bind(this)},(0,k._)("Complete Transaction")))),l.createElement(j,{onConfirm:this.completeExchange.bind(this)}))),o?l.createElement("div",{className:"panel"},l.createElement("div",{id:"escalate-toggle",className:"panel-header"},l.createElement("h3",null,(0,k._)("Escalate Issue to Gameflip")),l.createElement("a",{className:"btn btn-link exchange-btn-toggle","data-toggle":"collapse","data-target":"#escalate-container","aria-expanded":"false","aria-controls":"escalate-container"},l.createElement("span",{className:"fa fa-chevron-right","aria-hidden":"true"}," "),(0,k._)("The issue is not resolved, and I need Gameflip to review and decide the dispute."))),l.createElement("div",{id:"escalate-container",className:"collapse","aria-labelledby":"escalate-toggle","data-parent":"#resolve-accordion"},l.createElement("div",{className:"panel-body"},l.createElement("b",null,(0,k._)("Escalate Issue")),l.createElement("p",null,(0,k._)("I have submitted evidence necessary for Gameflip to review the issue with the item I purchased.")),l.createElement("p",null,(0,k._)("I agree and accept that Gameflip will decide the dispute outcome after reviewing all evidence submitted to Gameflip by both seller and buyer.")),l.createElement("div",{className:"text-center"},l.createElement("button",{className:"btn btn-danger"+(e?"":" disabled"),onClick:e?this.escalate.bind(this):null},(0,k._)("Escalate Issue")))))):""),o?l.createElement("p",{className:"text-danger"},(0,k._)("Failure to close or escalate the issue will result in automatic completion of the transaction.")):""))}}class F extends l.Component{constructor(e,t){super(e,t),this.state={open:!1}}onOpen(){this.setState({open:!0})}render(){let{open:e}=this.state,t=(0,k._)("Further information about you and your payment are required for Gameflip to review this transaction. If you have already submitted document, check back frequently for an updated status."),a=(0,k._)("Please submit the following required documents for us to review the purchase. If you have already submitted them, check back frequently for an updated status."),n=E.Z.exchange,s=[];n.hold_buy_verify_doc&&n.hold_buy_verify_doc.map((e=>{"payment_source"==e?s.push((0,k._)("Payment")):"identity"==e?s.push((0,k._)("Identity")):"phone_number"==e&&s.push((0,k._)("Phone"))}));let i=l.createElement("div",null,n.hold_buy_verify_ticket_id?a:t,s.length>0?l.createElement("p",{className:"ml-3 mt-3"},l.createElement("span",{className:"font-weight-bold"},(0,k._)("Required documents for this review")),": ",l.createElement("span",{className:"text-primary"},s.join(", "))):"");return l.createElement("div",{className:"row no-gutters"},l.createElement("h2",null,(0,k._)("Document Verification")),l.createElement("div",{className:"col-12"},e?"":i,e?"":l.createElement("div",{className:"text-center"},l.createElement("button",{className:"btn btn-primary",onClick:this.onOpen.bind(this)},(0,k._)("Open"))),e?l.createElement(x.Z,{intro:i}):""))}}class j extends l.Component{static show(){$("#exchange .complete-dialog").is(":visible")||$("#exchange .complete-dialog").modal("show")}static hide(){$("#exchange .complete-dialog").modal("hide")}constructor(e,t){super(e,t);let a=C.Z.profile.buy||0;this.state={acknowledged:!1,require_acknowledge:a<5}}onConfirm(){this.canRate()&&(this.props.onConfirm&&this.props.onConfirm(),j.hide())}onCancel(){j.hide()}toggleAcknowledge(e){this.setState({acknowledged:e.target.checked})}canRate(){let{acknowledged:e,require_acknowledge:t}=this.state;return e||!t}render(){let{acknowledged:e,require_acknowledge:t}=this.state,a=this.canRate();return l.createElement(r.Dialog,{className:"complete-dialog fade",title:(0,k._)("All Sales Are Final!"),content:l.createElement("div",{className:"container-fluid"},l.createElement("div",{className:"form-group"},(0,k._)("You confirm that you accept this item and would like to complete the transaction.")," ",l.createElement("span",{className:"text-danger"},(0,k._)("Refunds are NOT available after completing transaction."))),t?l.createElement("div",{className:"well"},l.createElement("label",null,l.createElement("input",{type:"checkbox",name:"digital-check",onClick:this.toggleAcknowledge.bind(this)})," ",(0,k._)("I understand that I am completing the transaction, and I will no longer able to request a refund or cancel this transaction."))):"",l.createElement("div",{className:"buttons text-left"},l.createElement("button",{className:"btn btn-primary"+(a?"":" disabled"),onClick:this.onConfirm.bind(this)},(0,k._)("Confirm")),l.createElement("button",{className:"btn btn-outline-secondary",onClick:this.onCancel.bind(this)},(0,k._)("Cancel"))))})}}},24741:(e,t,a)=>{a.d(t,{Z:()=>u});var n=a(84766),s=(a(67294),a(46858)),i=a(42741),l=(a(17515),a(78314)),r=a(1055),o=a(96655);const c="change_item",m="change_profile",d="change_vault",h="change_escrow";class p extends n.EventHandler{constructor(){super(),this.reset()}reset(){this._exchange={},this._item={},this._profile={},this._vault="",this._escrow=""}emitChangeItem(){this.emit(c)}onChangeItem(e){this.on(c,e)}offChangeItem(e){this.off(c,e)}emitChangeProfile(){this.emit(m)}onChangeProfile(e){this.on(m,e)}offChangeProfile(e){this.off(m,e)}emitChangeVault(){this.emit(d)}onChangeVault(e){this.on(d,e)}offChangeVault(e){this.off(d,e)}emitChangeEscrow(){this.emit(h)}onChangeEscrow(e){this.on(h,e)}offChangeEscrow(e){this.off(h,e)}fetchExchange(e,t,a){this.reset(),i.Z.getExchange(e,(e=>{if(l.Z.profile.owner!=e.buyer)return this.reset(),void a("Access disallowed.");this._exchange=e,n.Log.debug(this._exchange,"exchange"),this.processData(),this.emitChange(),this._item.id=e.listing_id,this._item.name=e.name,this.emitChangeItem(),this.fetchItem(),this.fetchProfile(),e.digital&&e.status!=o.WWs&&"code"==e.digital_deliverable&&!e.escrow_status&&this.fetchVault(),e.digital&&e.escrow_status&&(this._escrow=e.escrow_status,this.emitChangeEscrow(),this.emitChange()),t(this._exchange)}),(e=>{a(e)}))}fetchItem(){this._exchange.listing_id&&i.Z.getListing(this._exchange.listing_id,(e=>{n.Log.debug(e,"item"),this._item=e,this.emitChangeItem(),e.upc&&i.Z.getProduct(e.upc,(e=>{this._item.product=e,this.emitChangeItem()}),(()=>{}))}),(e=>{}))}fetchProfile(){this._exchange.seller&&i.Z.getProfile(this._exchange.seller,(e=>{n.Log.debug(e,"profile"),this._profile=e,this.emitChangeProfile()}),(e=>{}))}fetchVault(){i.Z.getDigitalVault(this._exchange.listing_id,(e=>{n.Log.debug(e,"vault"),this._vault=e,this.emitChangeVault(),this.emitChange()}),(e=>{}))}processData(){let e=this._exchange;if(!e.id)return;let t=e.status;this._exchange.original_status=t,n.Log.debug(t,"exchange.original_status"),o.rlS==t?t=e.handling_status==o.jJH?o.Xp3:o.PGQ:(o.h_V==t||o.V5K==t&&e.buyer_rated)&&(t=o.I2W),o.VxZ!=t&&o.s5d!=t&&o.nmn!=t||(t=o.unP),e.hold_status&&(t=e.hold_status),n.Log.debug(t,"processed status"),this._exchange.status=t,this.updateState()}get exchangeStates(){return{pending:{icon:"/img/app/icon_exchange_processing.png",title:(0,r._)("Order confirmed"),detail:(0,r._)("Your order has been sent, and we are processing your payment. Please check back shortly for an update.")},shipping:{icon:"/img/app/icon_exchange_truck.png",title:(0,r._)("Waiting for Seller to ship"),detail:(0,r._)("We will notify you when the Seller sends your item.")},shipped:{icon:"/img/app/icon_exchange_rate.png",title:(0,r._)("Item has been sent"),detail:(0,r._)("Once you’ve received and inspected your item, please complete the transaction.")},received:{icon:"/img/app/icon_exchange_rate.png",title:(0,r._)("Item has been delivered"),detail:(0,r._)("Once you’ve received and inspected your item, please complete the transaction.")},complete:{icon:"/img/app/icon_exchange_check.png",title:(0,r._)("Transaction is Complete!"),detail:(0,r._)("Thank you for your purchase and support of Gameflip.")},cancelled:{icon:"/img/app/icon_exchange_trash.png",title:(0,r._)("Order has been cancelled"),detail:(0,r._)("A full refund has been credited to your account")},hold_buy:{icon:"/img/app/icon_exchange_processing.png",title:(0,r._)("Under Review"),detail:(0,r._)("Your order was placed on hold for our system to review your payment information. Please check back your order at a later time. If further information is required, our support team will reach out to you."),help:"https://gameflip.com/static/help/faq.html#under-review"},hold_challenge:{icon:"/img/app/icon_exchange_processing.png",title:(0,r._)("Payment verification required"),detail:(0,r._)("We sent you a notification with the instruction to verify your payment. Once the payment is successfully verified, this order will be processed."),help:"https://gameflip.com/static/help/faq.html#payment-code"},hold_dispute:{icon:"/img/app/icon_exchange_processing.png",title:(0,r._)("Under Dispute"),detail:(0,r._)("You've opened a dispute and placed this transaction on hold. Please communicate with the seller to resolve the issue."),help:"https://gameflip.com/static/help/faq.html#on-hold"}}}updateState(){let{kind:e,status:t,category:a,digital:n,digital_deliverable:i,escrow_status:l,nft:c}=this._exchange,m=s.Z.clone(this.exchangeStates);e==o.Bxu?(m.shipping={icon:"/img/app/icon_exchange_digital_transfer.png",title:(0,r._)("Wait for Delivery"),detail:(0,r._)("Seller will contact you to arrange the delivery.")},m.shipped={icon:"/img/app/icon_exchange_rate.png",title:(0,r._)("Gig has been delivered"),detail:(0,r._)("Once you’ve accepted the gig, please complete the transaction.")}):a==o.QmD?(m.pending={icon:"/img/app/icon_exchange_processing.png",title:(0,r._)("Transaction initiated"),detail:(0,r._)("We are processing your payment. Please check back shortly for an update.")},m.complete={icon:"/img/app/icon_exchange_check.png",title:(0,r._)("Transaction is Complete!"),detail:(0,r._)("Funds were added to your wallet.")},m.cancelled={icon:"/img/app/icon_exchange_trash.png",title:(0,r._)("Transaction has been cancelled"),detail:(0,r._)("A full refund has been credited to your account.")},m.hold_buy={icon:"/img/app/icon_exchange_processing.png",title:(0,r._)("Under Review"),detail:(0,r._)("This transaction was placed on hold for our system to review your payment information. Please check back at a later time. If further information is required, our support team will reach out to you."),help:"https://gameflip.com/static/help/faq.html#under-review"}):m.shipping=n?"code"==i?l?{icon:"/img/app/icon_exchange_bot_trade.png",title:(0,r._)("Retrieve Your Item"),detail:(0,r._)("Follow the steps below to complete the delivery of your item.")}:c?{icon:"/img/app/icon_exchange_bot_trade.png",title:(0,r._)("Wait for Delivery"),detail:(0,r._)("We will transfer the item to the ETH address you provided.")}:{icon:"/img/app/icon_exchange_digital_key.png",title:(0,r._)("Wait for Delivery"),detail:(0,r._)("Seller will contact you to arrange the delivery.")}:{icon:"/img/app/icon_exchange_digital_transfer.png",title:(0,r._)("Wait for Delivery"),detail:(0,r._)("Seller will contact you to arrange the delivery.")}:{icon:"/img/app/icon_exchange_truck.png",title:(0,r._)("Waiting for Seller to ship"),detail:(0,r._)("We will notify you when the Seller sends your item.")},t!=o.c9c||!this._exchange.hold_dispute_ticket_id&&this._exchange.hold_dispute_reason_code||(m.hold_dispute={icon:"/img/app/icon_exchange_processing.png",title:(0,r._)("Under Dispute Review"),detail:(0,r._)("You've escalated the issue to Gameflip to decide the dispute based on the evidence submitted."),help:"https://gameflip.com/static/help/faq.html#on-hold"}),this._exchange.state=m[t]||m[o.WWs]}get exchange(){return this._exchange}get item(){return this._item}get profile(){return this._profile}get vault(){return this._vault}set vault(e){n.Log.debug(e,"vault set"),this._vault=e,this.emitChangeVault()}postRating(e,t,a){e.exchange_id=this._exchange.id,i.Z.postRating(e,(e=>{this.fetchExchange(e.exchange_id,t,a)}),(e=>{a(e)}))}get cancelStatus(){return this._exchange.can_rescind?{status:o.VxZ,description:(0,r._)("Because the Seller has not shipped the item within the specified timeframe, you can choose to cancel the order and receive a full refund")}:this._exchange.status==o.Ev_||this._exchange.status==o.lpQ?{status:o.unP,description:(0,r._)("You may cancel the transaction while your order is under review. However, by doing so, you may face longer wait time on the next order.")}:this._exchange.status==o.WWs?{status:o.unP,description:(0,r._)("You may cancel the transaction while the order is being processed. However, by doing so, your next purchase may face longer delay.")}:""}cancel(e,t,a){let n=[{op:"replace",path:"/status",value:e}];i.Z.patchExchange(this._exchange.id,n,(e=>{t(),this._exchange.original_status=o.unP,this._exchange.status=o.unP,this.updateState(),this.emitChange()}),(e=>{a(e)}))}complete(e,t){let a=[{op:"replace",path:"/status",value:o.I2W}];i.Z.patchExchange(this._exchange.id,a,(t=>{e&&e(),this._exchange=t,this.processData(),this.emitChange()}),t)}hold(e,t,a){let n={reason_code:e||o.N1l,hold_status:o.c9c};i.Z.putExchangeHold(this._exchange.id,n,(e=>{t(),this._exchange=e,this.updateState(),this.processData(),this.emitChange()}),(e=>{a(e)}))}clearHold(e,t){i.Z.deleteExchangeHold(this._exchange.id,(t=>{e(),delete this._exchange.hold_status,this._exchange.status=t.status,this.updateState(),this.processData(),this.emitChange()}),(e=>{t(e)}))}escalate(e,t){i.Z.putExchangeEscalate(this._exchange.id,(t=>{e(),this._exchange=t,this.updateState(),this.processData(),this.emitChange()}),(e=>{t(e)}))}escalateChallengeToHold(e,t){let a={hold_status:o.Ev_};i.Z.putExchangeHold(this._exchange.id,a,(t=>{e(),this._exchange=t,this.updateState(),this.processData(),this.emitChange()}),(e=>{t(e)}))}get escrow(){return this._escrow}set escrow(e){this._escrow=e,this.emitChangeEscrow(),this.emitChange()}postEscrowDeliver(e,t){let a=l.Z.steam_trade_url;a?i.Z.postSteamEscrowDeliver(this._exchange.id,a,(t=>{n.Log.debug(t,"postSteamEscrowDeliver"),e(t)}),(e=>{t(e)})):t({message:"Steam Trade URL not found. Please enter it in the Settings page under Steam Connect."})}putEscrowDeliver(e,t){i.Z.putSteamEscrowDeliver(this._exchange.id,(t=>{n.Log.debug(t,"putSteamEscrowDeliver"),t.status==o.gzR&&(this._exchange.original_status=o.I2W,this._exchange.status=o.I2W,this.updateState(),this.emitChange()),e(t)}),(e=>{t(e)}))}}const u=new p},4942:(e,t,a)=>{function n(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}a.d(t,{Z:()=>n})}}]);