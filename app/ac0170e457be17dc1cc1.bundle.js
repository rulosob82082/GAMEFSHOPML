"use strict";(self.webpackChunkgameflip_market=self.webpackChunkgameflip_market||[]).push([[425],{96637:(e,t,a)=>{a.d(t,{Z:()=>n});var i=a(67294),r=a(46858);class s extends i.Component{render(){let e=void 0===this.props.use_div||this.props.use_div,t=this.props.items.map(((t,a)=>t?i.createElement(o,{key:a,item:t,use_div:e}):"")),a=(e?"container-fluid info-table border ":"table table-bordered info-table ")+(this.props.className||"");return e?i.createElement("div",{className:a},t):i.createElement("table",{className:a},i.createElement("tbody",null,t))}}class o extends i.Component{componentDidMount(){if(r.Z.isBrowser){let e=$('[data-toggle="popover"]');e.length>0&&e.popover()}}render(){let{item:e,use_div:t}=this.props,a="";if(e.headerprops){switch(e.headerprops.transform){case"lowercase":a+=" text-lowercase";break;case"uppercase":a+=" text-uppercase";break;case"capitalize":a+=" text-capitalize"}switch(e.headerprops.align){case"left":a+=" text-left";break;case"right":a+=" text-right"}}let r="";if(e.contentprops){switch(e.contentprops.transform){case"lowercase":r+=" text-lowercase";break;case"uppercase":r+=" text-uppercase";break;case"capitalize":r+=" text-capitalize"}switch(e.contentprops.align){case"left":r+=" text-left";break;case"right":r+=" text-right"}}e.contentprops&&e.contentprops.size&&!isNaN(e.contentprops.size)&&e.contentprops.size<12&&e.contentprops.size>0?(a+=" col-md-"+(12-e.contentprops.size),r+=" col-md-"+e.contentprops.size):(a+=" col-md-5",r+=" col-md-7");let s=[];if(e.contentprops&&e.contentprops.icon){let t={maxHeight:"2em"};(Array.isArray(e.contentprops.icon)?e.contentprops.icon:[e.contentprops.icon]).map(((a,r)=>{s.push(i.createElement("img",{key:r,style:t,src:e.contentprops.icon}))}))}return t?i.createElement("div",{className:"row "+(e.className||"")},i.createElement("div",{className:"col-6 font-weight-bold"+a},e.header),i.createElement("div",{className:"col-6"+r},e.content," ",s.length>0?s:"")):i.createElement("tr",null,i.createElement("th",{className:"col-6"+a},e.header),i.createElement("td",{className:"col-6"+r},e.content," ",s))}}const n=s},8822:(e,t,a)=>{a.r(t),a.d(t,{default:()=>v});var i=a(67294),r=a(97762),s=a.n(r),o=a(47675),n=a(84766),l=a(42741),c=a(58166),p=a(35255),d=a(46858),m=a(58790),u=a(80324),g=(a(80747),a(50238),a(17515)),h=a(78314),f=(a(40872),a(33583)),_=a(1055);const Z=new class{constructor(){this.reset()}reset(){this._upcInfo=[]}get _cacheExpire(){return 24*((new Date).getTime()+36e5)}_setCache(e,t){this.clearExpired();let a=Object.keys(this._upcInfo);if(a.length>1e3){let e=Math.ceil(100);for(let t=0;t<e;t++){let e=a[t];n.Log.debug(e,"Overflow cache, deleting upc entries"),delete this._upcInfo[e]}}let i={item:t,expire:this._cacheExpire};this._upcInfo[e]=i}_getCache(e){let t=this._upcInfo[e]||null,a=(new Date).getTime();return t&&t.expire<a?(delete this._upcInfo[e],null):t?t.item:null}clearExpired(){n.Log.debug("Clearing expired upc info");let e=(new Date).getTime();for(let t in this._upcInfo){let a=this._upcInfo[t];a&&a.expire<e&&(n.Log.debug(a,"Delete expired upc info"),delete this._upcInfo[t])}}getProductInfoByUPC(e,t){let a=this._getCache(e);a?t(a):l.Z.getProduct(e,(a=>{n.Log.debug(a,"product"),this._setCache(e,a),t(a)}),(e=>{t(null)}))}};var k=a(16778),w=a(82479),b=a(21397),x=a(96655);class v extends i.Component{constructor(e,t){super(e,t);let a=d.Z.contextData(e);this.state={loaded:!1,item:a.item||{id:""},htmlHeaders:a.htmlHeaders||null,expand:!1},this._onChangeUser=this._onChangeUser.bind(this)}static fetchData(e,t){let a={id:e.id||e.name};e.offer&&(a.offer=e.offer),l.Z.getListing(a,(a=>{if(e.offer&&a.pkg_custom&&(a.pkg_custom.offer=e.offer),d.Z.isBrowser)return t(null,a);l.Z.getProfile(a.owner,(e=>{a.seller_profile=e,t(null,a)}),(e=>{t(e)})),a.upc&&Z.getProductInfoByUPC(a.upc,(e=>{a.product=e}))}),(e=>{t(e)}))}static propData(){return"item"}componentDidMount(){g.Z.update(),h.Z.onChange(this._onChangeUser);let e=d.Z.initProps("item");if(e)this.setState({item:e,loaded:!0}),e.upc&&this.lookup(e.upc),e.status==x.IB&&(e.steam_properties&&this.loadSteamPrice(e.steam_properties),p.ZP.track(p.dv,e)),f.Z.saveViewedListing(e);else{let e=this.props.match.params;this.loadListing(e)}}componentDidUpdate(e,t){let a=this.props.match?this.props.match.params:{},i=e.match?e.match.params:{};(a.id||a.name)!=(i.id||i.name)&&this.loadListing(a)}componentWillUnmount(){h.Z.offChange(this._onChangeUser)}_onChangeUser(){this.setState({item:this.state.item})}loadListing(e){let t=e.id||e.name,a=k.Z.getItem(t,(new Date).getTime()+3e5);a&&this.setState({item:a,loaded:!0}),v.fetchData(e,((t,a)=>{if(a){this.setState({item:a,loaded:!0}),a.upc&&!a.product&&this.lookup(a.upc),a.status==x.IB&&(a.steam_properties&&this.loadSteamPrice(a.steam_properties),p.ZP.track(p.dv,a)),f.Z.saveViewedListing(a);let e=this.headerMetas(a);d.Z.setDocumentTitle(e.title)}else{this.setState({item:{},loaded:!0});let t=void 0!==e.id?e.id:e.name;f.Z.removeViewedListing(t)}}))}lookup(e){Z.getProductInfoByUPC(e,(e=>{n.Log.debug(e,"product");let t=this.state.item;t&&(t.product=e,this.setState({item:t}))}))}loadSteamPrice(e){let t=e.appid,a=e.market_hash_name||e.name;t&&a&&c.Z.getSteamPrice(t,a,(e=>{let t=this.state.item;t.steam_lowest_price=e.lowest_price,t.steam_median_price=e.median_price,this.setState({item:t})}),(e=>{}))}expandDescription(){this.setState({expand:!0})}onClickAction(e,t,a){if(n.Log.debug(e,"Action"),!d.Z.checkVerified())return;let i=this.props.item||this.state.item;switch(e){case"buy":if(i.category==x.SkU&&d.Z.gameInfo(i.upc).steam_app_id&&!d.Z.checkSteamConnect())return;n.Log.debug(t,"Action tier");let e={id:i.id};t&&(e.tier=t),a&&(e.offer=a),d.Z.transitionTo("checkout",e);break;case"edit":h.Z.isLoggedIn&&h.Z.profile.owner==i.owner&&d.Z.transitionTo("sell",{id:i.id,topic:i.kind});break;case"report":w.Z.show("report-inappropriate-dialog")}}headerMetas(e){let t=s().renderToString(i.createElement(b.Z,{item:e,urlOnly:!0})),a=d.Z.stripHtml(e.description),r=d.Z.categoryName(e.category,e.upc),l=d.Z.platformName(e.category,e.platform),c=e.condition?" ("+d.Z.conditionText(e.condition)+")":"",p="",m=o.Z.config.server_url+"/item/"+d.Z.slug(e.name)+"/"+e.id;if(e.category==x.SkU){let t="";"094922417596"==e.upc?t="CS:GO":"014633098693"==e.upc?t="Team Fortress 2":"111111111111"==e.upc?t="Dota 2":"000000252490"==e.upc?t="Rust":"000000578080"==e.upc&&(t="PlayerUnknown's Battlegrounds"),p=e.name+" - "+t+" "+r}else if(e.category==x.gav){let t=e.genre&&e.genre.length>0?d.Z.capitalize(e.genre[0])+":":"";p=e.name+" - "+t+" "+r}else p=e.name+" - "+l+" "+r+c;let u={title:p,description:a,image:t,type:"product",url:m};if(d.Z.isEmpty(e.seller_profile))return u;let g=e.seller_profile;n.Log.debug(g,"Seller profile");let h={"@type":"Product","@context":"http://schema.org",url:m,name:d.Z.stripHtml(e.name),image:t,description:a,brand:g.display_name,category:r,logo:d.Z.avatarUrl(g.avatar),offers:{"@type":"AggregateOffer",priceCurrency:"USD",lowPrice:parseFloat(e.price/100).toFixed(2),highPrice:parseFloat(e.price/100).toFixed(2)}},f=g.rating_good?parseFloat(g.rating_good):0,_=f+(g.rating_neutral?parseFloat(g.rating_neutral):0)+(g.rating_poor?parseFloat(g.rating_poor):0),Z=f?(5*f/_).toFixed(4):0;return _>=15&&(h.aggregateRating={"@type":"AggregateRating",ratingValue:Z,ratingCount:_,reviewCount:_}),u.rich_card=h,u}render(){let{item:e,htmlHeaders:t,loaded:a}=this.state,r=h.Z.isLoggedIn&&h.Z.profile.owner==e.owner;e&&e.id||(e={}),e.platform;let s="";if(e.status==x.IB||e.status==x.A9h||e.status==x.ev0||e.status==x.f1I&&r)t&&t(this.headerMetas(e)),e.upc==x.mDG&&"received"==e.escrow_status&&(e.status=x.ev0),s=i.createElement(u.Z,{listing:e,onClickAction:this.onClickAction.bind(this)});else if(a&&!e.id){let t="";e&&e.name?t=i.createElement(m.Z,{item:e,title:(0,_._)("You may also like"),size:16,per:6,status:"onsale"}):name&&(t=i.createElement(m.Z,{term:name,title:(0,_._)("You may also like"),size:16,per:6,status:"onsale"})),s=i.createElement("div",{className:"row"},i.createElement("h1",{className:"col-12"},(0,_._)("Not Found")),i.createElement("p",{className:"col-12 pt-3"},(0,_._)("Item not found or is no longer available!")),t)}return i.createElement("div",{id:"item",className:"screen container-lg"},s,e.id?i.createElement(w.Z,{id:"report-inappropriate-dialog",extras:"Listing ID: "+e.id,type:"report",title:(0,_._)("Report Inappropriate or Violation")}):"")}}}}]);