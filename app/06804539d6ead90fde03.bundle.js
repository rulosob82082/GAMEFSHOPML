"use strict";(self.webpackChunkgameflip_market=self.webpackChunkgameflip_market||[]).push([[5369],{98004:(e,t,a)=>{a.d(t,{Z:()=>s});var i=a(67294),l=a(84766),n=a(96655);class s extends i.Component{constructor(e,t){super(e,t),this.ref=i.createRef()}get data(){let{options:e,value:t,placeholder:a}=this.props,i=[];Array.isArray(t)?t.map(((e,t)=>{i[e.value]=e.value})):"string"==typeof t&&(i[t]=t);let l=[];return l.push({placeholder:!0,text:a}),e.map(((e,t)=>{l.push({value:e.value,text:e.label||e.text,selected:!!i[e.value]})})),l}onChange(e){let{options:t,value:a}=this.props;if(this.props.onChange){let e=this.select.selected(),a=e=>{let a=null;return t.map(((t,i)=>{t.value==e&&(a=Object.assign({},t),a.text=t.label||t.text)})),a};if(Array.isArray(e)){let t=[];e.map(((e,i)=>{let l=a(e);l&&t.push(l)})),this.props.onChange(t)}else{let t=a(e);this.props.onChange(t)}}}componentDidMount(){l.ScriptLoader.load(this,n._8D),l.ScriptLoader.load(this,n._Yb,{htmlElem:"link"})}componentWillUnmount(){this.select&&(this.select.destroy(),delete this.select)}onScriptLoaded(e){e==n._8D&&this.createSlimSelect()}onScriptError(e){l.Log.error("Script loading error: "+e)}createSlimSelect(){if(this.select)return;let{placeholder:e,isMulti:t,limit:a}=this.props;this.select=new SlimSelect({data:this.data,select:this.ref.current,onChange:this.onChange.bind(this),placeholder:e||"",css:"background-color: #999",limit:t?a||5:1,hideSelectedOption:!0})}componentDidUpdate(e){let t=this.props.value;t&&this.valuesEqual(t,e.value)&&this.select&&this.select.setData(this.data)}valuesEqual(e,t){if(Array.isArray(e)&&Array.isArray(t)){let a=e.length==t.length;for(let i=0;a&&i<e.length;i++)a=a&&e[i].value==t[i];return a}return e===t}render(){let{className:e,options:t,value:a,placeholder:l,isMulti:n}=this.props;return this.select&&this.select.setData(this.data),i.createElement("select",{ref:this.ref,className:e||"",multiple:n||!1})}}},36839:(e,t,a)=>{a.d(t,{Z:()=>u});var i=a(67294),l=a(84766),n=a(46858),s=(a(42741),a(39927)),r=a(12031),o=a(58445),c=a(1055),m=a(78314),d=a(84454),p=a(96655);const h="step_account",g="step_verification";class u extends i.Component{constructor(e,t){super(e,t),this.state={step:h,verify_option:""},this._onChangeProfile=this._onChangeProfile.bind(this)}componentDidMount(){m.Z.onChange(this._onChangeProfile),m.Z.checkCardAdded(),n.Z.reloadPopover(),n.Z.scrollTop()}componentDidUpdate(){n.Z.reloadPopover()}componentWillUnmount(){m.Z.offChange(this._onChangeProfile)}_onChangeProfile(){this.forceUpdate(),m.Z.isQualified&&this.props.onComplete()}startVerification(){this.setState({step:g}),n.Z.scrollTop()}completeVerification(){this.props.onComplete()}onSelectCard(e){}onChangeVerifyOption(e){this.setState({verify_option:e})}get cardPaymentProvider(){let e="",t=d.Z.getMethods();for(let a of t)if("card"==a.id&&a.available){e=a.provider;break}return l.Log.debug(e,"Card payment provider"),e}requireID(e){p.tVC,p.YJJ,p.gav;let t=!1;return e&&e.category&&(e.category==p.tVC?t=!0:e.category!=p.YJJ||!0!==e.digital&&"true"!=e.digital||(t=!0)),t}render(){let{listing:e}=this.props,{step:t,verify_option:a}=this.state;this.account_valid=!(!m.Z.isVerified||!m.Z.profile.email),this.verification_valid=m.Z.isQualified;let l=t==h?"badge-warning":"badge-success",d=t==h?1:"✓",p=t==g?"badge-warning":"badge-inverse",u="";if(t==g){let t=this.requireID(e),l=i.createElement("span",null,t?(0,c._)("You must submit your government issued identity information to be eligible as a seller."):"You can choose to submit your government issued identity information to be eligible as a seller."),n=[{verify_option:"identity",label:(0,c._)("Submit identity verification"),sub:l}];t||n.push({verify_option:"card",label:(0,c._)("Add a credit card"),sub:(0,c._)("You can choose to add a credit card to be eligible as a seller. We will not charge your card.")}),u=n.map(((e,t)=>i.createElement("div",{className:"row pointer info-table",key:t,onClick:this.onChangeVerifyOption.bind(this,e.verify_option),style:{padding:"10px 0",margin:"15px -15px"}},i.createElement("div",{className:"col-2 text-right"},i.createElement("input",{type:"radio",name:e.verify_option,value:e.verify_option,defaultChecked:a==e.verify_option,style:{marginTop:"20%"}})),i.createElement("div",{className:"col-10"},i.createElement("h4",null,e.label),i.createElement("small",{className:"text-muted"},e.sub))))),n.length>1&&u.splice(1,0,i.createElement("h4",{key:"or"},(0,c._)("OR")))}let v="";if(t==g){let e="<b>"+(0,c._)("What is this verification?")+"</b><p>"+(0,c._)("Online sales of digital items and services can easily become targets for fraud and scam activities if customer safety and regulations are neglected. By ensuring all sellers are verified, Gameflip adds yet another layer of protection to our secure environment.")+"</p><b>"+(0,c._)("How is my information kept?")+"</b><p>"+(0,c._)("Your information is securely encrypted on our server and will only be used to verify your account, and for processing payments and payouts.")+"</p>";v=n.Z.popover({content:e,className:"align-top"})}return i.createElement("div",{id:"edit_item",className:"screen container seller-verification-section"},i.createElement("h1",null,(0,c._)("Become a Seller")),i.createElement("div",{className:"edit-item inner-content"},i.createElement("div",{className:"container-fluid"},i.createElement("div",null,i.createElement("h4",{className:"float-left",style:{marginRight:"25px"}},i.createElement("span",{className:"badge badge-circle "+l},d)," ",(0,c._)("Your Account")),i.createElement("h4",{className:"float-left"},i.createElement("span",{className:"badge badge-circle "+p},"2")," ",(0,c._)("Verification")),i.createElement("hr",{className:"clear"})),t==h?i.createElement("div",null,i.createElement("h2",null,(0,c._)("Profile")),i.createElement("p",{className:"text-muted"},(0,c._)("A complete and accurate profile gives you more credibility for potential buyers")),i.createElement(s.Z,null),i.createElement("div",{className:"row text-right"},i.createElement("div",{className:"col-12"},i.createElement("br",null),i.createElement("button",{className:"btn btn-primary"+(this.account_valid?"":" disabled"),onClick:this.account_valid?this.startVerification.bind(this):null},(0,c._)("Next"))))):"",t==g?i.createElement("div",null,i.createElement("div",null,i.createElement("h2",{className:"d-inline"},(0,c._)("Verification"))," ",v),i.createElement("div",{className:"container-fluid"},u),i.createElement("hr",null),"identity"==a?i.createElement(r.Z,null):"","card"==a?i.createElement(o.Z,{hide_3ds:!0,provider:this.cardPaymentProvider,onSelect:this.onSelectCard.bind(this)}):"",i.createElement("div",{className:"row text-right"},i.createElement("div",{className:"col-12"},i.createElement("br",null),i.createElement("button",{className:"btn btn-primary"+(this.verification_valid?"":" disabled"),onClick:this.verification_valid?this.completeVerification.bind(this):null},(0,c._)("Next"))))):""),i.createElement("hr",null)))}}},86164:(e,t,a)=>{a.d(t,{Z:()=>r});var i=a(67294),l=a(46858),n=a(84766),s=a(98004);class r extends i.Component{getTag(e){return this.props.getTag?this.props.getTag(e):(n.Log.error(e,"Cannot get tag"),null)}setTag(e,t){return this.props.setTag?this.props.setTag(e,t):(n.Log.error(e,"Cannot get tag"),null)}changeTagValue(e,t,a){let i="";if(a&&(a.target?i=a.target.value:a.value&&(i=a.value)),n.Log.debug(t,"Changing tag ["+t+"] to value: "+i),n.Log.debug(e,"Changing tag input type"),!i||"multiple"!=e&&"checkbox"!=e)this.setTag(t,i);else{let e=this.getTag(t)||[];if("string"==typeof e){e=e.split(",");for(let t=0;t<e.length;t++)e[t]=e[t].trim()}let a=e.indexOf(i);a>=0?e.splice(a,1):e.push(i),this.setTag(t,e)}}cannotModifyTag(e){let t=this.props.unmodifiables;if(t){if("string"==typeof t&&t==e)return!0;if(Array.isArray(t))return t.includes(e)}return!1}render(){let e=this.props.meta;if(l.Z.isEmpty(e))return"";let t=e.map(((e,t)=>{let{name:a,label:r,placeholder:o,input:c,values:m,tip:d}=e,p=!("required"in e)||e.required,h=this.getTag(a)||"",g=e.dependencies||null;if(this.cannotModifyTag(a)&&h)return null;if(g){let e=!1;if(Object.keys(g).map((t=>{let a=this.getTag(t)||"",i=g[t];n.Log.debug(i,"Values in dependency"),i.map((t=>{t==a&&(e=!0)}))})),!e)return n.Log.warn("No dependency match"),i.createElement("span",{key:t})}m||(m=[]);let u=null;switch(c){case"select":case"single":let e=m.map((e=>{if(l.Z.isEmpty(e))return null;let t=e,a=e;return Array.isArray(e)&&(t=e[0],a=e[1]),{value:t,label:a}})).filter((e=>e));u=i.createElement(s.Z,{isMulti:!1,className:"tag-form-select form-control"+(p&&!h?" is-invalid":""),name:a,placeholder:o||r,value:h,onChange:this.changeTagValue.bind(this,c,a),options:e});break;case"checkbox":case"multiple":let t=h||[],n=m.length>5,d=m.map(((e,l)=>i.createElement("div",{key:l,className:(n?"col-5":"mr-2")+" custom-control custom-checkbox"},i.createElement("input",{className:"custom-control-input"+(p&&!h?" is-invalid":""),type:"checkbox",id:a+l,onChange:this.changeTagValue.bind(this,c,a),checked:-1!==t.indexOf(e),value:e}),i.createElement("label",{className:"custom-control-label",htmlFor:a+l}," ",e," "))));u=i.createElement("div",{className:"row"},d);break;default:u=i.createElement("input",{className:"form-control"+(p&&!h?" is-invalid":""),type:"text",placeholder:o||r,value:h,onChange:this.changeTagValue.bind(this,c,a)})}return i.createElement("div",{className:"row p-2",key:t},i.createElement("div",{className:"col-3 col-md-2 text-right"},i.createElement("p",null,r)),i.createElement("div",{className:"checkbox"==c||"multiple"==c?"col-9 col-md-10":"col-9 col-md-4"},u),d?i.createElement("p",{className:"col-12 col-md-6 help-block"},d):"")}));return i.createElement("div",null,t)}}},25369:(e,t,a)=>{a.r(t),a.d(t,{default:()=>w});var i=a(67294),l=(a(50743),a(88601)),n=(a(47675),a(84766)),s=a(46858),r=a(42741),o=a(58166),c=a(35255),m=(a(40872),a(78314)),d=a(330),p=a(16778),h=a(1055),g=a(95835),u=a(96637),v=a(36230),E=a(86164),f=a(36839),b=a(80324),_=a(47552),y=a(96655);const N="I will ",C="description",Z="pricing",k="media",x="requirements",P="publish";class w extends i.Component{getState(){return{gig:d.ZP.gig}}constructor(e,t){super(e,t),this.state=this.getState(),this.valid=!1,this._onChange=this._onChange.bind(this),this._onChangeProfile=this._onChangeProfile.bind(this)}componentDidMount(){if(!s.Z.canSellGig)return void s.Z.replacePathWith("sell_item");v.Z.block=!1,d.ZP.onChange(this._onChange),m.Z.onChange(this._onChangeProfile);let e=this.props.match.params,{id:t}=e;t&&s.Z.isUUID4(t)&&d.ZP.fetchListing(t,(e=>e.kind==y.Iox?s.Z.transitionTo("sell_item",{id:t}):e.category==y.gav?s.Z.transitionTo("sell_pro",{id:t}):void 0),(e=>{n.Log.error(e,"Fetch listing"),s.Z.replacePathWith("listings")})),s.Z.setDocumentTitle((0,h._)("Start Selling"))}componentWillUnmount(){v.Z.block=!0,d.ZP.offChange(this._onChange),m.Z.offChange(this._onChangeProfile);let e=d.ZP.gig;e.id&&"draft"==e.status&&(d.ZP.reset(),s.Z.showDialog({title:(0,h._)("Listing is Incomplete"),message:(0,h._)("Your listing has been saved and you can complete it later by navigating to the Listings menu."),ok:{label:(0,h._)("Go to Listings"),callback:e=>{s.Z.hideDialog(),s.Z.transitionTo("listings")}},cancel:{label:(0,h._)("Cancel"),callback:e=>{s.Z.hideDialog()}}}))}onCompleteVerification(){let{id:e}=this.props.match.params;e||this.createNewListing()}_onChange(){let{gig:e}=this.state;this.setState(this.getState(),(()=>{}))}_onChangeProfile(){this.forceUpdate()}onChangeValue(e,t){let a="object"==typeof t?t.target.value:t;"name"==e?a=N+a:"genre"==e&&"string"==typeof a&&(a=a?[a]:[]),d.ZP.setProp(e,a)}createNewListing(e){d.ZP.gig=e,s.Z.isQualified()&&d.ZP.postGig(e,(e=>{s.Z.replacePathWith("sell_gig",{id:e.id})}),(e=>{s.Z.showErrorDialog(e),s.Z.replacePathWith("")}))}toggleChat(e){let t=e.target.checked;this.setState({chat_enabled:t},(()=>{let e=[];e.push({op:"replace",path:"/chat_enabled",value:t}),r.Z.patchProfile(e,(e=>{m.Z.profile=e}))}))}listOrSave(e){if(e.preventDefault(),!this.valid)return;let{gig:t}=this.state,a=(m.Z.profile||{}).chat_enabled?"":i.createElement("div",{className:"panel"},i.createElement("input",{type:"checkbox",name:"enable_chat",onChange:this.toggleChat.bind(this)}),"  ",i.createElement("span",null,(0,h._)("Allow buyer to contact you?"))),l=e=>{if(e&&e.message&&e.message.includes("not eligible")){let t=i.createElement("div",{className:"alert alert-danger"},(0,h._)("Before you can list an gig, your account needs to be qualified."),i.createElement("br",null),i.createElement("a",{style:{color:"#666"},target:"_blank",href:"https://gameflip.zendesk.com/hc/en-us/articles/360006410293"},(0,h._)("Learn More")," >>"));s.Z.showInfoDialog(t,e.message)}else s.Z.showErrorDialog(e)};s.Z.showDialog({title:(0,h._)("Ready for Sale!"),message:i.createElement("div",{className:"container-fluid"},i.createElement("p",null,(0,h._)("Your listing is now ready to be published.")),a?i.createElement("div",{className:"panel"},i.createElement("input",{type:"checkbox",name:"enable_chat",onChange:this.toggleChat.bind(this)}),"  ",i.createElement("span",null,(0,h._)("Allow potential buyers to contact you before making purchase?"))):""),ok:{label:(0,h._)("List Gig"),callback:e=>{s.Z.hideDialog(),d.ZP.complete(y.IB,(e=>{c.ZP.track(c.G8,e),s.Z.transitionTo("gig",{name:s.Z.slug(e.name),id:e.id})}),l)}},cancel:{label:(0,h._)("Save For Later"),callback:e=>{s.Z.hideDialog(),d.ZP.complete(y.f1I,(e=>{s.Z.transitionTo("listings")}),l)}}})}deleteListing(){let e=this.state.gig;e.id&&s.Z.showDialog({title:(0,h._)("Delete Listing"),message:(0,h._)("Do you want to delete this listing?"),ok:{label:(0,h._)("Delete"),callback:t=>{r.Z.deleteListing(e.id,(t=>{p.Z.setDeleteItem(e.id),d.ZP.reset(),s.Z.hideDialog(),s.Z.transitionTo("listings")}),(e=>{s.Z.hideDialog()}))}},cancel:{label:(0,h._)("Cancel"),callback:e=>{s.Z.hideDialog()}}})}validatePriceTiers(){let{gig:e}=this.state,t=d.ZP.validatePriceTier(e.pkg_tier1);return d.ZP.price_tier_count>1&&(t&=d.ZP.validatePriceTier(e.pkg_tier2),t&=d.ZP.validatePriceTier(e.pkg_tier3)),t}validateTopic(e){let{gig:t}=this.state,{category:a,platform:i,name:l,description:n}=t;return e==C?a&&i&&l&&l.replace(N,"").trim()&&n&&n.trim():e==Z?this.validatePriceTiers():e==k?d.ZP.images.length>=1:e==x&&0==d.ZP.faqs.filter((e=>!e.question||!e.answer)).length}validateListing(){for(let e=0;e<this.topics.length;e++){let t=this.topics[e].id;if(t!=P&&!this.validateTopic(t))return!1}return!0}back(){let{id:e,topic:t}=this.props.match.params;t||(t=C),t==Z&&this.validatePriceTiers()&&d.ZP.updatePriceTiers();let a=C;for(let e=0;e<this.topics.length;e++)if(this.topics[e].id==t&&e-1>=0){a=this.topics[e-1].id;break}s.Z.transitionTo("sell_gig",{id:e,topic:a})}next(){let{id:e,topic:t}=this.props.match.params;t||(t=C),t==C?d.ZP.updateDelayPatchingProps():t==Z&&this.validatePriceTiers()&&d.ZP.updatePriceTiers();let a=C;for(let e=0;e<this.topics.length;e++)if(this.topics[e].id==t&&e+1<this.topics.length){a=this.topics[e+1].id;break}s.Z.transitionTo("sell_gig",{id:e,topic:a})}get topics(){return[{id:C,label:(0,h._)("Description")},{id:Z,label:(0,h._)("Pricing")},{id:k,label:(0,h._)("Media")},{id:x,label:(0,h._)("FAQ")},{id:P,label:(0,h._)("Publish")}]}render(){let{id:e}=this.props.match.params,t=d.ZP.gig;return e=e||t.id,!e&&m.Z.isVerified&&t.category&&!s.Z.isQualified()?i.createElement(f.Z,{listing:t,onComplete:this.onCompleteVerification.bind(this)}):t.id?this.renderEdit():(!e||!s.Z.isUUID4(e))&&i.createElement(V,{urlParams:this.props.match.params,onNext:this.createNewListing.bind(this)})}renderEdit(){let{id:e,topic:t}=this.props.match.params,{gig:a}=this.state;t||(t=C),this.valid=t==P&&this.validateListing();let l=!1,s=0,r=this.topics.map((a=>{s++;let r=this.valid||this.validateTopic(a.id);t==a.id&&(l=r),a.id==x&&0==d.ZP.faqs.length&&(r=!1);let o=r?"badge-warning":"";return i.createElement("li",{className:"nav-item",key:a.id},i.createElement(n.Link,{className:"nav-link "+(t==a.id?"active":""),to:"sell_gig",params:{id:e,topic:a.id}},i.createElement("span",{className:"badge badge-circle "+o},s),"  ",a.label))}));return i.createElement("div",{id:"edit_item",className:"screen container"},i.createElement("h1",null,(0,h._)("Sell a Gig on Gameflip")),i.createElement("div",{className:"edit-item inner-content"},i.createElement("ul",{className:"nav nav-tabs"},r),a.id&&t==C?i.createElement(D,{gig:a,onChangeValue:this.onChangeValue}):"",a.id&&t==Z?i.createElement(S,{gig:a,onChangeValue:this.onChangeValue}):"",a.id&&t==x?i.createElement(q,{gig:a,onChangeValue:this.onChangeValue}):"",a.id&&t==k?i.createElement(T,{gig:a,onChangeValue:this.onChangeValue}):"",a.id&&t==P?i.createElement(L,{gig:a}):"",a.id?i.createElement("div",{className:"action-buttons row"},i.createElement("div",{className:"col-6 text-left"},t!=C?i.createElement("button",{className:"btn btn-outline-secondary",type:"button",onClick:this.back.bind(this)},(0,h._)("Back")):"",t==C?i.createElement("button",{className:"btn btn-outline-secondary",type:"button",onClick:this.deleteListing.bind(this)},i.createElement("span",{className:"fa fa-trash"})," ",(0,h._)("Delete")):""),i.createElement("div",{className:"col-6 text-right"},t!=P?i.createElement("button",{className:"btn btn-primary"+(l?"":" disabled"),onClick:l?this.next.bind(this):null},(0,h._)("Next")):"",t==P?i.createElement("button",{className:"btn btn-primary"+(this.valid?"":" disabled"),onClick:this.valid?this.listOrSave.bind(this):null},i.createElement("span",{className:"fa fa-check"})," ",(0,h._)("Done")):"")):""))}}class D extends i.Component{render(){return i.createElement("div",{className:"edit-gig-description-tab"},i.createElement("div",{className:"tab-label text-primary"},(0,h._)("Describe your gig")),i.createElement("p",{className:"text-muted",style:{marginBottom:"30px"}},(0,h._)("New to Gigs?")," ",i.createElement("a",{target:"blank",href:"https://gameflip.zendesk.com/hc/en-us/articles/360012679793"},(0,h._)("Learn how to create a gig that stands out"))),i.createElement(A,this.props),i.createElement(U,this.props),i.createElement(O,this.props),i.createElement(I,this.props))}}class S extends i.Component{componentDidMount(){d.ZP.startTierTimer()}componentWillUnmount(){d.ZP.stopTierTimer()}render(){return i.createElement("div",{className:"edit-gig-price-tab"},i.createElement("div",{className:"tab-label text-primary"},(0,h._)("Price your gig")),i.createElement(W,this.props))}}class T extends i.Component{render(){return i.createElement("div",{className:"edit-gig-media-tab"},i.createElement("div",{className:"tab-label text-primary"},(0,h._)("Show off your skills")),i.createElement(G,this.props),s.Z.canUseMedia?i.createElement(Y,this.props):"")}}class q extends i.Component{render(){return i.createElement("div",{className:"edit-gig-requirement-tab"},i.createElement("div",{className:"tab-label text-primary"},(0,h._)("Get answers to the buyers when you receive lots of questions?")),i.createElement(B,this.props))}}class L extends i.Component{render(){let{gig:e}=this.props;return i.createElement("div",{className:"edit-gig-publish-tab"},i.createElement("div",{className:"tab-label text-primary"},(0,h._)("Preview and publish your gig")),i.createElement("div",{className:"edit-gig-listing-detail"},i.createElement("div",{className:"container-fluid",style:{marginTop:"20px",marginBottom:"20px"}},i.createElement(b.Z,{listing:e,nolink:!0}))))}}class V extends i.Component{constructor(e,t){super(e,t),this.state=this.getState(),this.valid=!1,this.next=this.next.bind(this)}getState(){let{category:e,platform:t,genre:a}=d.ZP.gig;return{category:e,platform:t,genre:a}}get selections(){let e=(s.Z.categories()||[]).filter((e=>e.kind==y.Bxu&&e.id!=y.cF8&&e.id!=y.gav)),t=[];return e?(e.map((e=>{if(e&&e.platform){let a=e.platform?s.Z.categoryPlatforms(e.id):[];a&&a.length>0&&a.map((a=>{t.push({category:e,platform:a})}))}})),t):[]}select(e,t){n.Log.debug(e,"Setting prop"),this.setState(e)}next(){if(!this.valid)return;if(!s.Z.checkVerified())return;let{category:e,platform:t,genre:a}=this.state;this.props.onNext&&this.props.onNext({category:e?e.id:null,platform:t?t.id:null,genre:a?a.id:null})}render(){let{category:e,platform:t,genre:a}=this.state,l=this.selections,n="";if(l){let a=l.map(((a,l)=>{let n=a.category||{},s=a.platform||{},r=e&&e.id==n.id&&t&&t.id==s.id,o=(0,h._)(s.label),c=s.image;return i.createElement(M,{key:l,selected:r,label:o,image:c,onClick:this.select.bind(this,{category:n,platform:s,genre:null})})}));n=i.createElement("div",{className:"edit-item-category section"},i.createElement("h2",null,i.createElement("span",null,(0,h._)("Select Category"))),i.createElement("div",{className:"row"},a))}let s="";if(e&&e.genre){let t=e.genre.items.map((e=>{let t=a&&a.id==e.id;return i.createElement(M,{key:e.id,label:e.label,selected:t,onClick:this.select.bind(this,{genre:e})})}));s=i.createElement("div",{className:"edit-item-category section"},i.createElement("h2",null,i.createElement("span",null,(0,h._)("Select Game"))),i.createElement("div",{className:"row"},t))}return this.valid=e&&(!e.platform||t&&(!e.genre||a)),i.createElement("div",{id:"edit_item",className:"screen container"},i.createElement("h1",null,(0,h._)("Start Selling")),i.createElement("div",{className:"inner-content"},i.createElement("div",{className:"edit-item container-fluid"},n,s,i.createElement("div",{className:"row"},i.createElement("p",{className:"col-12 note"},(0,h._)("Providing obscene or inappropriate gigs or services on Gameflip is strictly prohibited."))),i.createElement("div",{className:"row"},i.createElement("div",{className:"col-12"},i.createElement("button",{className:"btn btn-primary"+(this.valid?"":" disabled"),onClick:this.next.bind(this)},(0,h._)("Next")))))))}}class M extends i.Component{render(){let{label:e,image:t,selected:a,onClick:l}=this.props,n="cell col-4 col-md-3 col-lg-2 pointer";return a&&(n+=" selected"),t||(n+=" noimage"),i.createElement("div",{className:n,onClick:l},t?i.createElement("img",{className:"img-fluid thumbnail",src:t}):"",i.createElement("p",{className:"text-center"},(0,h._)(e)))}}class A extends i.Component{render(){let e=this.props.gig,t=e.category?e.category:"",a=e.platform?e.platform:"",l=e.genre?e.genre:[],n=[{header:(0,h._)("Category"),content:s.Z.categoryName(t),contentprops:{size:9}},{header:(0,h._)("Subcategory"),content:s.Z.platformName(t,a),contentprops:{size:9}}];if(l&&l.length>0){let e=[];l.map((t=>{let a=s.Z.genreName(t);a&&e.push(a)})),e.length>0&&n.push({header:(0,h._)("Game"),content:e.join(", "),contentprops:{size:9}})}return i.createElement("div",{className:"edit-item-category-info section"},i.createElement("h2",null,i.createElement("span",null,(0,h._)("Category"))),i.createElement("div",{className:"row"},i.createElement("div",{className:"col-12 col-md-8 col-lg-8"},i.createElement(u.Z,{items:n}))))}}class U extends i.Component{constructor(e,t){super(e,t),this.state={form:[]}}componentDidMount(){let e=this.props.gig;this.loadMeta(e)}componentDidUpdate(e,t){try{if(JSON.stringify(this.props)!==JSON.stringify(e)){let t=e.gig,a=this.props.gig||{};a.category==t.category&&a.platform==a.platform||this.loadMeta(a)}}catch(e){n.Log.error(e)}}loadMeta(e){let{category:t,platform:a,genre:i}=e;t&&a&&o.Z.getGigMetaProperties(t,a,i,(e=>{n.Log.debug(e,"GigMetaInfo.loadMeta: result"),this.setState({form:e})}),(e=>{n.Log.debug(e,"GigMetaInfo.loadMeta")}))}render(){let{gig:e}=this.props,{form:t}=this.state;return i.createElement("div",{className:"edit-item section"},i.createElement("h2",null,i.createElement("span",null,(0,h._)("Meta Information"))),i.createElement("p",{className:"row text-muted"},(0,h._)("Details of what you offer to the buyer.  Accurate information is required for skills, achievements, experience level, etc.")),i.createElement(E.Z,{meta:t,getTag:e=>d.ZP.getTag(e),setTag:(e,t)=>{d.ZP.setTag(e,t)}}))}}class I extends i.Component{render(){let{gig:e,onChangeValue:t}=this.props,a=e.name||"";a.startsWith(N)&&(a=a.replace(N,""));let l=a&&a.length>=10&&a.length<=80;return i.createElement("div",{className:"edit-gig-name section"},i.createElement("h2",null,i.createElement("span",null,(0,h._)("Title"))),i.createElement("p",{className:"row text-muted"},(0,h._)("Create a catchy title that offers what you can do at a glance.")),i.createElement("div",{className:"row"+(l?"":" has-error")},i.createElement("div",{className:"input-group"},i.createElement("div",{className:"input-group-prepend"},i.createElement("span",{className:"input-group-text"},i.createElement("b",null,"I will"))),i.createElement("input",{className:"form-control",type:"text",placeholder:(0,h._)("do something for you"),value:a,onChange:t.bind(this,"name")})),i.createElement("div",{style:{width:"100%"}},i.createElement("div",{className:"float-left "+(l?"text-muted":"text-danger")},i.createElement("small",null,(0,h._)("Min.")," ",10)),i.createElement("div",{className:"float-right "+(l?"text-muted":"text-danger")},i.createElement("small",null,a.length,"/",80)))))}}class O extends i.Component{render(){let{gig:e,onChangeValue:t}=this.props,a=e.description||"",l=a&&a.length>=120&&a.length<=1e4;return i.createElement("div",{className:"edit-gig-description section"},i.createElement("h2",null,i.createElement("span",null,(0,h._)("Detail Description"))),i.createElement("p",{className:"row text-muted"},(0,h._)("Describe your gig, including promotional details of what you can offer to the buyer.  We recommend that you include your skills and experience level, stats, and other information to make your gig stands out.")),i.createElement("div",{className:"row"+(l?"":" has-error")},i.createElement("textarea",{className:"form-control",placeholder:(0,h._)("Detail description"),rows:"10",value:a,onChange:t.bind(this,"description")}),i.createElement("div",{style:{width:"100%"}},i.createElement("div",{className:"float-left "+(l?"text-muted":"text-danger")},i.createElement("small",null,(0,h._)("Min.")," ",120)),i.createElement("div",{className:"float-right "+(l?"text-muted":"text-danger")},i.createElement("small",null,a.length,"/",1e4)))))}}class W extends i.Component{offerMultiTiers(e){d.ZP.price_tier_count=e.target.checked?3:1}render(){let{gig:e}=this.props,t=d.ZP.price_tier_count>1,a=[{id:"pkg_tier1",label:(0,h._)("BASIC"),package:e.pkg_tier1||{}}];t&&(a.push({id:"pkg_tier2",label:(0,h._)("PLUS"),package:e.pkg_tier2||{}}),a.push({id:"pkg_tier3",label:(0,h._)("PRO"),package:e.pkg_tier3||{}}));let l=a.map((e=>i.createElement(F,{tier:e,key:e.id})));return i.createElement("div",{className:"edit-gig-price section"},i.createElement("h2",null,i.createElement("span",null,(0,h._)("Your Offer"))),i.createElement("div",{className:"row"},i.createElement("input",{type:"checkbox",name:"multi_tiers",onChange:this.offerMultiTiers.bind(this),checked:t}),"  ",i.createElement("span",null,(0,h._)("Offer 3-tier pricing packages"))),i.createElement("p",{className:"row text-muted"},(0,h._)("Summarize what the package offers to buyers.")," ",(0,h._)("When you offer multiple pricing packages, be sure to describe how each package differs.")),i.createElement("div",{className:"row"},i.createElement("div",{className:"col-12"},i.createElement("div",{className:"row"},l))))}}class F extends i.Component{constructor(e,t){super(e,t),this.state=this.getState(this.props),this.timeout=null}componentDidUpdate(e,t){try{JSON.stringify(this.props)!==JSON.stringify(e)&&this.setState(this.getState(this.props))}catch(e){n.Log.error(e)}}getState(e){let{tier:t}=e;return{price:t&&t.package&&t.package.price||0}}onKeyUp(e,t){s.Z.isBrowser&&(window.clearTimeout(this.timeout),this.timeout=window.setTimeout((()=>{let{tier:e}=this.props;n.Log.debug(e,"Update pricing tier"),d.ZP.updatePriceTiers()}),500))}onChangeProp(e,t){let{tier:a}=this.props,i="object"==typeof t?t.target.value:t;n.Log.debug(i,"Changing prop "+e),a.package[e]=i,a.selected=!0,d.ZP.setTier(a)}onChangePrice(e){let{tier:t}=this.props,a=e.target.value;if(""!=a){let e=s.Z.parsePrice(a)||0;e!=this.state.price&&((s.Z.isValidPrice(e)||s.Z.isValidPrice(this.state.price))&&(t.package.price=e,delete t.package.cost,t.selected=!0,d.ZP.setTier(t,!0)),this.setState({price:e}))}else a!=this.state.price&&this.setState({price})}render(){let{tier:e}=this.props,{name:t,description:a,deliver_within_days:l,cost:s}=e.package,r=parseFloat((this.state.price||0)/100).toFixed(2),o=r&&s?parseFloat((s.total_cost||0)/100).toFixed(2):0,c=r&&s?parseFloat(r-o).toFixed(2):"";c<0&&(c=0);let m=r>=d.BK&&r<=d.a5,p=[];for(let e=1;e<=7;e++)p.push({id:e,label:1==e?(0,h._)("1 day"):(0,h._)("{day} days",{day:e})});let g=t&&t.length>=d.w7&&t.length<=d.zw,u=a&&a.length>=d.oW&&a.length<=d.so,v=g&&u&&m&&l;return i.createElement("div",{className:"price-tier col-12 col-md-4"},i.createElement("div",{className:"container-fluid"},i.createElement("div",{className:"row"},i.createElement("div",{className:"col-12 text-center"},i.createElement("label",null,e.label))),i.createElement("div",{className:"row"+(g?"":" has-error")},i.createElement("div",{className:"col-12"},i.createElement("input",{className:"form-control",type:"text",placeholder:(0,h._)("Package name"),value:t||"",onChange:this.onChangeProp.bind(this,"name"),onKeyUp:this.onKeyUp.bind(this,"name")}),i.createElement("small",{className:"float-left "+(t&&!g?"text-danger":"text-muted")},(0,h._)("Min")," ",d.w7),i.createElement("small",{className:"float-right "+(t&&!g?"text-danger":"text-muted")},t?t.length:0," / ",d.zw))),i.createElement("div",{className:"row"+(u?"":" has-error")},i.createElement("div",{className:"col-12"},i.createElement("textarea",{className:"form-control",placeholder:(0,h._)("Package description"),rows:"8",value:a||"",onChange:this.onChangeProp.bind(this,"description"),onKeyUp:this.onKeyUp.bind(this,"description")}),i.createElement("small",{className:"float-left "+(a&&!u?"text-danger":"text-muted")},(0,h._)("Min")," ",d.oW),i.createElement("small",{className:"float-right "+(a&&!u?"text-danger":"text-muted")},a?a.length:0," / ",d.so))),i.createElement("div",{className:"row"},i.createElement("div",{className:"col-12"},i.createElement("p",null," "))),i.createElement("div",{className:"row"+(l?"":" has-error")},i.createElement("div",{className:"col-4 col-md-5"},i.createElement("p",null,(0,h._)("Deliver Time"),":")),i.createElement("div",{className:"col-8 col-md-7 text-right"},i.createElement(n.Dropdown,{onSelect:this.onChangeProp.bind(this,"deliver_within_days"),onKeyUp:this.onKeyUp.bind(this,"deliver_within_days"),name:"deliver_within_days",label:(0,h._)("Deliver Time"),selections:p,selectedId:l}))),i.createElement("div",{className:"row"+(m?"":" has-error")},i.createElement("div",{className:"col-4 col-md-3"},i.createElement("p",null,(0,h._)("Price"),":")),i.createElement("div",{className:"col-8 col-md-9 text-right"},i.createElement("div",{className:"edit-item-price"},i.createElement("input",{className:"form-control price-input text-right",type:"text",placeholder:(0,h._)("$5 - $999"),value:"$"+r,onChange:this.onChangePrice.bind(this)})," ",i.createElement("span",{className:"note"},"USD")))),i.createElement("div",{className:"row"},i.createElement("div",{className:"col-8"},i.createElement("p",null,(0,h._)("Service fee"),":")),i.createElement("div",{className:"col-4 text-right"},v?i.createElement("p",null,"$",o," ",i.createElement("span",{className:"note"},"USD")):"")),i.createElement("div",{className:"row"},i.createElement("div",{className:"col-8"},i.createElement("p",null,(0,h._)("You make"),":")),i.createElement("div",{className:"col-4 text-right"},v?i.createElement("p",null,"$",c," ",i.createElement("span",{className:"note"},"USD")):""))))}}class G extends i.Component{constructor(e,t){super(e,t),this.state=this.getState(),this._onChange=this._onChange.bind(this)}getState(){return{images:d.ZP.images}}componentDidMount(){d.ZP.onChangeImage(this._onChange)}componentWillUnmount(){d.ZP.offChangeImage(this._onChange)}_onChange(){this.setState(this.getState())}onDrop(e){n.Log.debug(e,"onDrop files");let t=e[0];s.Z.notValidImage(t)||d.ZP.processPhoto(t.preview)}onDelete(e,t){s.Z.showDialog({title:(0,h._)("Delete Photo"),message:(0,h._)("Do you want to delete this photo?"),ok:{label:(0,h._)("Delete"),callback:t=>{d.ZP.deletePhoto(e),s.Z.hideDialog()}},cancel:{label:(0,h._)("Cancel"),callback:e=>{s.Z.hideDialog()}}})}render(){let e=this.state.images,t=[],a=e&&e.length>=1?"":"required-square-content";for(let n=0;n<6;n++){let s="";if(n<e.length){let t=e[n];s=null==t?i.createElement("div",{className:"square-responsive"},i.createElement("div",{className:"square-content"},i.createElement("div",{className:"spinner"},i.createElement("div",{className:"bounce1"}),i.createElement("div",{className:"bounce2"}),i.createElement("div",{className:"bounce3"})))):i.createElement("div",{className:"square-responsive pointer",onClick:this.onDelete.bind(this,n)},i.createElement(g.Z,{className:"img-fluid square-content bg_2d",src:t.view_url,dim:200}),i.createElement("img",{className:"icon-delete",src:"/img/app/icon_delete_photo.png"}))}else s=n==e.length?i.createElement("div",{className:"square-responsive pointer"},i.createElement(l.Z,{className:"dropzone square-content text-center "+a,onDrop:this.onDrop.bind(this),multiple:!1},i.createElement("div",null,(0,h._)("Click or Drag & Drop<br/>Image here",{__html:!0})))):i.createElement("div",{className:"square-responsive"},i.createElement("div",{className:"square-content"}));t.push(i.createElement("div",{className:"photo col-3 col-md-2",key:n},s))}return i.createElement("div",{className:"edit-item-photos section"},i.createElement("h2",null,i.createElement("span",null,(0,h._)("Gig Photos"))),i.createElement("p",{className:"row text-muted"},(0,h._)("At least one image is required for your gig.  We recommend using your own 640x640 screenshot or photo")),i.createElement("div",{className:"photo-row row"},t))}}class Y extends i.Component{constructor(e,t){super(e,t),this.state=this.getState(),this._onChange=this._onChange.bind(this)}getState(){return{media:d.ZP.media,posters:[]}}componentDidMount(){d.ZP.onChangeMedia(this._onChange)}componentWillUnmount(){d.ZP.offChangeMedia(this._onChange)}_onChange(){this.setState(this.getState())}onDrop(e){n.Log.debug(e,"onDrop files");let t=e[0];s.Z.notValidMedia(t,{bytes:104857600})||d.ZP.processMedia(t)}onDelete(e,t){t.stopPropagation(),s.Z.showDialog({title:(0,h._)("Delete File"),message:(0,h._)("Do you want to delete this file?"),ok:{label:(0,h._)("Delete"),callback:t=>{d.ZP.deleteMedia(e),s.Z.hideDialog()}},cancel:{label:(0,h._)("Cancel"),callback:e=>{s.Z.hideDialog()}}})}onClickVideoIcon(e,t,a){if(t.posters){let i=[];try{for(let a in t.posters)i.push({media_order:e,poster_id:a,view_url:t.posters[a]["640x640"].view_url});s.Z.sortArrayBy(i,"poster_id",1)}catch(a){n.Log.debug(a)}i.length&&this.setState({posters:i})}}changePoster(e,t){let{media:a}=this.state;try{a[e].poster_selected=t,this.setState({media:a,posters:[]},(()=>{d.ZP.changePoster(e,t)}))}catch(e){n.Log.debug(e)}}render(){let{media:e,posters:t}=this.state,a=[],n=e&&e.length>=1?"":"required-square-content";for(let t=0;t<2;t++){let r="";if(t<e.length){let a=e[t];r=null==a||null==e?i.createElement("div",{className:"square-responsive"},i.createElement("div",{className:"square-content"},i.createElement("div",{className:"spinner"},i.createElement("div",{className:"bounce1"}),i.createElement("div",{className:"bounce2"}),i.createElement("div",{className:"bounce3"})))):s.Z.isVideo(a.mime_type)&&a.status==y.HFc?i.createElement("div",{className:"square-responsive pointer",onClick:this.onClickVideoIcon.bind(this,t,a)},i.createElement("img",{className:"img-fluid square-content bg_2d",src:s.Z.itemVideoPoster(a)}),i.createElement("img",{className:"icon-delete",src:"/img/app/icon_delete_photo.png",onClick:this.onDelete.bind(this,t)})):a.status==y.Po2?i.createElement("div",{className:"square-responsive pointer"},i.createElement("img",{className:"img-fluid square-content bg_2d",src:"/img/app/icon_exchange_processing.png"}),i.createElement("img",{className:"icon-delete",src:"/img/app/icon_delete_photo.png",onClick:this.onDelete.bind(this,t)})):i.createElement("div",{className:"square-responsive pointer"},i.createElement(g.Z,{className:"img-fluid square-content bg_2d",src:a.view_url,dim:200}),i.createElement("img",{className:"icon-delete",src:"/img/app/icon_delete_photo.png",onClick:this.onDelete.bind(this,t)}))}else r=t==e.length?i.createElement("div",{className:"square-responsive pointer"},i.createElement(l.Z,{className:"dropzone square-content text-center "+n,onDrop:this.onDrop.bind(this),multiple:!1},i.createElement("div",{className:"square-content-landscape"},(0,h._)("Click or Drag & Drop<br/>File here",{__html:!0})))):i.createElement("div",{className:"square-responsive"},i.createElement("div",{className:"square-content"}));a.push(i.createElement("div",{className:"photo col-3 col-md-2",key:t},r))}let r=[];if(t.length)for(let e of t){let t=i.createElement("div",{className:"square-responsive pointer"},i.createElement(g.Z,{className:"img-fluid square-content bg_2d",src:e.view_url,onClick:this.changePoster.bind(this,e.media_order,e.poster_id),dim:200}));r.push(i.createElement("div",{className:"photo col-3 col-md-2",key:e.poster_id},t))}return i.createElement("div",{className:"edit-item-photos section"},i.createElement("h2",null,i.createElement("span",null,(0,h._)("Gig Videos")," (",(0,h._)("Optional"),")")),i.createElement("p",{className:"row text-muted"},(0,h._)("Demonstrate your gig with a {seconds} second video. You can publish your gig while your video is being processed. When your video is ready, click it to choose a screenshot.",{seconds:"30"})),i.createElement("div",{className:"photo-row row"},a),r.length?i.createElement("div",null,i.createElement("p",{className:"row text-muted"},(0,h._)("Choose an image for your video")+":"),i.createElement("div",{className:"photo-row row"},r)):"")}}class B extends i.Component{addMore(e){e.preventDefault(),d.ZP.addFAQ()}edit(e,t,a){d.ZP.editFAQ(e.id,{[t]:a})}remove(e,t){d.ZP.removeFAQ(e)}render(){let{gig:e,onChangeValue:t}=this.props,a=d.ZP.faqs.map(((e,t)=>{let{question:a,answer:l}=e;return i.createElement("div",{key:e.id},i.createElement(_.Z,{mode:"input",value:a,placeholder:(0,h._)("Question {num}",{num:t+1}),submit:this.edit.bind(this,e,"question"),remove:this.remove.bind(this,e)}),i.createElement(_.Z,{mode:"input",value:l,placeholder:(0,h._)("Answer {num}",{num:t+1}),submit:this.edit.bind(this,e,"answer")}),i.createElement("hr",null))}));return i.createElement("div",{className:"edit-gig-faq section"},i.createElement("h2",null,i.createElement("span",null,(0,h._)("Frequently Asked Questions"))),i.createElement("p",{className:"row text-muted"},(0,h._)("Add common Questions & Answers for your buyers.")),a,i.createElement("p",null,i.createElement("a",{className:"pointer",onClick:this.addMore.bind(this)},"+ ",(0,h._)("Add More"))))}}}}]);