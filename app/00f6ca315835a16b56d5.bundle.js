"use strict";(self.webpackChunkgameflip_market=self.webpackChunkgameflip_market||[]).push([[3537],{34471:(e,t,a)=>{a.d(t,{ZP:()=>s}),a(67294),a(84766);var i=a(86484);const l=["SD","HD","HDX","UHD/4K","UHD/8K"],n=["Movies Anywhere","UltraViolet","Vudu","Google Play","iTunes"];class s extends i.Z{getFilterInfo(e){return[{key:"resolution",label:"Resolution"},{key:"library",label:"Library"}]}getFilterList(e){return this.LIST_RESOLUTION||(this.LIST_RESOLUTION=this.convertChoiceList(l),this.LIST_LIBRARY=this.convertChoiceList(n)),"resolution"==e?this.LIST_RESOLUTION:"library"==e?this.LIST_LIBRARY:[]}onSelectTags(e,t){"Any"==t[e]&&delete t[e],super.onSelectTags(e,t)}}},97614:(e,t,a)=>{a.d(t,{Z:()=>r});var i=a(67294),l=(a(84766),a(46858)),n=(a(42741),a(58166),a(1055));const s={all:["name","description","image","external_url"],axie:["genes","owner","created_time"],cryptopunks:["id","sale_price"]};class r extends i.Component{constructor(e,t){super(e,t)}parseData(){let e=this.props;this.nftAttrMap=e&&e.item&&e.item.nft_metadata?l.Z.arrayToMap(e.item.nft_metadata.attributes,"trait_type"):{},this.deck={overview:{title:"Overview",icon:"fas fa-info-circle",elms:[],collapsed:!!e.collapsed},tags:{title:"Tags",icon:"fas fa-tag",elms:[],collapsed:!!e.collapsed},props:{title:"Properties",icon:"fas fa-tag",elms:[],collapsed:!!e.collapsed},stats:{title:"Stats",icon:"fas fa-chart-bar",elms:[],collapsed:!!e.collapsed},points:{title:"Points",icon:"fas fa-child",elms:[],collapsed:!!e.collapsed},levels:{title:"Levels",icon:"fas fa-star-half-alt",elms:[],collapsed:!!e.collapsed},parts:{title:"Parts",icon:"fas fa-chart-pie",elms:[],collapsed:!!e.collapsed},abilities:{title:"Abilities",icon:"fas fas fa-bolt",elms:[],collapsed:!!e.collapsed},dates:{title:"Dates",icon:"fas fa-calendar",elms:[],collapsed:!!e.collapsed}},this.cards=[],e&&e.item&&e.item.nft_metadata?(Array.isArray(e.item.nft_metadata.attributes)?e.item.nft_metadata.attributes:this.convertNFTProperties(e.item)).forEach((e=>{this.insertCardDetail(e)})):e&&Array.isArray(e.tag_info)&&e.tag_info.forEach((e=>{this.insertCardDetail({trait_type:e.header||"",value:e.content||"",display_type:"tag"})}));for(let e in this.deck){let t=this.deck[e];t.id=e,t.elms.length&&("props"===e?this.cards.push(this.getCard(t,e)):this.cards.push(this.getCard(t)))}}convertNFTProperties(e){let t=e.nft_metadata,a=s[e.platform],l=[],r=(t,a)=>{switch(e.platform){case"axie":if("stats"===t)for(let e in a){let t=a[e];l.push({trait_type:e,value:t,display_type:"point"})}else"parts"===t&&Array.isArray(a)&&a.forEach((e=>{let t=e.abilities;Array.isArray(t)&&t[0]?(t=t[0],l.push({trait_type:t.name,value:i.createElement("div",null,i.createElement("i",{className:"fas fa-gavel"})," ",t.attack||0,"   ",i.createElement("i",{className:"fas fa-shield-alt"})," ",t.defense||0,i.createElement("br",null),t.description||""),display_type:"ability"})):e.name&&l.push({trait_type:e.class||"",value:e.name||"",display_type:"part"})}));break;case"topps_mlb":if("data"===t)for(let e in a){let t=a[e];"img"!==e&&"legal"!==e&&"backimg"!==e&&l.push({trait_type:e,value:t,display_type:"overview"})}break;case"cryptopunks":if("accessories"===t&&Array.isArray(a))try{a.forEach((e=>{l.push({trait_type:"Accessory",value:e,display_type:"part"})}))}catch(e){}break;default:if(Array.isArray(a))try{a.forEach((e=>{l.push({trait_type:t,value:e})}))}catch(e){}}};for(let e in t){let i=t[e],o=e.toLowerCase(),c={trait_type:o,value:i},m=!0;a&&a.includes(o)||s.all.includes(o)||null===i?m=!1:o.includes("date")&&!o.includes("update")||o.includes("time")||/\d{4}-\d{2}-\d{2}T\d{2}:\d{2}:\d{2}.\d{3}Z/.test(o)?c.display_type="date":"number"!=typeof i&&isNaN(i)?"boolean"==typeof i?c.value=i?(0,n._)("Yes"):(0,n._)("No"):("object"==typeof i||Array.isArray(i))&&(r(o,i),m=!1):c.display_type="number",m&&l.push(c)}return l}insertCardDetail(e){let t,a=e.trait_type;if(!a||"string"!=typeof a)return;let s=l.Z.capitalize(a,!0),r=e.value,o=e.max_value;o&&!isNaN(o)&&(o=parseFloat(o));let c=e.display_type,m=o?` ${(0,n._)("of")} ${o}`:"";if("number"===c){let e=isNaN(r)?r:parseFloat(r);this.deck.stats.elms.push(this.getCardDetail(s,e+m))}else if("ranking"===c){let t=isNaN(r)?r:parseFloat(r);this.deck.levels.elms.push(this.getCardDetail(s,t+m,e))}else if("date"===c){let e=r;isNaN(r)||(e=parseFloat(r));let t=("number"==typeof e?new Date(1e3*e):new Date(e)).toLocaleDateString(void 0,{weekday:"long",year:"numeric",month:"long",day:"numeric"});this.deck.dates.elms.push(this.getCardDetail(s,t))}else"string"==typeof a&&a.endsWith("_id")||(t="tag"===c?"tags":"overview"===c?"overview":"point"===c?"points":"part"===c?"parts":"ability"===c?"abilities":"props");t&&this.deck[t].elms.push(i.createElement("div",{key:a,className:"card-element col-4 d-flex flex-column"},i.createElement("div",{className:"h-100 bg-light rounded border border-secondary px-1 px-lg-2 py-2 m-1 text-center"},i.createElement("div",{className:"text-primary text-uppercase small d-flex justify-content-center overflow-hidden mb-2"},s),i.createElement("div",{className:"text-break text-capitalize d-flex justify-content-center overflow-hidden"},r))))}getCardDetail(e,t,a){let l;if(a&&"ranking"===a.display_type&&a.max_value){let e=Math.floor(t/a.max_value*100);l=i.createElement("div",{className:"progress mt-1 mb-2"},i.createElement("div",{className:"progress-bar bg-warning",role:"progressbar",style:{width:e+"%"},"aria-valuenow":e,"aria-valuemin":"0","aria-valuemax":a.max_value}))}return i.createElement("div",{key:e,className:"py-1 w-100"},i.createElement("div",{className:"d-flex justify-content-between"},i.createElement("div",{className:""},e),i.createElement("div",{className:""},t)),l)}getCard(e,t){let{id:a,title:l,icon:n,collapsed:s,elms:r}=e,o="props"===t?"row no-gutters":"d-flex flex-wrap";return i.createElement("div",{key:a,className:"card"},i.createElement("div",{className:"card-header",id:a+"Heading"},i.createElement("div",{className:"btn btn-link w-100 d-flex justify-content-between","data-toggle":"collapse","data-target":"#"+a+"Collapse","aria-expanded":"true","aria-controls":a+"Collapse"},i.createElement("div",{className:"p text-left"},i.createElement("span",{className:"mr-1 "+n})," ",i.createElement("b",null,l)),i.createElement("div",{className:"collapsed-hide"},i.createElement("span",{className:"fas fa-chevron-up"})),i.createElement("div",{className:"collapsed-show"},i.createElement("span",{className:"fas fa-chevron-down"})))),i.createElement("div",{id:a+"Collapse",className:"collapse "+(s?"":"show"),"aria-labelledby":a+"Heading"},i.createElement("div",{className:"card-body "+o},r)))}render(){let{item:e,description:t,className:a,tag_info:s}=this.props;if(!e&&!s)return null;this.parseData();let r=e&&e.description?e.description:t||"";return i.createElement("div",{className:"info-card"+(a?" "+a:"")},r?i.createElement("div",{className:"card"},i.createElement("div",{className:"card-header"},i.createElement("div",{className:"btn btn-link w-100"},i.createElement("div",{className:"p text-left"},i.createElement("span",{className:"mr-1 fas fa-list-ul"})," ",i.createElement("b",null,(0,n._)("Details"))))),i.createElement("div",{className:"card-body d-flex flex-wrap"},l.Z.replaceLineBreak(r))):null,this.cards)}}},33727:(e,t,a)=>{a.d(t,{Z:()=>o});var i=a(67294),l=(a(46858),a(84766)),n=a(42741),s=a(1055),r=a(96655);class o extends i.Component{constructor(e,t){super(e,t),this.state={unsaved:!1,selectedIndex:-1,userLanguages:this.getLanguages(),selectedLanguage:"",selectedProficiency:"fluent"},this.selectableLanguages=[];for(let e in r.a2c)this.selectableLanguages.push({id:e,label:r.a2c[e]});this.PROFICIENCIES={native:(0,s._)("Native"),fluent:(0,s._)("Fluent"),conversational:(0,s._)("Conversational"),basic:(0,s._)("Basic")}}componentDidMount(){this.setState({userLanguages:this.getLanguages()})}componentDidUpdate(e,t){e.profile&&this.props.profile&&e.profile.owner!=this.props.profile.owner&&this.setState({userLanguages:this.getLanguages()})}getLanguages(e){let t=e||this.props.profile;return t&&t.languages||[]}getLanguageIndex(){let{userLanguages:e,selectedLanguage:t}=this.state;for(let a=0;a<e.length;a++)if(t&&e[a].code==t)return a;return-1}addLanguage(){let{selectedIndex:e,userLanguages:t,selectedLanguage:a,selectedProficiency:i}=this.state;if(!a)return;let l=this.getLanguageIndex(),n=l>=0?l:e;n>=0?(t[n]={code:a,proficiency:i},this.setState({unsaved:!0,selectedIndex:-1,userLanguages:t})):t.length<5&&(t.push({code:a,proficiency:i}),this.setState({unsaved:!0,selectedIndex:-1,userLanguages:t}))}changeLanguage(e){let{userLanguages:t}=this.state,a=t[e],i=a.code;this.setState({selectedIndex:e,selectedLanguage:i,selectedProficiency:a.proficiency})}removeLanguage(e){let{userLanguages:t}=this.state;t.splice(e,1),this.setState({unsaved:!0,userLanguages:t})}saveLanguages(){let{userLanguages:e}=this.state,t=[];t.push({op:"replace",path:"/languages",value:e}),n.Z.patchProfile(t,(e=>{this.setState({unsaved:!1,userLanguages:this.getLanguages(e),selectedLanguage:null})}),(e=>{this.setState({error:e})}))}onChange(e,t){let a=t&&t.target?t.target.value:t;this.setState({[e]:a})}render(){let{max:e,sentenceOnly:t,readOnly:a}=this.props,{unsaved:n,selectedIndex:o,userLanguages:c,selectedLanguage:m,selectedProficiency:d}=this.state,p=this.getLanguageIndex()>=0,h=p?(0,s._)("Change"):(0,s._)("Add"),u=!a&&(c.length<5||p),g=[],_=[];if(c.length&&(g=c.map(((e,l)=>{let n=o==l?" bg-light":"",c=r.a2c[e.code]||(0,s._)("Unknown Language"),m=this.PROFICIENCIES[e.proficiency]||(0,s._)("Unknown Proficiency");return t&&_.push(`${c} (${m})`),i.createElement("div",{className:"row pt-2 pb-2 border-bottom"+n,key:l},i.createElement("div",{className:"col-5"},c),i.createElement("div",{className:"col-4"},m),a?i.createElement("div",{className:"col-3"}):i.createElement("div",{className:"col-3"},i.createElement("span",{className:"pointer mr-2",onClick:this.changeLanguage.bind(this,l)},i.createElement("i",{className:"fas fa-pen"})),i.createElement("span",{className:"pointer",onClick:this.removeLanguage.bind(this,l)},i.createElement("i",{className:"fas fa-times-circle text-danger"}))))}))),t)return e&&(_=_.slice(0,e)),_.join(", ");let f=[];for(let e in this.PROFICIENCIES)f.push(i.createElement("option",{key:e,value:e},this.PROFICIENCIES[e]));return i.createElement("div",null,i.createElement("div",{className:"table-responsive"},g.length>0?i.createElement("div",{className:"container-fluid mb-3"},i.createElement("div",{className:"row font-weight-bold border-bottom pb-2"},i.createElement("div",{className:"col-5"},(0,s._)("Language")),i.createElement("div",{className:"col-5"},(0,s._)("Proficiency")),i.createElement("div",{className:"col-3"})),g):""),u?i.createElement("div",null,i.createElement("div",{className:"form-row align-items-center"},i.createElement("div",{className:"col-5"},i.createElement(l.Dropdown,{allowSearch:!0,label:(0,s._)("Language"),labelClass:"text-secondary",selectedId:m,onSelect:this.onChange.bind(this,"selectedLanguage"),selections:this.selectableLanguages})),i.createElement("div",{className:"col-4"},i.createElement("select",{className:"custom-select",value:d,onChange:this.onChange.bind(this,"selectedProficiency")},f)),i.createElement("div",{className:"col-3"},i.createElement("button",{className:"btn btn-primary"+(m?"":" disabled"),onClick:m?this.addLanguage.bind(this):null},h))),n?i.createElement("button",{className:"btn btn-primary mt-3",onClick:this.saveLanguages.bind(this)},(0,s._)("Update Languages")):""):"")}}},94945:(e,t,a)=>{a.d(t,{Z:()=>s});var i=a(67294),l=a(91036),n=a.n(l);class s extends i.Component{render(){let{str:e,className:t}=this.props;return e?(e=n()(e,{allowedTags:["div","span","img","br","center"],allowedAttributes:{div:["style","title"],span:["style"],img:["width","height","src"]}}),i.createElement("div",{className:"safe-html "+(t||""),dangerouslySetInnerHTML:{__html:e}})):""}}},98004:(e,t,a)=>{a.d(t,{Z:()=>s});var i=a(67294),l=a(84766),n=a(96655);class s extends i.Component{constructor(e,t){super(e,t),this.ref=i.createRef()}get data(){let{options:e,value:t,placeholder:a}=this.props,i=[];Array.isArray(t)?t.map(((e,t)=>{i[e.value]=e.value})):"string"==typeof t&&(i[t]=t);let l=[];return l.push({placeholder:!0,text:a}),e.map(((e,t)=>{l.push({value:e.value,text:e.label||e.text,selected:!!i[e.value]})})),l}onChange(e){let{options:t,value:a}=this.props;if(this.props.onChange){let e=this.select.selected(),a=e=>{let a=null;return t.map(((t,i)=>{t.value==e&&(a=Object.assign({},t),a.text=t.label||t.text)})),a};if(Array.isArray(e)){let t=[];e.map(((e,i)=>{let l=a(e);l&&t.push(l)})),this.props.onChange(t)}else{let t=a(e);this.props.onChange(t)}}}componentDidMount(){l.ScriptLoader.load(this,n._8D),l.ScriptLoader.load(this,n._Yb,{htmlElem:"link"})}componentWillUnmount(){this.select&&(this.select.destroy(),delete this.select)}onScriptLoaded(e){e==n._8D&&this.createSlimSelect()}onScriptError(e){l.Log.error("Script loading error: "+e)}createSlimSelect(){if(this.select)return;let{placeholder:e,isMulti:t,limit:a}=this.props;this.select=new SlimSelect({data:this.data,select:this.ref.current,onChange:this.onChange.bind(this),placeholder:e||"",css:"background-color: #999",limit:t?a||5:1,hideSelectedOption:!0})}componentDidUpdate(e){let t=this.props.value;t&&this.valuesEqual(t,e.value)&&this.select&&this.select.setData(this.data)}valuesEqual(e,t){if(Array.isArray(e)&&Array.isArray(t)){let a=e.length==t.length;for(let i=0;a&&i<e.length;i++)a=a&&e[i].value==t[i];return a}return e===t}render(){let{className:e,options:t,value:a,placeholder:l,isMulti:n}=this.props;return this.select&&this.select.setData(this.data),i.createElement("select",{ref:this.ref,className:e||"",multiple:n||!1})}}},36839:(e,t,a)=>{a.d(t,{Z:()=>g});var i=a(67294),l=a(84766),n=a(46858),s=(a(42741),a(39927)),r=a(12031),o=a(58445),c=a(1055),m=a(78314),d=a(84454),p=a(96655);const h="step_account",u="step_verification";class g extends i.Component{constructor(e,t){super(e,t),this.state={step:h,verify_option:""},this._onChangeProfile=this._onChangeProfile.bind(this)}componentDidMount(){m.Z.onChange(this._onChangeProfile),m.Z.checkCardAdded(),n.Z.reloadPopover(),n.Z.scrollTop()}componentDidUpdate(){n.Z.reloadPopover()}componentWillUnmount(){m.Z.offChange(this._onChangeProfile)}_onChangeProfile(){this.forceUpdate(),m.Z.isQualified&&this.props.onComplete()}startVerification(){this.setState({step:u}),n.Z.scrollTop()}completeVerification(){this.props.onComplete()}onSelectCard(e){}onChangeVerifyOption(e){this.setState({verify_option:e})}get cardPaymentProvider(){let e="",t=d.Z.getMethods();for(let a of t)if("card"==a.id&&a.available){e=a.provider;break}return l.Log.debug(e,"Card payment provider"),e}requireID(e){p.tVC,p.YJJ,p.gav;let t=!1;return e&&e.category&&(e.category==p.tVC?t=!0:e.category!=p.YJJ||!0!==e.digital&&"true"!=e.digital||(t=!0)),t}render(){let{listing:e}=this.props,{step:t,verify_option:a}=this.state;this.account_valid=!(!m.Z.isVerified||!m.Z.profile.email),this.verification_valid=m.Z.isQualified;let l=t==h?"badge-warning":"badge-success",d=t==h?1:"✓",p=t==u?"badge-warning":"badge-inverse",g="";if(t==u){let t=this.requireID(e),l=i.createElement("span",null,t?(0,c._)("You must submit your government issued identity information to be eligible as a seller."):"You can choose to submit your government issued identity information to be eligible as a seller."),n=[{verify_option:"identity",label:(0,c._)("Submit identity verification"),sub:l}];t||n.push({verify_option:"card",label:(0,c._)("Add a credit card"),sub:(0,c._)("You can choose to add a credit card to be eligible as a seller. We will not charge your card.")}),g=n.map(((e,t)=>i.createElement("div",{className:"row pointer info-table",key:t,onClick:this.onChangeVerifyOption.bind(this,e.verify_option),style:{padding:"10px 0",margin:"15px -15px"}},i.createElement("div",{className:"col-2 text-right"},i.createElement("input",{type:"radio",name:e.verify_option,value:e.verify_option,defaultChecked:a==e.verify_option,style:{marginTop:"20%"}})),i.createElement("div",{className:"col-10"},i.createElement("h4",null,e.label),i.createElement("small",{className:"text-muted"},e.sub))))),n.length>1&&g.splice(1,0,i.createElement("h4",{key:"or"},(0,c._)("OR")))}let _="";if(t==u){let e="<b>"+(0,c._)("What is this verification?")+"</b><p>"+(0,c._)("Online sales of digital items and services can easily become targets for fraud and scam activities if customer safety and regulations are neglected. By ensuring all sellers are verified, Gameflip adds yet another layer of protection to our secure environment.")+"</p><b>"+(0,c._)("How is my information kept?")+"</b><p>"+(0,c._)("Your information is securely encrypted on our server and will only be used to verify your account, and for processing payments and payouts.")+"</p>";_=n.Z.popover({content:e,className:"align-top"})}return i.createElement("div",{id:"edit_item",className:"screen container seller-verification-section"},i.createElement("h1",null,(0,c._)("Become a Seller")),i.createElement("div",{className:"edit-item inner-content"},i.createElement("div",{className:"container-fluid"},i.createElement("div",null,i.createElement("h4",{className:"float-left",style:{marginRight:"25px"}},i.createElement("span",{className:"badge badge-circle "+l},d)," ",(0,c._)("Your Account")),i.createElement("h4",{className:"float-left"},i.createElement("span",{className:"badge badge-circle "+p},"2")," ",(0,c._)("Verification")),i.createElement("hr",{className:"clear"})),t==h?i.createElement("div",null,i.createElement("h2",null,(0,c._)("Profile")),i.createElement("p",{className:"text-muted"},(0,c._)("A complete and accurate profile gives you more credibility for potential buyers")),i.createElement(s.Z,null),i.createElement("div",{className:"row text-right"},i.createElement("div",{className:"col-12"},i.createElement("br",null),i.createElement("button",{className:"btn btn-primary"+(this.account_valid?"":" disabled"),onClick:this.account_valid?this.startVerification.bind(this):null},(0,c._)("Next"))))):"",t==u?i.createElement("div",null,i.createElement("div",null,i.createElement("h2",{className:"d-inline"},(0,c._)("Verification"))," ",_),i.createElement("div",{className:"container-fluid"},g),i.createElement("hr",null),"identity"==a?i.createElement(r.Z,null):"","card"==a?i.createElement(o.Z,{hide_3ds:!0,provider:this.cardPaymentProvider,onSelect:this.onSelectCard.bind(this)}):"",i.createElement("div",{className:"row text-right"},i.createElement("div",{className:"col-12"},i.createElement("br",null),i.createElement("button",{className:"btn btn-primary"+(this.verification_valid?"":" disabled"),onClick:this.verification_valid?this.completeVerification.bind(this):null},(0,c._)("Next"))))):""),i.createElement("hr",null)))}}},86484:(e,t,a)=>{a.d(t,{Z:()=>o});var i=a(67294),l=a(98004),n=(a(46858),a(84766)),s=a(58166),r=a(34837);class o extends i.Component{getState(e){let{upc:t,isNFT:a,tags:i,types:l,qty:n}=e;return a&&t?this.loadNFTProps(t):t&&this.loadGameProps(t),{tags:this.parseTags(i),game_props:[]}}constructor(e,t){super(e,t),this.state=this.getState(this.props)}componentDidUpdate(e,t){JSON.stringify(this.props)!==JSON.stringify(e)&&this.setState(this.getState(this.props))}loadGameProps(e){let t=e.includes(",")?e.split(",")[0]:e;s.Z.getGameCustomProperties(t,(e=>{this.setState({game_props:e})}),(e=>{n.Log.error(e,"Cannot load game properties")}))}loadNFTProps(e){s.Z.getNFTCustomProperties(e,(e=>{this.setState({game_props:e})}),(e=>{n.Log.error(e,"Cannot load NFT properties")}))}convertChoiceList(e){return e?e.map((e=>Array.isArray(e)?{value:e[0],label:e[1]}:{value:e,label:e})):[]}resetFilters(){this.setState({tags:{}}),this.props.onSelect&&this.props.onSelect("")}parseTags(e){if(!e)return{};let t={};e.split(/[\^,]/).forEach((e=>{t[e]=!0}));let a={};for(let e in t){let t=e.split(":");if(t.length<2)continue;let i=t[0].trim(),l=t[1].trim();void 0===a[i]&&(a[i]=[]),a[i].push({value:l,label:l})}return a}hasTagValues(e,t,a){let i={},l=e[t];if(l&&l.length){for(let e of l)i[e.value]=!0;if(Array.isArray(a)){for(let e of a)if(i[e])return!0}else if(i[a])return!0}return!1}mapTagValues(e,t){let a=e[t],i={};if(Array.isArray(a))for(let e of a)i[e.value]=!0;return i}deleteTagValue(e,t,a){if(Array.isArray(e[t])){let i=e[t].length;for(;i--;)e[t][i].value==a&&e[t].splice(i,1)}}formatSearch(e){let t="";for(let a in e){let i=e[a];for(let e=0;e<i.length;e++)t+=a+": "+i[e].value,e+1<i.length&&(t+=",");i.length&&(t+="^")}return t.length>1&&(t=t.substring(0,t.length-1)),t}onSelectTags(e,t){n.Log.debug(t,"Selected tags"),0!=t.length&&null!=t[e]||delete t[e];let a=this.formatSearch(t);this.props.onSelect&&this.props.onSelect(a),this.setState({tags:t})}gameProps(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=this.state.game_props||[];if(!e)return t;let a={};return t.forEach((e=>{a[e.name]=e})),a}getFilterInfo(e){let{types:t,qty:a,upc:i}=this.props;if(t||a){let e=[];return t&&e.push({key:"type",label:"Type"}),a&&e.push({key:"quantity",label:"Qty"}),e}return i?this.gameProps().map((t=>{let{name:a,label:i,dependencies:l}=t;if(!l)return{key:a,label:i};if(!e)return null;let n=!1;for(let t in e){let a=e[t];if(l[t]&&l[t].indexOf(a)>=0){n=!0;break}}return n?{key:a,label:i}:null})).filter((e=>e)):[]}getFilterList(e){let{types:t,qty:a,upc:i}=this.props,l=t?this.convertChoiceList(t):null,n=a?this.convertChoiceList(a):null;if(l||n){switch(e){case"type":return l;case"quantity":return n}return[]}if(!i)return[];let s=this.gameProps(!0),{values:r}=s[e]||{};return this.convertChoiceList(r)}render(){let{tags:e}=this.state,t=[];return(this.getFilterInfo(e)||[]).map(((a,l)=>{let s=this.getFilterList(a.key);s&&0!=s.length?t.push(i.createElement(c,{key:l,choices:s,query:e,name:a.key,label:a.label,onSelect:this.onSelectTags.bind(this)})):n.Log.error(a.key,"Empty filtering list")})),t.length<=0?i.createElement("div",null):i.createElement("div",{className:"tag-filter mt-3 ml-3 mr-3 d-sm-inline-block d-md-inline-flex flex-wrap"},t,i.createElement("a",{className:"btn-link mx-2",onClick:this.resetFilters.bind(this)},"Clear"))}}class c extends i.Component{constructor(e,t){super(e,t)}getChoices(){let{choices:e}=this.props,t=[];return e&&Array.isArray(e)&&e.map(((e,a)=>{t.push(e)})),t}onSelect(e,t){let{query:a,name:i}=this.props;n.Log.debug(e,"Select "+i);let l=!1;if(Array.isArray(e))for(let t of e)t.value&&"any"==t.value.toLowerCase()&&(a[i]=[],l=!0);l||(a[i]=e),this.props.onSelect&&this.props.onSelect(i,a)}render(){let e=this.getChoices(),t=this.props.query||{},a=this.props.name,n=this.props.label,s=t[a]||[],o={placeholder:(e,t)=>(r.Z.isDark&&(e.color="#e0e0e0"),e),menu:(e,t)=>(e.zIndex=1e3,e)};return i.createElement(l.Z,{isMulti:!0,className:"search-filter-tag",styles:o,placeholder:n,value:s,onChange:this.onSelect.bind(this),options:e})}}},86164:(e,t,a)=>{a.d(t,{Z:()=>r});var i=a(67294),l=a(46858),n=a(84766),s=a(98004);class r extends i.Component{getTag(e){return this.props.getTag?this.props.getTag(e):(n.Log.error(e,"Cannot get tag"),null)}setTag(e,t){return this.props.setTag?this.props.setTag(e,t):(n.Log.error(e,"Cannot get tag"),null)}changeTagValue(e,t,a){let i="";if(a&&(a.target?i=a.target.value:a.value&&(i=a.value)),n.Log.debug(t,"Changing tag ["+t+"] to value: "+i),n.Log.debug(e,"Changing tag input type"),!i||"multiple"!=e&&"checkbox"!=e)this.setTag(t,i);else{let e=this.getTag(t)||[];if("string"==typeof e){e=e.split(",");for(let t=0;t<e.length;t++)e[t]=e[t].trim()}let a=e.indexOf(i);a>=0?e.splice(a,1):e.push(i),this.setTag(t,e)}}cannotModifyTag(e){let t=this.props.unmodifiables;if(t){if("string"==typeof t&&t==e)return!0;if(Array.isArray(t))return t.includes(e)}return!1}render(){let e=this.props.meta;if(l.Z.isEmpty(e))return"";let t=e.map(((e,t)=>{let{name:a,label:r,placeholder:o,input:c,values:m,tip:d}=e,p=!("required"in e)||e.required,h=this.getTag(a)||"",u=e.dependencies||null;if(this.cannotModifyTag(a)&&h)return null;if(u){let e=!1;if(Object.keys(u).map((t=>{let a=this.getTag(t)||"",i=u[t];n.Log.debug(i,"Values in dependency"),i.map((t=>{t==a&&(e=!0)}))})),!e)return n.Log.warn("No dependency match"),i.createElement("span",{key:t})}m||(m=[]);let g=null;switch(c){case"select":case"single":let e=m.map((e=>{if(l.Z.isEmpty(e))return null;let t=e,a=e;return Array.isArray(e)&&(t=e[0],a=e[1]),{value:t,label:a}})).filter((e=>e));g=i.createElement(s.Z,{isMulti:!1,className:"tag-form-select form-control"+(p&&!h?" is-invalid":""),name:a,placeholder:o||r,value:h,onChange:this.changeTagValue.bind(this,c,a),options:e});break;case"checkbox":case"multiple":let t=h||[],n=m.length>5,d=m.map(((e,l)=>i.createElement("div",{key:l,className:(n?"col-5":"mr-2")+" custom-control custom-checkbox"},i.createElement("input",{className:"custom-control-input"+(p&&!h?" is-invalid":""),type:"checkbox",id:a+l,onChange:this.changeTagValue.bind(this,c,a),checked:-1!==t.indexOf(e),value:e}),i.createElement("label",{className:"custom-control-label",htmlFor:a+l}," ",e," "))));g=i.createElement("div",{className:"row"},d);break;default:g=i.createElement("input",{className:"form-control"+(p&&!h?" is-invalid":""),type:"text",placeholder:o||r,value:h,onChange:this.changeTagValue.bind(this,c,a)})}return i.createElement("div",{className:"row p-2",key:t},i.createElement("div",{className:"col-3 col-md-2 text-right"},i.createElement("p",null,r)),i.createElement("div",{className:"checkbox"==c||"multiple"==c?"col-9 col-md-10":"col-9 col-md-4"},g),d?i.createElement("p",{className:"col-12 col-md-6 help-block"},d):"")}));return i.createElement("div",null,t)}}},18959:(e,t,a)=>{a.r(t),a.d(t,{default:()=>ve});var i=a(67294),l=a(50743),n=a.n(l),s=a(88601),r=a(47675),o=a(84766),c=a(46858),m=a(42741),d=a(58166),p=a(35255),h=a(40872),u=(a(17515),a(78314)),g=a(47936);const _="show_similar";class f extends o.EventHandler{constructor(){super(),this._item={}}emitShowSimilar(){this.emit(_)}onShowSimilar(e){this.on(_,e)}offShowSimilar(e){this.off(_,e)}set item(e){this._item=e}get item(){return this._item}}const E=new f;var b=a(16778),v=a(1055),y=a(64927),N=a(86164),w=a(58790),C=a(68091);class S extends i.Component{getState(){return{item:E.item}}constructor(e,t){super(e,t),this.state=this.getState(),this._onShow=this._onShow.bind(this),this.should_show=!1}componentDidMount(){E.onShowSimilar(this._onShow)}componentWillUnmount(){E.offShowSimilar(this._onShow)}componentDidUpdate(){this.should_show&&(this.should_show=!1,setTimeout((()=>{$("#similar-dialog").is(":visible")||$("#similar-dialog").modal("show")}),200))}_onShow(){this.should_show=!0,this.setState(this.getState())}render(){if(!this.should_show)return!1;let e=this.state.item,t=w.Z.getQuery(e);return i.createElement(o.Dialog,{id:"similar-dialog",className:"fade",title:(0,v._)("Price Comparison"),size:"lg",content:i.createElement("div",{className:"container-fluid"},i.createElement("div",{className:"row text"},(0,v._)("Listings below may not be exact match in item and condition. You must review and compare carefully.")),i.createElement("br",null),i.createElement(C.Z,{query:t,nolink:!0,view:"list"}))})}}var k=a(95835),x=a(96637),Z=a(36230),D=a(76100),I=a.n(D),P=a(96655);const L="change_fee",T="next_page",A="error",F="preparing",U="start",M="receive_pending",V="received",R="listed",O="trade_hold",B={preparing:"Preparing",start:"Sending Trade Offer",start_transfer:"Creating Listing",receive_pending:"Waiting for Trade Confirmation",received:"Listing Items",listed:"Listing Completed",steam_escrow:"Steam's holding Items",trade_hold:"Items On Hold"};class q extends o.EventHandler{constructor(){super(),this.reset()}reset(){this._bulk={},this._items={},this._pool_items={},this._digital_deliverable="",this._error="",this._accept_currency=P.qBs,this._final_state=P.IB,this._last_prices={},this.stopTimer(),this.stopQuoteTimer()}emitChangeFee(){this.emit(L)}onChangeFee(e){this.on(L,e)}offChangeFee(e){this.off(L,e)}emitNextPage(){this.emit(T)}onNextPage(e){this.on(T,e)}offNextPage(e){this.off(T,e)}emitError(){this.emit(A)}onError(e){this.on(A,e)}offError(e){this.off(A,e)}get bulk(){return this._bulk}get id(){return this._bulk.id}get offer_id(){return this._bulk.offer_id}get offer_key(){return this._bulk.offer_key}get held_until(){return this._bulk.held_until?c.Z.timeToDateString(this._bulk.held_until):"next 7 days"}get status(){return this._bulk.status||F}set status(e){this._bulk.status=e,this.emitChange()}get items(){return this._items}set items(e){this._items=e}setItem(e){let t=e.steam_properties;t&&t.id&&(this._items[t.id]=e)}get digital_deliverable(){return this._digital_deliverable}set digital_deliverable(e){this._digital_deliverable=e}get error(){return this._error}set error(e){this._error=e,this.emitError(),this.stopTimer(),this.isDone||this.startQuoteTimer()}get accept_currency(){return this._accept_currency||P.qBs}set accept_currency(e){this._accept_currency=e}get final_state(){return this._final_state||P.f1I}set final_state(e){this._final_state=e}get isDone(){return[R,O].indexOf(this.status)>=0}startTimer(){c.Z.isBrowser&&(this.stopTimer(),this._timer=setInterval(this.processBulk.bind(this),6e3),o.Log.debug("SteamBulkStore: startTimer"))}stopTimer(){this._timer&&(clearInterval(this._timer),this._timer=null,o.Log.debug("SteamBulkStore: stopTimer")),this.status=F}start(){o.Log.debug(this._items,"SteamBulkStore: start. this._items"),c.Z.isEmpty(this._items)||(this._error="",this.emitError(),this._digital_deliverable==P.hAy?(this.processBulk(),this.startTimer()):this.postItemsTransfer())}processBulk(){switch(this.status){case F:this.postItems();break;case U:case M:case V:this.checkStatus();break;case O:case R:this.emitNextPage()}}postItems(){m.Z.postSteamBulk((e=>{this._bulk=e,this.emitChange();let t=[];for(let e in this._items){let a=this._items[e],i=a.steam_properties;if(!i||!i.id||!i.appid)return!1;let l={id:i.id,appid:i.appid,contextid:2,amount:1,price:Math.round(a.price),market_hash_name:i.market_hash_name||i.name};i.inspect_url&&(l.inspect_url=i.inspect_url),t.push(l)}if(c.Z.isEmpty(t))return void(this.error="Steam items unvailable");let a={listing_status:this.final_state,items:t};c.Z.flpEnabled&&(a.accept_currency=this.accept_currency),m.Z.putSteamBulk(e.id,a,(e=>{this._bulk=e,this.emitChange()}),(e=>{o.Log.error(e,"SteamBulkStore: putSteamBulk: error"),this.error=e.message||"Put steam bulk failed."}))}),(e=>{o.Log.error(e,"SteamBulkStore: postSteamBulk: error"),this.error=e.message||"Post steam bulk failed."}))}checkStatus(){this.id&&m.Z.putSteamBulk(this.id,null,(e=>{if([M,V].indexOf(this.status)>=0&&e.status==U&&(e.status=F,this.error="Trade was canceled. Please retry."),e.status==V&&e.listings){let t={};e.listings.map((e=>{let a=e.steam_properties,i=a.market_hash_name||a.name,l=t[i]||[];l.push(e),t[i]=l}));for(let e in this._items){let a=this._items[e],i=a.steam_properties,l=i.market_hash_name||i.name;if(i&&l){let e=t[l];if(e&&e.length>0){let t=e.shift();a.id=t.id,a.status=t.status,a.digital_deliverable=P.hAy,a.escrow_status=P.X8_,b.Z.setItem(a)}}}o.Log.debug(this._items,"this._items")}this._bulk=e,this.emitChange()}),(e=>{o.Log.error(e,"SteamBulkStore: checkStatus: error"),this._error=e.message,this.emitError()}))}postItemsTransfer(){this._pool_items=c.Z.clone(this._items),this._bulk.status="start_transfer",this.emitChange(),this.postListingTransfer()}postListingTransfer(){let e="",t=null;for(let a in this._pool_items){e=a,t=this._pool_items[e];break}e&&t?(delete this._pool_items[e],t.digital_deliverable=P.tFI,t.shipping_within_days=1,c.Z.flpEnabled&&(t.accept_currency=this.accept_currency),m.Z.postListing(t,(t=>{b.Z.setItem(t);let a=[{op:"replace",path:"/status",value:this.final_state}];m.Z.patchListing(t.id,a,(t=>{b.Z.setItem(t),this._items[e]&&(this._items[e].status=this.final_state,this.emitChange())}),(e=>{})),this.postListingTransfer()}),(e=>{this._error=e.message,this.emitError(),this.postListingTransfer()}))):this.emitNextPage()}startQuoteTimer(){c.Z.isBrowser&&(this.stopQuoteTimer(),this.updateLastPrices(),this._quote_timer=setInterval((()=>{this.updateQuotes()}),1e3))}stopQuoteTimer(){this._quote_timer&&(clearInterval(this._quote_timer),this._quote_timer=null)}updateLastPrices(){for(let e in this._items){let t=this._items[e];this._last_prices[e]=t.price}}updateQuotes(){let e=[];for(let t in this._items){let a=this._items[t],i=a.price,l=this._last_prices[t];i&&i!=l&&c.Z.isValidPrice(i)&&(this._last_prices[t]=i,e.push(a))}this.getQuotes(e)}getQuotes(e){if(c.Z.isEmpty(e))return;let t=[];e.map((e=>{let a=e.steam_properties;a&&a.id&&a.appid&&t.push({name:e.name,category:P.SkU,platform:"steam",price:e.price,upc:e.upc,digital:!0,digital_region:"none",digital_deliverable:P.hAy,shipping_predefined_package:"None",shipping_paid_by:"seller",shipping_within_days:0,steam_properties:{appid:a.appid,id:a.id}})})),m.Z.postSellerQuote(t,(t=>{c.Z.isEmpty(t)||(t.map(((t,a)=>{if(a>=e.length)return;let i=e[a].steam_properties;if(!i||!i.id||!i.appid)return;let l=t.cost,n=t.subscription||null;for(let e in l){let t=l[e]||0;this._items[i.id][e]=t}n&&(this._items[i.id].subscription=n)})),this.emitChangeFee())}),(e=>{}))}done(){this.reset(),c.Z.transitionTo("listings")}}const G=new q,Y=["384801282","1432174707","720268538","926978479","1690096482","1923037342","527635071","1293508920","991959905","469431148","384801285","520025252","384801319","638240019","1544067968"];class W extends o.EventHandler{constructor(){super(),this._prices={},this.reset()}reset(){this._steam_id=null,this._game_id=null,this._inventory=[],this._public=!1,this._floats={},this._error=""}get steamId(){return this._steam_id}get gameId(){return this._game_id}get inventory(){return this._inventory}get isPublic(){return this._public}get isEmpty(){return 0==this._inventory.length}get floats(){return this._floats}get error(){return this._error}isNoSell(e,t){return 730==t&&-1!==Y.indexOf(e)}loadInventory(e,t){e&&t&&(this.reset(),this._steam_id=e,this._game_id=t,d.Z.getSteamInventory(e,t,(e=>{if(o.Log.debug(e,"SteamSection.loadInventory: result"),e.success&&c.Z.notEmpty(e.rgInventory)){let a=e.rgInventory,i=e.rgDescriptions,l=[];for(let e in a){let n=a[e],s=c.Z.clone(i[n.classid+"_"+n.instanceid]);s.id=e,s.pos=n.pos,s.nosell=this.isNoSell(n.classid,t)||s.missing,!s.nosell&&s.tradable&&(l.push(s),this.loadSuggestPrice(s))}this._inventory=l.length>0?c.Z.sortArrayBy(l,"pos",1):l,this._public=!0}else e.Error?(this._public=!1,this._inventory=[]):(this._public=!0,this._inventory=[]);this.emitChange()}),(e=>{o.Log.error(e,"SteamSection.loadInventory: error"),this._error=(e?e.message:"Cannot load inventory")+" If error continues, try re-creating your Trade URL in Steam Inventory and updating the URL in Gameflip Settings",this.emitChange()})))}refresh(){this.loadInventory(this._steam_id,this._game_id)}loadSuggestPrice(e){let{appid:t,market_hash_name:a}=e||{};if(!t||!a)return;let i=t+"-"+a,l=t=>{e.suggest_price=t,this.emitChange()},n=this._prices[i];if(n)return l(n);d.Z.getSteamPrice(t,a,(e=>{let t=c.Z.lowestPrice(e.lowest_price,e.median_price);t>0&&(t*=100),this._prices[i]=t,l(t)}),(e=>{}))}}const z=new W;class Q extends i.Component{constructor(e,t){super(e,t),this.game=this.props.game||{},this.selected_count=0,this.state={page:1,keyword:""}}onSelect(e,t){this.props.onSelect&&this.props.onSelect(e)}onSelectAll(e){this.props.onSelectAll&&this.props.onSelectAll(e)}onClearAll(e){this.props.onClearAll&&this.props.onClearAll(e)}onChangeKeyword(e){this.setState({keyword:e.target.value,page:1})}onClickPager(e,t){this.setState({page:e})}imageUrl(e){let t=e.icon_url||"";return t&&-1===t.indexOf("http")&&this.game.steam_app_id?P.uJ0+t+"/160fx160f":t}render(){let e=this.props.inventory||[],t=this.props.per_page||30,a=this.props.selections||{},l=this.props.mode||"multi",n=this.props.title||(0,v._)("Your Inventory"),s=[],r=this.state.page||1,o=this.state.keyword?this.state.keyword.trim().toLowerCase():"";this.selected_count=c.Z.count(a),o&&(e=e.filter(((e,t)=>(e.market_name||e.name).toLowerCase().indexOf(o)>=0)));let m=t*(r-1),d=t*r;d>e.length&&(d=e.length);let p=[];for(let t=m;t<d;t++){let l=e[t];a[l.id],this.game.steam_app_id&&(!l.tradable||l.nosell)||s.push(l),p.push(i.createElement("div",{className:"col-3 col-md-2 steam-item",key:t},i.createElement(k.Z,{className:"pointer rounded border img-fluid bg_3d",src:this.imageUrl(l),onClick:this.onSelect.bind(this,l),dim:200,aspectRatio:1}),l.suggest_price?i.createElement("div",{className:"steam-item-price"},"$",(l.suggest_price/100).toFixed(2)):"",i.createElement("p",{className:"steam-item-name"},l.market_name||l.name)))}let h="";if(e.length>t){let t=r>1,a=d<e.length;h=i.createElement("div",{className:"mb-3"},i.createElement("nav",null,i.createElement("ul",{className:"pager"},i.createElement("li",{onClick:t?this.onClickPager.bind(this,r-1):null},i.createElement("span",{className:"btn btn-primary"+(t?"":" disabled")},i.createElement("span",{className:"fa fa-chevron-left","aria-hidden":"true"})," ",(0,v._)("Previous"))),i.createElement("li",{onClick:a?this.onClickPager.bind(this,r+1):null},i.createElement("span",{className:"btn btn-primary"+(a?"":" disabled")},(0,v._)("Next")," ",i.createElement("span",{className:"fa fa-chevron-right","aria-hidden":"true"}))))))}return i.createElement("div",{className:"edit-item-steam-inventory section"},i.createElement("h2",null,i.createElement("span",null,n)),"multi"==l?i.createElement("div",{className:"row"},i.createElement("div",{className:"col-12 col-md-7 mb-2"},i.createElement("input",{className:"form-control",value:this.state.keyword,onChange:this.onChangeKeyword.bind(this),type:"text",placeholder:(0,v._)("Type to search items")})),i.createElement("div",{className:"col-12 col-md-5 mb-2 btn-toolbar justify-content-between"},i.createElement("div",{className:"input-group"},i.createElement("span",{className:"input-group-prepend"},i.createElement("span",{className:"input-group-text"},this.selected_count)),i.createElement("div",{className:"input-group-append"},i.createElement("button",{type:"button",className:"btn btn-outline-secondary dropdown-toggle","data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false"},(0,v._)("Select All")," ",i.createElement("span",{className:"caret"})),i.createElement("ul",{className:"dropdown-menu"},i.createElement("li",null,i.createElement("a",{onClick:this.onSelectAll.bind(this,s)},(0,v._)("Select All in View"))),i.createElement("li",null,i.createElement("a",{onClick:this.onSelectAll.bind(this,e)},(0,v._)("Select All Inventory")))))),this.selected_count>0?i.createElement("div",{className:"input-group"},i.createElement("button",{className:"btn btn-outline-secondary",type:"button",onClick:this.onClearAll.bind(this,e)},(0,v._)("Clear"))):"")):i.createElement("div",{className:"row"},i.createElement("input",{className:"form-control",value:this.state.keyword,onChange:this.onChangeKeyword.bind(this),type:"text",placeholder:(0,v._)("Type to search items")})),i.createElement("div",{className:"row"},p),h,i.createElement("div",{className:"row"},i.createElement("div",{className:"col-12 small text-muted"},"Some icons powered by ",i.createElement("a",{className:"note",target:"_blank",href:"https://game-icons.net/"},"game-icons.net"))))}}var J=a(11292),j=a(94945);class H extends i.Component{constructor(e,t){super(e,t),this.state={photo:null}}onRemove(){let e=this.props.item?this.props.item.id:"";this.props.onRemove&&this.props.onRemove(e)}steamImageUrl(e,t){return t="s"==t?"/160fx160f":"/320fx320f",e?P.uJ0+e+t:null}imageUrl(e,t){return e.steam_properties&&e.steam_properties.icon_url?this.steamImageUrl(e.steam_properties.icon_url,t):e.icon_url?e.icon_url:null}itemName(e){return e.market_name||e.name?e.market_name||e.name:e.steam_properties&&(e.steam_properties.market_name||e.steam_properties.name)?e.steam_properties.market_name||e.steam_properties.name:"N/A"}itemProp(e,t){return e[t]?e[t]:e.steam_properties&&e.steam_properties[t]?e.steam_properties[t]:""}onDropImageFile(e){o.Log.debug(e,"onDropImageFile files");let t=e[0];c.Z.notValidImage(t)||(this.setState({photo:t}),this.props.onReplacePhoto&&this.props.onReplacePhoto(t))}render(){let e=this.props.item||null;if(!e)return i.createElement("div",null);let t=i.createElement(j.Z,{className:"sticker-info",str:this.itemProp(e,"sticker")||""}),a=this.props.float_number||this.itemProp(e,"float"),l=this.props.suggestPrice||this.itemProp(e,"steam_price_formatted"),r=this.props.mode||"full",o=this.props.lowest_price,m=e.tags||[],d="";m.map(((e,t)=>{t>0&&(d+=", "),d+=c.Z.capitalize(e)}));let p=this.state.photo||null,h=p?p.preview:"summary"==r?this.imageUrl(e,"s"):this.imageUrl(e),u="";if(o&&e.steam_properties&&e.steam_properties.gf_lowest_price&&(u=i.createElement("p",{className:"text-info"},(0,v._)("Lowest Price"),": ",i.createElement("b",null,n().formatMoney(e.steam_properties.gf_lowest_price/100)))),"summary"==r)return i.createElement("div",{className:"item-preview"},i.createElement("div",{className:"media"},i.createElement("div",{className:"mr-2"},i.createElement("img",{className:"media-object img-fluid thumbnail bg_3d",src:h}),i.createElement(J.Z,{float:a})),i.createElement("div",{className:"media-body"},i.createElement("p",{className:"media-heading"},this.itemName(e)),l?i.createElement("p",{className:"text-danger"},(0,v._)("Suggested Price"),": ",i.createElement("b",null,l)):"",u,this.itemProp(e,"tradable")?"":i.createElement("p",{className:"text-danger"},i.createElement("b",null,(0,v._)("Untradable"))),this.itemProp(e,"nosell")?i.createElement("p",{className:"text-danger"},i.createElement("b",null,(0,v._)("Not Sellable"))):""),this.props.onRemove?i.createElement("span",{className:"remove-icon text-primary fa fa-times pointer",onClick:this.onRemove.bind(this)}):""),t);{let n=this.props.onReplacePhoto?i.createElement(s.Z,{className:"dropzone square-content text-center pointer",onDrop:this.onDropImageFile.bind(this),multiple:!1,accept:"image/*"},i.createElement("center",null,i.createElement("img",{className:"img-fluid thumbnail bg_3d",src:h}),i.createElement("div",{className:"well"},i.createElement("p",null,(0,v._)("Want your own image?<br/>Click or Drag & Drop it here!",{__html:!0}))))):i.createElement("center",null,i.createElement("img",{className:"img-fluid thumbnail bg_3d",src:h}));return i.createElement("div",{className:"item-preview"},n,i.createElement(J.Z,{float:a}),i.createElement("h3",null,i.createElement("b",null,this.itemName(e))),this.itemProp(e,"tradable")?"":i.createElement("p",{className:"text-danger"},i.createElement("b",null,(0,v._)("Untradable"))),this.itemProp(e,"nosell")?i.createElement("p",{className:"text-danger"},i.createElement("b",null,(0,v._)("Not Sellable"))):"",l?i.createElement("p",{className:"text-danger"},(0,v._)("Suggested Price"),": ",i.createElement("b",null,l)):"",u,i.createElement("p",null,c.Z.replaceLineBreak(e.description)),i.createElement("p",null,d),t)}}}const K="suggested_price",X="lowest_price";class ee extends i.Component{constructor(e,t){super(e,t),this.game=this.props.game_info,this.game.id,this.state={steam_id:u.Z.steam_id,steam_trade_url:u.Z.steam_trade_url,is_public:null,is_empty:null,inventory:null,items:{},mode:c.Z.escrowEnabled(this.game)?"multi":"single",list_multiple:!1,digital_deliverable:P.hAy,page:1},this.valid_trade_url=this.state.steam_trade_url,this.valid=!1,this._onChangeProfile=this._onChangeProfile.bind(this),this._onChangeInventory=this._onChangeInventory.bind(this)}componentDidMount(){c.Z.handleTradeUrlTooltip(),u.Z.onChange(this._onChangeProfile),z.onChange(this._onChangeInventory),z.loadInventory(this.state.steam_id,this.game.steam_app_id)}componentWillUnmount(){u.Z.offChange(this._onChangeProfile),z.offChange(this._onChangeInventory)}_onChangeProfile(){let e=u.Z.steam_id,t=u.Z.steam_trade_url,a=(z.inventory,this.props.game_info);z.isEmpty&&e&&z.loadInventory(e,a.steam_app_id),this.setState({steam_id:e,steam_trade_url:t})}_onChangeInventory(){z.error&&c.Z.showDialog({title:(0,v._)("There is an error"),message:z.error,ok:{label:(0,v._)("Retry"),callback:e=>{c.Z.hideDialog(),z.refresh()}}}),this.setState({is_empty:z.isEmpty,is_public:z.isPublic,inventory:z.inventory})}refresh(){z.refresh()}signinSteam(){c.Z.connectSteam((()=>{}),(e=>{c.Z.showErrorDialog(e)}))}acknowledgeSteamGuard(e){z.loadInventory(this.state.steam_id,this.game.steam_app_id)}onChangeTradeUrl(e){this.setState({steam_trade_url:e.target.value.trim()})}saveTradeUrl(e){e.preventDefault();let t=this.state.steam_trade_url?this.state.steam_trade_url.trim():"";if(t&&0===t.indexOf("https://steamcommunity.com/tradeoffer")){let e=[{op:"replace",path:"/steam_trade_url",value:t}];m.Z.patchProfile(e,(e=>{this.valid_trade_url=e.steam_trade_url,u.Z.profile=e}),(e=>{c.Z.showErrorDialog(e)}))}else c.Z.showErrorDialog((0,v._)("Steam Trade URL is not valid. Please correct it and retry."))}onChangeMode(e){o.Log.debug(e.target.value,"Mode value");let t="single"==this.state.mode?"multi":"single";o.Log.debug(t,"Switch to mode & clear items selected"),this.setState({mode:t,items:{}})}selectItem(e){if(!e.tradable||e.nosell)return;let{mode:t,inventory:a}=this.state,i="single"==t?{}:this.state.items,l=this.prepareSteamItem(e);i[l.steam_properties.id]?(o.Log.debug("Item exists in selection, remove it"),delete i[l.steam_properties.id],this.forceUpdate()):(o.Log.debug("Add new item to selection"),i[l.steam_properties.id]=l,this.setState({items:i}),this.loadSteamPrice(e,l,a,i),this.loadGameflipPrice(e,l)),o.Log.debug(i,"Current selection")}deSelectItem(e){let t=this.state.items,a=e.steam_properties||{};a.id&&t[a.id]&&delete t[a.id],this.forceUpdate()}selectMultiItems(e){o.Log.debug("Select all visible items");let t=this.state.items;e&&e.length>0&&e.map(((e,a)=>{e.id&&t[e.id]||e.tradable&&!e.nosell&&this.selectItem(e)}))}clearSelectedItems(e){o.Log.debug("Clearing selected items");let t=this.state.items;e&&e.length>0&&(e.map(((e,a)=>{e.id&&t[e.id]&&delete t[e.id]})),this.forceUpdate())}loadSteamPrice(e,t,a,i){let l=e.market_hash_name||e.name;d.Z.getSteamPrice(e.appid,l,(e=>{let l=c.Z.lowestPrice(e.lowest_price,e.median_price);if(c.Z.isValidSteamPrice(l))t.steam_properties.steam_price=l,t.steam_properties.steam_price_formatted=n().formatMoney(l);else{let e=t.steam_properties.id;delete i[e];for(let t=0;t<a.length;t++)if(a[t].id==e){a.splice(t,1);break}c.Z.showInfoDialog((0,v._)("Items having Suggested Price under ${price_min} were excluded.",{price_min:P.CJR/100}))}this.forceUpdate()}),(e=>{}))}loadGameflipPrice(e,t){let{upc:a,name:i,category:l,platform:n}=t,s={digital:!0,upc:a,category:l,platform:n,status:P.IB,sort:"price:asc"};e.market_hash_name?s.tags="market_hash_name: "+e.market_hash_name:e.name?s.tags="name: "+e.name:s.term=i,m.Z.searchListings(s,(a=>{let i=P.n3Z;a.map((t=>{let a=t.steam_properties;e&&a&&t.price<i&&e.appid==a.appid&&(e.market_hash_name==a.market_hash_name||e.name==a.name)&&(i=t.price)})),i!=P.n3Z&&(t.steam_properties.gf_lowest_price=i,this.forceUpdate())}),(e=>{}))}next(){if(!this.valid)return;let{items:e,mode:t}=this.state;if("single"==t){let t=c.Z.getOne(e);delete t.id,this.props.next&&this.props.next(t)}else"multi"==t&&this.setState({list_multiple:!0})}prepareSteamItem(e){let t=this.state.steam_id,a=c.Z.clone(this.props.item),i=I().listing(e);a.name=i.name,a.description=i.description,a.steam_properties=i.steam_properties;let l=[`name: ${a.name}`];a.steam_properties.market_hash_name&&l.push(`market_hash_name: ${a.steam_properties.market_hash_name}`),c.Z.notEmpty(e.tags)&&e.tags.map((e=>{l.push(e.category_name?e.category_name+": "+e.name:e.name)})),a.tags=l,a.steam_properties.owner_steamid=t,e.nosell&&(a.steam_properties.nosell=e.nosell);let n=z.floats;return n&&n[e.id]&&(a.steam_properties.float=n[e.id]),o.Log.debug(a,"prepareSteamItem: item"),a}onClickPager(e,t){c.Z.scrollTop(),this.setState({page:e})}changeDeliveryMethod(e,t){this.setState({digital_deliverable:e})}render(){if(this.valid_trade_url&&this.state.list_multiple){let{items:e,digital_deliverable:t}=this.state;return i.createElement(te,{upc:this.game.id,items:e,digital_deliverable:t,removeItem:this.deSelectItem.bind(this)})}return this.valid_trade_url&&c.Z.notEmpty(this.state.inventory)?this.renderInventory():this.renderConnect()}renderConnect(){let{steam_id:e,steam_trade_url:t,inventory:a,is_public:l,is_empty:n}=this.state,s="";if(e){let a="";a=null!==l&&null!==n?i.createElement("div",null,i.createElement("div",{className:"row"},i.createElement("div",{className:"col-3 text-right"},i.createElement("h4",null,(0,v._)("Steam Profile Settings"),":")),i.createElement("div",{className:"col-9"},i.createElement("h4",null,l?n?i.createElement("span",{style:{color:"red"}},(0,v._)("Your Steam inventory is empty. Add items to your inventory and refresh.")):i.createElement("span",{style:{color:"green"}},(0,v._)("Ready")):i.createElement("span",{style:{color:"red"}},(0,v._)("Your Steam inventory must be public. Change your setting and refresh."))))),l&&!n?"":i.createElement("div",{className:"row"},i.createElement("button",{className:"btn btn-primary float-right",onClick:this.refresh.bind(this)},(0,v._)("Refresh")))):i.createElement("div",{className:"row steam-guard-acknowledge pointer",onClick:this.acknowledgeSteamGuard.bind(this)},i.createElement("div",{className:"col-2 col-md-1 text-right"},i.createElement("input",{type:"checkbox",onChange:this.acknowledgeSteamGuard.bind(this),value:""})),i.createElement("div",{className:"col-10 col-md-11"},i.createElement("span",null,(0,v._)("I have enabled Steam Guard Mobile Authenticator for my Steam account")," (",i.createElement("a",{href:"https://support.steampowered.com/kb_article.php?ref=4440-RTUI-9218",target:"_blank",onClick:e=>{e.stopPropagation()}},(0,v._)("view instruction")),"). ",(0,v._)("I understand that without Steam Guard mobile enabled, Steam will escrow my item and I may lose the sale for failure to deliver the item timely.")))),s=i.createElement("div",{className:"edit-item-steam section"},i.createElement("h2",null,i.createElement("span",null,(0,v._)("Configure your Steam account"))),i.createElement("div",{className:"row"},i.createElement("div",{className:"col-3 text-right"},i.createElement("h4",null,(0,v._)("Your Steam ID"),":")),i.createElement("div",{className:"col-9"},i.createElement("h4",null,i.createElement("b",null,e)))),i.createElement("div",{className:"row"},i.createElement("div",{className:"col-3 col-md-3 text-right"},i.createElement("h4",null,(0,v._)("Trade URL"),":")),i.createElement("div",{className:"col-9 col-md-8"},i.createElement("input",{className:"form-control",value:t,onChange:this.onChangeTradeUrl.bind(this),placeholder:(0,v._)("Enter your Steam Trade URL")})),i.createElement("div",{className:"d-none d-md-inline-block col-md-1",style:{padding:"9px 0"}},i.createElement("a",{href:"http://steamcommunity.com/profiles/"+e+"/tradeoffers/privacy#trade_offer_access_url",target:"_blank",className:"trade-url-tooltip",title:(0,v._)("Find Trade URL in Steam")},i.createElement("span",{className:"fa fa-external-link-alt"})))),a,this.valid_trade_url?"":i.createElement("div",{className:"row"},i.createElement("button",{className:"btn btn-primary float-left"+(t?"":" disabled"),onClick:this.saveTradeUrl.bind(this)},(0,v._)("Continue"))))}else s=i.createElement("div",{className:"edit-item-steam section"},i.createElement("h2",null,i.createElement("span",null,(0,v._)("Connect your Steam account"))),i.createElement("div",{className:"row"},i.createElement("p",null,(0,v._)("Connect your Steam account with Gameflip. You can only connect <b>one</b> Steam account with Gameflip, and you <b>cannot connect</b> another Steam account at any time later.",{__html:!0}))),i.createElement("div",{className:"row"},i.createElement("img",{className:"signin-steam-btn img-fluid pointer",onClick:this.signinSteam.bind(this),src:"/img/app/signin_steam.png"})));return i.createElement("div",{id:"edit_item",className:"screen container"},i.createElement("h1",null,(0,v._)("Start Selling")),i.createElement("div",{className:"edit-item inner-content container-fluid"},s,i.createElement("div",{className:"text-muted text-right"},(0,v._)("Having problems to connect your Steam Community inventory?")," ",i.createElement("a",{href:"https://steamstat.us",target:"_blank"},(0,v._)("Check the current Steam status")),".")))}renderInventory(){let e=this.props.item?this.props.item.upc:"",t=this.state.mode,a=this.state.items,l=c.Z.notEmpty(a),n=c.Z.escrowEnabled(this.game),s=this.state.digital_deliverable,r="",o="",m=0,d="";if("single"==t){let e=c.Z.getOne(a);if(e){let t=e.steam_properties||{},a=t.steam_price,l=!!t.tradable,n=t.nosell,s=c.Z.isValidSteamPrice(a);this.valid=l&&s&&!n,this.valid||(l?s?n&&(r=i.createElement("p",{className:"text-danger"},(0,v._)("Item is not allowed to be sold on Gameflip market."))):r=i.createElement("p",{className:"text-danger"},(0,v._)("Suggested Price need to be greater than ${price}",{price:P.CJR/100})):r=i.createElement("p",{className:"text-danger"},(0,v._)("Item is not tradable."))),m=this.valid?1:0}o=i.createElement(H,{item:e,lowest_price:!0})}else{this.valid=l;let e=c.Z.toArray(a),t=this.state.page,n=P.f4,s=n*(t-1),p=n*t;p>e.length&&(p=e.length);let h=[];for(let t=s;t<p;t++){let a=e[t],l=a.steam_properties||{},n=l.steam_price,s=!!l.tradable,o=l.nosell,m=c.Z.isValidSteamPrice(n);this.valid=this.valid&&s&&m&&!o,this.valid||m||(r=i.createElement("p",{className:"text-danger"},(0,v._)("Remove items which the Suggested Price is lower than ${price}",{price:P.CJR/100}))),h.push(i.createElement(H,{key:t,item:a,mode:"summary",lowest_price:!0,onRemove:this.deSelectItem.bind(this,a)}))}if(o=h,m=e.length,e.length>n){let a=t>1,l=p<e.length;d=i.createElement("div",{className:"row"},i.createElement("nav",null,i.createElement("ul",{className:"pager"},i.createElement("li",{onClick:a?this.onClickPager.bind(this,t-1):null},i.createElement("span",{className:"btn btn-primary"+(a?"":" disabled")},i.createElement("span",{className:"fa fa-chevron-left","aria-hidden":"true"}))),i.createElement("li",{onClick:l?this.onClickPager.bind(this,t+1):null},i.createElement("span",{className:"btn btn-primary"+(l?"":" disabled")},i.createElement("span",{className:"fa fa-chevron-right","aria-hidden":"true"}))))))}}let p=u.Z.profile.sell||0;return i.createElement("div",{id:"edit_item",className:"screen container"},i.createElement("h1",null,(0,v._)("Start Selling"),this.game?" - "+this.game.label:""),i.createElement("div",{className:"edit-item inner-content container-fluid"},i.createElement("div",{className:"row"},n?i.createElement("div",{className:"col-12"},i.createElement("div",{className:"edit-item-steam-item section"},i.createElement("h2",null,i.createElement("span",null,(0,v._)("Listing Mode"))),i.createElement("br",null),i.createElement("div",{id:"listing-mode",className:"btn-group"},i.createElement("label",{className:"btn "+("multi"==t?"btn-primary active":"btn-outline-secondary")},i.createElement("input",{type:"radio",name:"listing-mode",value:"multi",checked:"multi"==t,onChange:this.onChangeMode.bind(this)})," ",(0,v._)("MULTIPLE SKINS")," "),i.createElement("label",{className:"btn "+("single"==t?"btn-primary active":"btn-outline-secondary")},i.createElement("input",{type:"radio",name:"listing-mode",value:"single",checked:"single"==t,onChange:this.onChangeMode.bind(this)})," ",(0,v._)("SINGLE SKIN")," ")))):"","multi"==t?i.createElement("div",{className:"col-12"},i.createElement("div",{className:"edit-item-steam-item section"},i.createElement("h2",null,i.createElement("span",null,(0,v._)("Delivery Method"))),i.createElement("div",{className:"media"},i.createElement("div",{className:"mr-2"},i.createElement("div",{className:"input-group"},i.createElement("div",{className:"input-group-prepend"},i.createElement("input",{className:"pointer",type:"radio",name:"delivery",value:"code",checked:s==P.hAy,onChange:this.changeDeliveryMethod.bind(this,P.hAy)})),i.createElement("img",{className:"img-digital-delivery",src:"/img/app/icon_delivery_bot.png"}))),i.createElement("div",{className:"media-body"},i.createElement("p",null,(0,v._)("Automatic delivery via Bot")),i.createElement("ul",null,i.createElement("li",{className:"note"},(0,v._)("Gameflip Bot holds and delivers your item to the buyer when your listing is sold.")),i.createElement("li",{className:"note"},(0,v._)("Recommended for sellers seeking convenience.")),e==P.BIm?i.createElement("li",{className:"note"},i.createElement("span",{className:"text-danger"},(0,v._)("Warning: CSGO items sent to a bot will be subject to a 7-day trade hold. Sales and returns cannot be conducted during this period."))):""))),p>=5?i.createElement("div",{className:"media"},i.createElement("div",{className:"mr-2"},i.createElement("div",{className:"input-group"},i.createElement("div",{className:"input-group-prepend"},i.createElement("input",{className:"pointer",type:"radio",name:"delivery",value:"transfer",checked:s==P.tFI,onChange:this.changeDeliveryMethod.bind(this,P.tFI)})),i.createElement("img",{className:"img-digital-delivery",src:"/img/app/icon_delivery_transfer.png"}))),i.createElement("div",{className:"media-body"},i.createElement("p",null,(0,v._)("I will coordinate with buyer to transfer")),i.createElement("ul",null,i.createElement("li",{className:"note"},(0,v._)("You must send the item within the promised 1-day time frame.")),i.createElement("li",{className:"note"},(0,v._)("Recommended for sellers seeking flexibility and to avoid 7-day trade hold."))))):"")):"",i.createElement("div",{className:"col-12 col-md-8"},i.createElement(Q,{game:this.game,mode:t,inventory:this.state.inventory,per_page:c.Z.isMobile?28:30,onSelect:this.selectItem.bind(this),onSelectAll:this.selectMultiItems.bind(this),onClearAll:this.clearSelectedItems.bind(this),selections:a,mode:t})),i.createElement("div",{className:"col-12 col-md-4"},i.createElement("div",{className:"edit-item-steam-item section"},i.createElement("h2",null,i.createElement("span",null,"single"==t?(0,v._)("Skin to Sell"):(0,v._)("Skins to Sell"))),i.createElement("div",{className:"row"},i.createElement("div",{className:"col-8"},i.createElement("h4",null,(0,v._)("{count} item(s) selected",{count:m}))),i.createElement("div",{className:"col-4"},i.createElement("button",{className:"btn btn-primary"+(this.valid?"":" disabled"),onClick:this.next.bind(this)},(0,v._)("Continue")))),r,i.createElement("hr",{style:{borderColor:"#ddd"}}),o,i.createElement("br",null),d)))))}}class te extends i.Component{getState(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=this.props.items,a=this.props.digital_deliverable,i=Math.ceil(1*c.Z.count(t)/P.f4),l=this.pageItems(e,t);G.reset(),G.items=l,G.digital_deliverable=a;let n=this.props.upc,s=n&&[P.BIm].indexOf(n)>=0&&a==P.hAy;return this.valid=!1,{status:"",error:"",items:l,digital_deliverable:a,isDone:!1,accept_currency:P.qBs,tradeHold:s,finalState:P.f1I,offer_id:"",offer_key:"",discount_base:K,all_discount:10,subscription:null,page_count:i,page:e}}constructor(e,t){super(e,t),this.state=this.getState(),this._onChange=this._onChange.bind(this),this._onChangeFee=this._onChangeFee.bind(this),this._onNextPage=this._onNextPage.bind(this),this._onError=this._onError.bind(this)}componentDidMount(){G.onChange(this._onChange),G.onChangeFee(this._onChangeFee),G.onNextPage(this._onNextPage),G.onError(this._onError),c.Z.scrollTop(),this.updateQuotes()}componentWillUnmount(){G.offChange(this._onChange),G.offChangeFee(this._onChangeFee),G.offNextPage(this._onNextPage),G.offError(this._onError),G.reset();let{isDone:e}=this.state;this.isStarted&&!e&&c.Z.showDialog({title:(0,v._)("Listing is Incomplete"),message:(0,v._)("Your listing has been saved and you can complete it later by navigating to the Listings menu."),ok:{label:(0,v._)("Go to Listings"),callback:e=>{c.Z.hideDialog(),c.Z.transitionTo("listings")}},cancel:{label:(0,v._)("Cancel"),callback:e=>{c.Z.hideDialog()}}})}updateQuotes(){this.updateAllDiscounts(),G.updateQuotes(),G.startQuoteTimer()}pageItems(e,t){let a=c.Z.toArray(t),i=P.f4,l=i*(e-1),n=i*e;if(n>a.length&&(n=a.length),l>=n)return{};let s={};for(let e=l;e<n;e++){let t=a[e];s[t.steam_properties.id]=t}return s}nextPage(){let{page:e}=this.state;e++;let t=this.getState(e);c.Z.notEmpty(t.items)?this.setState(t,(()=>{this.updateQuotes()})):G.done()}_onChange(){this.setState({status:G.status,items:G.items,isDone:G.isDone,offer_id:G.offer_id,offer_key:G.offer_key})}_onChangeFee(){this.setState({items:G.items});let e=c.Z.toArray(G.items),t=e.length>0&&e[0].subscription?e[0].subscription:null,a=this.state.subscription;!t||a&&t==a.subscription.sub_id||this.loadSubscription(t)}_onNextPage(){this.nextPage()}loadSubscription(e){m.Z.getSubscription(e,(e=>{this.setState({subscription:e})}),(e=>{o.Log.error(e)}))}_onError(){this.setState({error:G.error}),c.Z.scrollTop()}openSimilarDialog(e){E.item=e,E.emitShowSimilar()}itemBasePrice(e){let{discount_base:t}=this.state,a=e.steam_properties||{},{steam_price:i,gf_lowest_price:l}=a,n=l?l/100:0;return t==K?i||n:n||i}itemDiscountPrice(e){let t=this.itemBasePrice(e);if(t){let a=(100-(e.discount||0))*t;return Math.round(a)}return""}updateAllDiscounts(){let{items:e,all_discount:t}=this.state;for(let a in e){let i=e[a];i.discount=t;let l=this.itemDiscountPrice(i);l&&(i.price=l>P.CJR?l:P.CJR)}G.items=e,this.setState({items:e})}onChangeDiscountBase(e,t){this.setState({discount_base:e},(()=>{this.updateAllDiscounts()}))}onChangeAllDiscount(e){let t=c.Z.parseDiscount(e.target.value);!1!==t&&this.setState({all_discount:t},(()=>{this.updateAllDiscounts()}))}onChangeDiscount(e,t){let a=c.Z.parseDiscount(t.target.value);if(!1===a)return;e.discount=a;let i=this.itemDiscountPrice(e);i&&(e.price=i),G.setItem(e),this.forceUpdate()}onChangePrice(e,t){let a=c.Z.parsePrice(t.target.value);if(!1===a)return;e.price=a,G.setItem(e);let i=this.itemBasePrice(e);if(i){let t=100-a/i;t=Math.round(t),t<0&&(t=0),e.discount=t}this.forceUpdate()}onChangeAcceptCurrency(e,t){this.setState({accept_currency:e})}removeItem(e,t){let{items:a}=this.state;delete a[e.steam_properties.id],c.Z.notEmpty(a)?this.setState({items:a}):this.nextPage()}get isStarted(){let{status:e}=this.state;return e&&e!=F}process(e){if(e.preventDefault(),!this.valid)return;let{items:t,digital_deliverable:a,accept_currency:i,finalState:l,isDone:n,page_count:s,page:r}=this.state;if(n&&r>=s)return G.done();G.reset(),G.items=t,G.digital_deliverable=a,G.accept_currency=i,G.final_state=l,G.start(),c.Z.scrollTop()}cancel(){c.Z.showDialog({title:(0,v._)("Cancel Selling"),message:(0,v._)("Are you sure to cancel this selling session? Some of incomplete listings will be saved in Draft and you can complete it manually later."),ok:{label:(0,v._)("Cancel"),callback:e=>{c.Z.hideDialog(),G.reset(),c.Z.transitionTo("listings")}}})}onClickPager(e,t){c.Z.scrollTop(),this.setState({page:e})}render(){let{status:e,error:t,items:a,digital_deliverable:l,isDone:n,accept_currency:s,tradeHold:r,finalState:m,offer_id:d,offer_key:p,discount_base:h,all_discount:u,page_count:g,page:_}=this.state,f=this.isStarted,E=!1,b=!1,y=!1,N=!1,w=0,C=0,k=0,x=0;this.valid=!f||n;let Z=c.Z.toArray(a);for(let e=0;e<Z.length;e++){let t=Z[e].steam_properties||{};b|=t.steam_price>0,y|=t.gf_lowest_price>0}N=b||y;let D=[];for(let e=0;e<Z.length;e++){let t=Z[e],a=t.steam_properties||{},l=a.tradable,n=a.nosell,s=a.steam_price,r=c.Z.isValidPrice(t.price),o=c.Z.isValidSuggestedPrice(t.price,100*s),d=l&&!n&&r&&o&&c.Z.isValidSteamPrice(s);this.valid=this.valid&&d;let p=a.steam_price>0||a.gf_lowest_price>0,h=t.price?parseFloat(t.price/100).toFixed(2):"",u=r&&void 0!==t.commission&&void 0!==t.digital_fee?parseFloat((t.commission+t.digital_fee)/100).toFixed(2):"",g=h&&u?parseFloat(h-u).toFixed(2):"";w++,C+=t.price||0,k+=u?t.commission+t.digital_fee:0,x+=g?t.price-(t.commission+t.digital_fee):0,E|=t.status!=m,D.push(i.createElement("div",{className:"row",key:e},i.createElement("div",{className:"col-12 col-md-4 edit-item-steam-item"},i.createElement(H,{key:e,item:t,mode:"summary",lowest_price:!0,onRemove:f?null:this.removeItem.bind(this,t)})),N?i.createElement("div",{className:"col-6 col-md-2",style:{paddingRight:"5px"}},p?i.createElement("div",{className:"input-group"},i.createElement("input",{className:"form-control text-right",type:"text",placeholder:"Discount",value:t.discount||"",onChange:this.onChangeDiscount.bind(this,t),disabled:f}),i.createElement("div",{className:"input-group-prepend"},i.createElement("span",{className:"input-group-text"},(0,v._)("% OFF")))):""):"",i.createElement("div",{className:"col-6 col-md-3 form-group "+(r&&o?"":" has-error")},i.createElement("div",{className:"input-group"},i.createElement("div",{className:"input-group-prepend"},i.createElement("span",{className:"input-group-text"},"$")),i.createElement("input",{className:"form-control text-right",type:"text",placeholder:(0,v._)("Your Price"),value:h||"",onChange:this.onChangePrice.bind(this,t),disabled:f}),i.createElement("div",{className:"input-group-append"},i.createElement("span",{className:"input-group-text"},"USD"))),r?"":i.createElement("small",{className:"text-danger"},(0,v._)("Price should be between ${price_min} and ${price_max}.",{price_min:P.CJR/100,price_max:P.n3Z/100})," "),o?"":i.createElement("small",{className:"text-danger"}," ",(0,v._)("Price cannot exceed {x} times the Suggested Price.",{x:P.zIm})),i.createElement("p",null,i.createElement("a",{onClick:this.openSimilarDialog.bind(this,t)},i.createElement("small",null,(0,v._)("Compare to similar listings"))))),i.createElement("div",{className:"col-2 d-inline-block d-md-none text-right"},i.createElement("span",{className:"small"},(0,v._)("Fees"),": ")),i.createElement("div",{className:"col-2 col-md-1 form-group text-right"},i.createElement("span",{className:"small"},"$",u)),i.createElement("div",{className:"col-3 d-inline-block d-md-none text-right"},i.createElement("span",{className:"small"},(0,v._)("You make"),": ")),i.createElement("div",{className:"col-2 col-md-1 form-group text-right"},i.createElement("span",{className:"small"},"$",g)),i.createElement("div",{className:"col-2 col-md-1 form-group text-right"},i.createElement("span",{className:"text-capitalize"},i.createElement("strong",null,t.status)))))}let I=n&&_>=g?(0,v._)("Done"):f?(0,v._)("Listing Items ..."):g>1?(0,v._)("Start Listing Page {page}/{page_count}",{page:_,page_count:g}):(0,v._)("Start Listing");return n&&_<g&&(this.valid=!1),n&&(e==O?t=i.createElement("span",null,(0,v._)("Your items were deposited but are now on trade hold until {held_until}. Your listings will automatically go On Sale when the trade hold is removed.",{held_until:G.held_until})," ",i.createElement(o.Link,{to:"listings",params:{tab:"draft"}},(0,v._)("Review now"))):E&&(t=i.createElement("span",null,(0,v._)("Items of same wear but different prices are now on Listings/Draft for review.")," ",i.createElement(o.Link,{to:"listings",params:{tab:"draft"}},(0,v._)("Review now"))))),i.createElement("div",{id:"edit_item",className:"screen container"},i.createElement("h1",null,(0,v._)("Start Selling")," - ",l==P.hAy?(0,v._)("Bot Transfer"):(0,v._)("Coordinated Transfer")),i.createElement("div",{className:"edit-item inner-content container-fluid"},t?i.createElement("div",{className:"row"},i.createElement("div",{className:"col-12 text-center"},i.createElement("h5",{className:"alert alert-danger"},t),i.createElement("p",null,(0,v._)("Having problems to send your item?")," ",i.createElement("a",{href:"https://steamstat.us",target:"_blank"},(0,v._)("Check the current Steam status")),"."))):"",N?i.createElement("div",{className:"row"},i.createElement("div",{className:"col-12 col-md-4"}),i.createElement("div",{className:"col-4 col-md-2",style:{paddingRight:"5px"}},i.createElement("small",{className:"text-warning"},(0,v._)("Set discount to all")),i.createElement("div",{className:"input-group"},i.createElement("input",{className:"form-control form-control-sm text-right",type:"text",placeholder:(0,v._)("Discount"),value:u||"",onChange:this.onChangeAllDiscount.bind(this),disabled:f}),i.createElement("span",{className:"input-group-prepend",style:{backgroundColor:"#f1dec9"}},(0,v._)("% OFF")))),i.createElement("div",{className:"col-8 col-md-3"},i.createElement("small",{className:"text-warning"},(0,v._)("Discount based on")),i.createElement("div",{className:"input-group-append"},i.createElement("button",{type:"button",className:"btn btn-sm btn-outline-secondary dropdown-toggle","data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false"},h==X?(0,v._)("Lowest Price"):(0,v._)("Suggested Price")," ",i.createElement("span",{className:"caret"})),i.createElement("ul",{className:"dropdown-menu"},i.createElement("li",null,i.createElement("a",{onClick:this.onChangeDiscountBase.bind(this,K)},(0,v._)("Suggested Price"))),i.createElement("li",null,i.createElement("a",{onClick:this.onChangeDiscountBase.bind(this,X)},(0,v._)("Lowest Price"))))))):"",i.createElement("div",{className:"row"},i.createElement("h4",{className:"d-none d-md-inline-block col-md-4"},i.createElement("b",null,(0,v._)("Item"))),N?i.createElement("h4",{className:"d-none d-md-inline-block col-md-2"},i.createElement("b",null,(0,v._)("Discount"))):"",i.createElement("h4",{className:"d-none d-md-inline-block col-md-3"},i.createElement("b",null,(0,v._)("Your Price"))),i.createElement("h4",{className:"d-none d-md-inline-block col-md-1 text-right"},i.createElement("b",null,(0,v._)("Total Fees"))),i.createElement("h4",{className:"d-none d-md-inline-block col-md-1 text-right"},i.createElement("b",null,(0,v._)("You Make"))),i.createElement("h4",{className:"d-none d-md-inline-block col-md-1 text-right"},i.createElement("b",null,(0,v._)("Status")))),D,i.createElement("hr",null),i.createElement("div",{className:"row text-right"},g>1?i.createElement("div",{className:"col-6 col-md-3 col-lg-2"},i.createElement("b",null,(0,v._)("Page"),":")):"",g>1?i.createElement("div",{className:"col-5 col-md-2"},_,"/",g):"",g>1?i.createElement("div",{className:"d-none d-md-inline-block col-md-7 col-lg-8"}," "):"",i.createElement("div",{className:"col-6 col-md-3 col-lg-2"},i.createElement("b",null,(0,v._)("Number of items"),":")),i.createElement("div",{className:"col-5 col-md-2"},w),i.createElement("div",{className:"d-none d-md-inline-block col-md-7 col-lg-8"}," "),i.createElement("div",{className:"col-6 col-md-3 col-lg-2"},i.createElement("b",null,(0,v._)("Total sales"),":")),i.createElement("div",{className:"col-5 col-md-2"},"$",parseFloat(C/100).toFixed(2)),i.createElement("div",{className:"d-none d-md-inline-block col-md-7 col-lg-8"}," "),i.createElement("div",{className:"col-6 col-md-3 col-lg-2"},i.createElement("b",null,(0,v._)("Estimated fees"),":")),i.createElement("div",{className:"col-5 col-md-2"},"$",parseFloat(k/100).toFixed(2)),i.createElement("div",{className:"d-none d-md-inline-block col-md-7 col-lg-8"}," "),i.createElement("div",{className:"col-6 col-md-3 col-lg-2"},i.createElement("b",null,(0,v._)("You make"),":")),i.createElement("div",{className:"col-5 col-md-2"},"$",parseFloat(x/100).toFixed(2)),i.createElement("p",{className:"d-none d-md-inline-block col-md-7 col-lg-8"}," ")),i.createElement("div",{className:"row"},this.state.subscription?i.createElement("small",{className:"col-12 text-muted"},(0,v._)("NOTE"),": ",(0,v._)("Final fees & proceeds are calculated when the listing is sold and whether your subscription is still valid and applicable at that time.")):i.createElement("p",{className:"col-12 text-muted"},(0,v._)("Want to lower fees? Check out our subscription program")," ",i.createElement(o.Link,{to:"wallet",params:{tab:"subscriptions"}},(0,v._)("here")),"!")),i.createElement("hr",null),i.createElement("div",{className:"row"},c.Z.flpEnabled&&!f?i.createElement("div",{className:"col-12 col-md-3"},i.createElement("div",{className:"input-group"},i.createElement("div",{className:"input-group-prepend"},i.createElement("span",{className:"input-group-text"},(0,v._)("Accept Currency"))),i.createElement("div",{className:"input-group-append"},i.createElement("button",{type:"button",className:"btn btn-outline-secondary dropdown-toggle","data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false"},s==P.QV0?"USD & FLP":s," ",i.createElement("span",{className:"caret"})),i.createElement("ul",{className:"dropdown-menu"},i.createElement("li",null,i.createElement("a",{onClick:this.onChangeAcceptCurrency.bind(this,P.QV0)},"USD & FLP")),i.createElement("li",null,i.createElement("a",{onClick:this.onChangeAcceptCurrency.bind(this,P.qBs)},"USD")),i.createElement("li",null,i.createElement("a",{onClick:this.onChangeAcceptCurrency.bind(this,P.jtz)},"FLP")))))):"",i.createElement("div",{className:"col-12 col-md-3"},i.createElement("div",{className:"input-group"},i.createElement("div",{className:"input-group-prepend"},i.createElement("span",{className:"input-group-text"},(0,v._)("Final State"),":")),i.createElement("div",{className:"input-group-append"},i.createElement("span",{className:"input-group-text bg-light"},(0,v._)("Ready"))))),i.createElement("div",{className:"col-6 col-md-4"},i.createElement("button",{className:"select-btn btn btn-primary"+(this.valid?"":" disabled"),onClick:this.valid?this.process.bind(this):null},I),f||this.valid?"":i.createElement("small",{className:"text-danger"},i.createElement("br",null),"* ",(0,v._)("Valid item prices are required."))),i.createElement("div",{className:"col-6 col-md-2"},i.createElement("button",{className:"btn btn-outline-secondary float-right",onClick:this.cancel.bind(this)},(0,v._)("Cancel")))),i.createElement(S,null)),f&&!n?i.createElement("div",{className:"progress-pop row"},i.createElement("div",{className:"col-12"},i.createElement("small",null,(0,v._)("Stay on this page while in progress.")),i.createElement("br",null),i.createElement("img",{src:"/img/app/progress_bar.gif"}),i.createElement("br",null),i.createElement("small",{className:"text-success"},B[e],"..."),i.createElement("br",null),e==M&&d?i.createElement("small",null,i.createElement("a",{href:"https://steamcommunity.com/tradeoffer/"+d+"/",target:"_blank"},(0,v._)("See trade offer")),p?i.createElement("i",null," [",p,"]"):""):"")):"")}}class ae extends i.Component{constructor(e,t){super(e,t),this.game=this.props.game_info,this.state={inventory:null,item:null},this.valid=!1}componentDidMount(){this.loadInventory(this.game.id)}loadInventory(e){e&&d.Z.getGameInventory(e,(e=>{o.Log.debug(e,"GameItemSection.loadInventory: result"),this.setState({inventory:e})}),(e=>{o.Log.error(e,"GameItemSection.loadInventory: error")}))}selectItem(e,t){if(!1===e.tradable||!0===e.nosell)return void c.Z.showInfoDialog((0,v._)("This item is not sellable."));let a=this.prepareItem(e);this.setState({item:a}),o.Log.debug(a,"Current selection"),e.colors&&$("html,body").animate({scrollTop:450},"fast")}prepareItem(e){let t=c.Z.clone(this.props.item),a=[];return t._original=e,t.name=e.name,t.description=e.description||"",e.id&&a.push("id: "+e.id),e.type?a.push("type: "+c.Z.capitalize(e.type)):e.Type&&a.push("Type: "+c.Z.capitalize(e.Type)),e.color&&a.push("color: "+e.color),e.unit&&(t.qty=1),a&&(t.tags=a),t.icon_url=e.icon_url||"",t.tradable=!0,t.nosell=!1,o.Log.debug(t,"Prepare item"),t}replaceItemImage(e){let{item:t}=this.state;t.icon_url=e.preview,o.Log.debug(e.preview,"Selected custom photo")}changeItemName(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"override",{item:a}=this.state;if("prefix"==t){let t=e?" | "+e:"";a.name=a._original&&a._original.name?a._original.name+t:e}else a.name=e||(a._original?a._original.name:"");a.customName=e,this.setState({item:a})}changeItemQty(e,t){let{item:a}=this.state;if(!a._original)return;let i=e&&e>1?" | "+n().formatNumber(e,{thousand:" "})+t:"";a.name=a._original.name+i,a.qty=e,a.unit=t,o.Log.debug(a,"Item after changing qty"),this.setState({item:a})}next(){if(!this.valid)return;let{item:e}=this.state;e.tags&&e.qty&&e.tags.push("quantity: "+e.qty+(e.unit?e.unit:"")),e._original&&!e.description&&(e.description=e.name),delete e.id,delete e.qty,delete e.unit,delete e.customName,delete e._original,this.props.next&&this.props.next(e)}render(){let{item:e,inventory:t}=this.state,a="",l=0,n=[],s=null,r=e?e._original:null;if(this.valid=e&&!1!==e.tradable,a=i.createElement(H,{item:e,onReplacePhoto:r&&(r.customizable||r.unit)?this.replaceItemImage.bind(this):null}),l=this.valid?1:0,o.Log.debug(r,"Original item"),r&&r.colors&&Array.isArray(r.colors)){r.colors.map((e=>{let t=c.Z.clone(r);delete t.colors,t.id=r.id,t.name=r.name+" | "+e.name,t.color=e.name,t.icon_url=e.icon_url,n.push(t)}));let e=c.Z.clone(r);delete e.colors,n.unshift(e),o.Log.debug(n,"Color variations items")}r&&r.unit&&(Array.isArray(r.unit)?s=r.unit:"string"==typeof r.unit&&(s=[r.unit]),e.unit||(e.unit=s[0]));let m="";return this.game&&"045496596972"==this.game.id&&(m=i.createElement("p",null,(0,v._)("Make sure to give an accurate description of your Pokemon's stats or add a screenshot of its stats in your listing."))),i.createElement("div",{id:"edit_item",className:"screen container"},i.createElement("h1",null,(0,v._)("Start Selling"),this.game?" - "+this.game.label:""),i.createElement("div",{className:"edit-item inner-content container-fluid"},i.createElement("div",{className:"row"},i.createElement("div",{className:"col-12 col-md-8"},i.createElement(Q,{title:(0,v._)("Game Items"),mode:"single",game:this.game,inventory:t,per_page:c.Z.isMobile?16:18,onSelect:this.selectItem.bind(this),selections:[e]}),n&&n.length>0?i.createElement(Q,{title:(0,v._)("Colors"),mode:"single",game:this.game,inventory:n,per_page:30,onSelect:this.selectItem.bind(this),selections:n}):""),i.createElement("div",{className:"col-12 col-md-4"},i.createElement("div",{className:"edit-item-steam-item section"},i.createElement("h2",null,i.createElement("span",null,(0,v._)("Item to Sell"))),m,i.createElement("div",{className:"row"},i.createElement("div",{className:"col-8"},i.createElement("h4",null,(0,v._)("{count} item(s) selected",{count:l}))),i.createElement("div",{className:"col-4"},i.createElement("button",{className:"btn btn-primary"+(this.valid?"":" disabled"),onClick:this.next.bind(this)},(0,v._)("Continue")))),i.createElement("hr",{style:{borderColor:"#ddd"}}),a,r&&r.customizable?i.createElement(ie,{name:e?e.customName:"",onChange:this.changeItemName.bind(this)}):"",e&&e.unit?i.createElement(le,{qty:e?e.qty:"x"==e.unit?"1":"",unit_selected:e.unit,unit_selections:s,onChange:this.changeItemQty.bind(this)}):"",i.createElement("br",null))))))}}class ie extends i.Component{constructor(e,t){super(e,t);let{name:a}=this.props;this.state={name:a||""}}get maxChars(){return 36}componentDidUpdate(e,t){this.props.name!==e.name&&this.setState({name:this.props.name})}onChangeName(e){let t="object"==typeof e?e.target.value:e;o.Log.debug(t,"Changing name"),t.length>this.maxChars&&(t=t.substring(0,this.maxChars)),this.setState({name:t},(()=>{this.props.onChange&&this.props.onChange(this.state.name)}))}render(){let{name:e}=this.state;return i.createElement("div",{className:"row"},i.createElement("div",{className:"col-3 text-muted"},i.createElement("p",null,(0,v._)("Name"),":")),i.createElement("div",{className:"col-9"},i.createElement("input",{className:"form-control text-right",type:"text",placeholder:(0,v._)("Max {max} characters",{max:this.maxChars}),value:e||"",onChange:this.onChangeName.bind(this)})))}}class le extends i.Component{constructor(e,t){super(e,t);let{qty:a,unit_selected:i}=this.props;this.state={qty:a,unit_selected:i}}componentDidUpdate(e,t){this.props.qty===e.qty&&this.props.unit_selected===e.unit_selected||this.setState({qty:this.props.qty,unit_selected:this.props.unit_selected})}onChangeUnit(e,t){this.setState({unit_selected:e},(()=>{this.props.onChange&&this.props.onChange(this.state.qty,this.state.unit_selected)}))}onChangeQty(e){let t=("object"==typeof e?e.target.value:e).replace(/\D/g,"");o.Log.debug(t,"Changing quantity"),this.setState({qty:t},(()=>{this.props.onChange&&this.props.onChange(this.state.qty,this.state.unit_selected)}))}render(){let{unit_selections:e}=this.props,{qty:t,unit_selected:a}=this.state;o.Log.debug("Rendering qty input");let l=[];return e&&e.length>0&&e.map(((e,t)=>{e&&l.push(i.createElement("li",{key:t},i.createElement("a",{className:"dropdown-item",onClick:this.onChangeUnit.bind(this,e)},i.createElement("b",null,e))))})),i.createElement("div",{className:"row"},i.createElement("div",{className:"col-3 text-muted"},i.createElement("p",null,(0,v._)("Quantity"),":")),i.createElement("div",{className:"col-9"},i.createElement("div",{className:"input-group"},i.createElement("input",{className:"form-control text-right",type:"text",placeholder:(0,v._)("1 is the default"),value:t||"",onChange:this.onChangeQty.bind(this)}),l.length>0?i.createElement("div",{className:"input-group-append"},i.createElement("button",{className:"btn btn-clear dropdown-toggle","data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false"},i.createElement("span",{className:"text-primary"},a,"  "),i.createElement("span",{className:"caret"})),i.createElement("ul",{className:"dropdown-menu pointer scrollable-menu",role:"menu"},l)):"")))}}class ne extends i.Component{constructor(e){super(e)}onSelect(e,t){this.props.onSelect&&this.props.onSelect(e)}render(){let e=this.props.list||[],t=this.props.selection||{},a=this.props.title||"",l=e.map(((e,a)=>i.createElement("div",{className:"col-6 col-md-3 movie-item",key:a},i.createElement("div",{className:"thumbnail pointer"+(t.id==e.id?" active":""),onClick:this.onSelect.bind(this,e)},i.createElement("div",{className:"movie-poster"},i.createElement("img",{className:"img-fluid",src:e.poster_url||"/img/app/default_no_photo.png"})),i.createElement("div",{className:"caption"},i.createElement("p",{className:"text-center"},e.original_title||e.original_name||e.name))))));return i.createElement("div",{className:"edit-item-movie-list section"},i.createElement("h2",null,i.createElement("span",null,a)),i.createElement("div",{className:"row"},l))}}const se={2:"Point-and-click",4:"Fighting",5:"Shooter",7:"Music",8:"Platform",9:"Puzzle",10:"Puzzle",10:"Real Time Strategy (RTS)",12:"Role-playing (RPG)",13:"Simulator",14:"Sport",15:"Strategy",16:"Turn-based strategy (TBS)",24:"Tactical",25:"Hack and slash/Beat 'em up",26:"Quiz/Trivia",30:"Pinball",31:"Adventure",32:"Indie",33:"Arcade",34:"Visual Novel",35:"Card & Board Game",36:"MOBA"};class re extends i.Component{constructor(e,t){super(e,t),this.state={name:this.props.name||"",results:[],selected:null}}componentDidMount(){this.search()}handleSearch(e){e.preventDefault(),this.search()}search(){let e=this.state.name?this.state.name.trim():"",{item:t}=this.props;if(!e)return;let a={};t&&t.platform&&(a.platform=t.platform),d.Z.searchGame(e,a,(e=>{o.Log.debug(e,"Game search results"),this.setState({results:e,selected:null},(()=>{c.Z.isEmpty(e)&&c.Z.showInfoDialog((0,v._)("No results available."))}))}),(e=>{this.setState({results:[],selected:null})}))}getDetail(e,t){d.Z.getGameDetail(e,(e=>{o.Log.debug(e,"Gae detail"),this.setState({selected:e})}),(e=>{this.setState({selected:null})}))}onSelect(e){this.setState({selected:e}),this.getDetail(e.id),o.Log.debug(e,"Game selected")}onChangeName(e){this.setState({name:e.target.value})}mediaDesc(e){let t=[],a=[];return c.Z.notEmpty(e.genres)?e.genres.map(((e,t)=>{e.name&&a.push(e.name)})):c.Z.notEmpty(e.genre_ids)&&e.genre_ids.map((e=>{let t=se[e];t&&a.push(t)})),e.first_release_date?t.push(`Release on ${this.dateFormat(e.first_release_date)}`):e.release_date&&t.push(`Release on ${this.dateFormat(e.release_date)}`),e.summary?t.push(e.summary):e.overview&&t.push(e.overview),t.join("\n\n")}dateFormat(e){let t=new Date(e),a=e=>e<10?"0"+e:e;return t.getUTCFullYear()+"-"+a(t.getUTCMonth()+1)+"-"+a(t.getUTCDate())}skip(){this.setState({selected:null},this.next.bind(this))}next(){let{name:e,selected:t,production:a}=this.state,i=c.Z.clone(this.props.item);if(t){let e=[];if(i.name=t.name||t.title,i.description=this.mediaDesc(t),i.icon_url=t.poster_url||null,t.id&&e.push("id: "+t.id),i.name&&e.push("title: "+i.name.replace(new RegExp(":","g"),"")),i.total_rating&&e.push("rating: "+t.total_rating),c.Z.notEmpty(t.genres)){let e=[];t.genres.map(((t,a)=>{t.name&&e.push(t.name)})),e.length>0&&(i.genre=e)}e&&(i.tags=e)}else i.name=e;this.props.next&&this.props.next(i)}render(){let{name:e,results:t,selected:a,production:l}=this.state,n="";return a&&(n=i.createElement("div",{className:"item-preview"},i.createElement("img",{className:"img-fluid thumbnail",src:a.poster_url}),i.createElement("h3",null,i.createElement("b",null,a.original_title||a.original_name)),i.createElement("div",null,c.Z.replaceLineBreak(this.mediaDesc(a))),i.createElement("br",null),i.createElement("button",{className:"select-btn btn btn-primary",onClick:this.next.bind(this)},(0,v._)("Select")))),i.createElement("div",{id:"edit_item",className:"screen container movie-section"},i.createElement("h1",null,(0,v._)("Start Selling")),i.createElement("div",{className:"edit-item inner-content container-fluid"},i.createElement("div",{className:"row"},i.createElement("div",{className:"col-12"},i.createElement("form",{className:"input-group",onSubmit:this.handleSearch.bind(this)},i.createElement("input",{className:"form-control",value:e,onChange:this.onChangeName.bind(this),type:"text",placeholder:(0,v._)("Enter title to search our database. Ex: FIFA 23")}),i.createElement("div",{className:"input-group-append"},i.createElement("button",{className:"btn btn-primary",onClick:this.handleSearch.bind(this)},i.createElement("span",{className:"fa fa-search"})),i.createElement("button",{className:"btn btn-outline-secondary",onClick:this.skip.bind(this)},(0,v._)("Skip Search"))))),i.createElement("p",{className:"col-12"}," "),c.Z.notEmpty(t)?i.createElement("div",{className:"col-12 col-md-8"},i.createElement(ne,{list:t,onSelect:this.onSelect.bind(this),selection:a,title:(0,v._)("Game List")})):"",c.Z.notEmpty(t)?i.createElement("div",{className:"col-12 col-md-4"},i.createElement("div",{className:"edit-item-steam-item section"},i.createElement("h2",null,i.createElement("span",null,(0,v._)("Your Selection"))),n)):"")))}}const oe={12:"Adventure",14:"Fantasy",16:"Animation",18:"Drama",27:"Horror",28:"Action",35:"Comedy",36:"History",37:"Western",53:"Thriller",80:"Crime",99:"Documentary",878:"Science Fiction",9648:"Mystery",10402:"Music",10749:"Romance",10751:"Family",10752:"War",10769:"Foreign",10770:"TV Movie"};class ce extends i.Component{constructor(e,t){super(e,t),this.state={name:this.props.name||"",results:[],selected:null,production:"movie"}}componentDidMount(){this.search()}handleSearch(e){e.preventDefault(),this.search()}search(){let e=this.state.name?this.state.name.trim():"",t=this.state.production||"movie";e&&("tv"==t?d.Z.searchTv.bind(d.Z):d.Z.searchMovie.bind(d.Z))(e,(e=>{o.Log.debug(e,"Movie/TV search results"),this.setState({results:e,selected:null},(()=>{c.Z.isEmpty(e)&&c.Z.showInfoDialog((0,v._)("No results available."))}))}),(e=>{this.setState({results:[],selected:null})}))}getDetail(e,t){("tv"==t?d.Z.getTvDetail.bind(d.Z):d.Z.getMovieDetail.bind(d.Z))(e,(e=>{o.Log.debug(e,t+" detail"),this.setState({selected:e})}),(e=>{this.setState({selected:null})}))}onSelect(e){let t=this.state.production||"movie";this.setState({selected:e}),this.getDetail(e.id,t),o.Log.debug(e,"Movie/TV selected")}onChangeName(e){this.setState({name:e.target.value})}mediaDesc(e){let t=[],a=[];return c.Z.notEmpty(e.genres)?e.genres.map(((e,t)=>{e.name&&a.push(e.name)})):c.Z.notEmpty(e.genre_ids)&&e.genre_ids.map((e=>{let t=oe[e];t&&a.push(t)})),e.release_date?t.push(`Release on ${e.release_date}`):e.first_air_date&&t.push(`First aired on ${e.first_air_date}`),e.overview&&t.push(e.overview),t.join("\n\n")}mediaTypeSelect(e){"movie"!=e&&"tv"!=e||this.setState({production:e})}skip(){this.setState({selected:null},this.next.bind(this))}next(){let{name:e,selected:t,production:a}=this.state,i=c.Z.clone(this.props.item);if(t){let e=[];if(i.name="movie"==a?t.original_title||t.title:t.original_name||t.name,i.description=this.mediaDesc(t),i.icon_url=t.poster_url||null,t.id&&e.push("id: "+t.id),a&&e.push("production: "+a),i.name&&e.push("title: "+i.name.replace(new RegExp(":","g"),"")),c.Z.notEmpty(t.genres)){let a=[];t.genres.map(((e,t)=>{e.name&&a.push(e.name)})),a.length>0&&e.push("genres: "+a.join(", "))}e&&(i.tags=e)}else i.name=e;this.props.next&&this.props.next(i)}render(){let{name:e,results:t,selected:a,production:l}=this.state,n="movie"==l?(0,v._)("Movie"):(0,v._)("TV"),s="";return a&&(s=i.createElement("div",{className:"item-preview"},i.createElement("img",{className:"img-fluid thumbnail",src:a.poster_url}),i.createElement("h3",null,i.createElement("b",null,a.original_title||a.original_name)),i.createElement("div",null,c.Z.replaceLineBreak(this.mediaDesc(a))),i.createElement("br",null),i.createElement("button",{className:"select-btn btn btn-primary",onClick:this.next.bind(this)},(0,v._)("Select")))),i.createElement("div",{id:"edit_item",className:"screen container movie-section"},i.createElement("h1",null,(0,v._)("Start Selling")),i.createElement("div",{className:"edit-item inner-content container-fluid"},i.createElement("div",{className:"row"},i.createElement("div",{className:"col-12"},i.createElement("form",{className:"input-group",onSubmit:this.handleSearch.bind(this)},i.createElement("div",{className:"input-group-append"},i.createElement("button",{type:"button",className:"btn btn-outline-secondary dropdown-toggle","data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false"},n," ",i.createElement("span",{className:"caret"})),i.createElement("ul",{className:"dropdown-menu dropdown-menu"},i.createElement("li",null,i.createElement("a",{onClick:this.mediaTypeSelect.bind(this,"movie")},(0,v._)("Movie"))),i.createElement("li",null,i.createElement("a",{onClick:this.mediaTypeSelect.bind(this,"tv")},(0,v._)("TV"))))),i.createElement("input",{className:"form-control",value:e,onChange:this.onChangeName.bind(this),type:"text",placeholder:(0,v._)("Enter title to search our database. Ex: Star Wars")}),i.createElement("div",{className:"input-group-append"},i.createElement("button",{className:"btn btn-primary",onClick:this.handleSearch.bind(this)},i.createElement("span",{className:"fa fa-search"})),i.createElement("button",{className:"btn btn-outline-secondary",onClick:this.skip.bind(this)},(0,v._)("Skip Search"))))),i.createElement("p",{className:"col-12"}," "),c.Z.notEmpty(t)?i.createElement("div",{className:"col-12 col-md-8"},i.createElement(ne,{list:t,onSelect:this.onSelect.bind(this),selection:a,title:(0,v._)("Movie List")}),i.createElement("img",{src:"/img/app/moviedb_logo.png",style:{width:"150px"}}),i.createElement("br",null),i.createElement("br",null)):"",c.Z.notEmpty(t)?i.createElement("div",{className:"col-12 col-md-4"},i.createElement("div",{className:"edit-item-steam-item section"},i.createElement("h2",null,i.createElement("span",null,(0,v._)("Your Selection"))),s)):"")))}}class me extends i.Component{getState(e){let t=c.Z.clone(e.item),a=c.Z.categoryPlatform(P.tVC,t.platform)||{};return t.currency="USD",t.type=a.type||"giftcard",this.valid=!1,{item:t||{},brand:a}}constructor(e,t){super(e,t),this.state=this.getState(this.props)}componentDidUpdate(e,t){try{JSON.stringify(this.props)!==JSON.stringify(e)&&this.setState(this.getState(this.props))}catch(e){o.Log.error(e)}}onChangeBalance(e){let t=e.target.value||"",a="";if("string"==typeof t){let e=t.match(/\d/g);e&&(t=e.join(""),a=parseInt(t))}else a=t;let{item:i}=this.state;i.balance=a,this.setState({item:i})}onChangeCurrency(e){let{item:t}=this.state;t.currency=e,this.setState({item:t})}onDropImageFile(e){o.Log.debug(e,"onDropImageFile files");let t=e[0];if(!c.Z.notValidImage(t)&&t&&t.preview){let{item:e}=this.state;e.icon_url=t.preview,this.setState({item:e})}}next(){if(!this.valid)return;let{item:e}=this.state,t=[];e.name=this.constructListingName();let a=e.type||"";if(a&&t.push("type: "+e.type),"giftcard"==a&&e.balance&&t.push("balance: "+e.balance),"giftcard"==a&&e.currency)switch(t.push("currency: "+e.currency),e.currency){case"USD":e.digital_region="US";break;case"GBP":e.digital_region="UK";break;case"CAD":e.digital_region="CA"}t&&(e.tags=t),this.props.next&&this.props.next(e)}constructListingName(){let{item:e}=this.state,t=e.type||"",a=e.name||(0,v._)("Gift Card");if("membership"==t)return a;let i=e.balance?(e.balance/100).toFixed(2):"",l="$";switch(e.currency||(0,v._)("Currency")){case"USD":l="$";break;case"EUR":l="€";break;case"GBP":l="£"}return(e.balance?l+i+" ":"")+a}render(){let{item:e}=this.state,t=e.type||"";this.valid=e&&("membership"==t||"giftcard"==t&&e.balance&&e.currency);let a=e.balance?(e.balance/100).toFixed(2):"",l=e.currency||(0,v._)("Currency"),n=this.constructListingName(),r=i.createElement(s.Z,{className:"dropzone square-content text-center pointer",onDrop:this.onDropImageFile.bind(this),multiple:!1},i.createElement("div",{className:"well"},i.createElement("p",null,(0,v._)("Want your own image?<br/>Click or Drag & Drop it here!",{__html:!0})))),o=[];["USD","EUR","GBP","CAD"].map(((e,t)=>{o.push(i.createElement("li",{key:e},i.createElement("a",{onClick:this.onChangeCurrency.bind(this,e)},e)))}));let c="giftcard"==t?i.createElement("div",{className:"input-group well"},i.createElement("input",{className:"form-control",value:a,onChange:this.onChangeBalance.bind(this),type:"text",placeholder:(0,v._)("Gift Card Balance")}),i.createElement("div",{className:"input-group-append"},i.createElement("button",{type:"button",className:"btn btn-outline-secondary dropdown-toggle","data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false"},l," ",i.createElement("span",{className:"caret"})),i.createElement("ul",{className:"dropdown-menu"},o))):"",m=i.createElement("div",{className:"item-preview"},i.createElement("h3",null,i.createElement("b",null,n)),i.createElement("div",{className:"edit-item-giftcard"},i.createElement("img",{className:"img-fluid thumbnail",src:e.icon_url}),r,c,i.createElement("button",{className:"select-btn btn btn-primary"+(this.valid?"":" disabled"),onClick:this.next.bind(this)},(0,v._)("Continue")))),d=e.digital?i.createElement("li",null,i.createElement("p",{className:"text-warning"},(0,v._)("Only Gift Cards that can be redeemed directly with the merchant/retailer online are allowed. Codes that require physical card are NOT allowed in the digital section."))):"",p="unknown"==e.platform?i.createElement("li",null,i.createElement("p",null,i.createElement("a",{target:"_blank",href:"https://gameflip.zendesk.com/hc/en-us/articles/360002439194"},(0,v._)("Check if your gift card brand is allowed.")))):"";return i.createElement("div",{id:"edit_item",className:"screen container"},i.createElement("h1",null,(0,v._)("Start Selling")),i.createElement("div",{className:"edit-item inner-content container-fluid"},i.createElement("div",{className:"row"},i.createElement("div",{className:"col-12 col-md-5"},i.createElement("div",{className:"edit-item-steam-item section"},m)),i.createElement("div",{className:"col-12 col-md-7"},i.createElement("h3",null,(0,v._)("Please Note"),":"),i.createElement("ul",null,i.createElement("li",null,i.createElement("p",null,(0,v._)("Cards must not expire or incur fees"))),i.createElement("li",null,i.createElement("p",null,(0,v._)("Always include information on how to redeem the listed gift card (e.g. URL or app for redemption)"))),i.createElement("li",null,i.createElement("p",null,(0,v._)("Always include the gift card restrictions (e.g. region)"))),d,p)))))}}class de extends i.Component{getState(e){let t=c.Z.clone(e.item);return{item:t||{},platform:c.Z.categoryPlatform(P.SkU,t.platform)||{},address:""}}constructor(e,t){super(e,t),this.state=this.getState(e)}componentDidMount(){c.Z.scrollTop(),this.getNFTAddress()}getNFTAddress(){let{owner:e}=u.Z.profile;e&&m.Z.putNFTAddress(e,(e=>{this.setState({address:e.address})}),(e=>{c.Z.showErrorDialog(e)}))}render(){let{item:e,address:t}=this.state;return i.createElement("div",{id:"edit_item",className:"screen container nft-instruction"},i.createElement("h1",null,(0,v._)("How to create a listing for your CryptoKitty?")),i.createElement("div",{className:"edit-item inner-content container-fluid"},i.createElement("div",{className:"container-fluid panel-group"},i.createElement("div",{className:"panel"},i.createElement("h4",{className:"panel-heading",role:"tab"},i.createElement("b",null,i.createElement("span",{className:"badge badge-circle badge-success"},"1")," ",i.createElement("a",{role:"button","data-toggle":"collapse",href:"#nft-collapse-1","aria-expanded":"false"},"Add CryptoKitties contract to your Ethereum wallet"))),i.createElement("div",{id:"nft-collapse-1",className:"panel-collapse collapse",role:"tabpanel"},i.createElement("div",{className:"panel-body"},i.createElement("small",{className:"text-muted"},"* We use ",i.createElement("a",{href:"https://www.myetherwallet.com",target:"_blank"},"MyEtherWallet")," as an example wallet for this instruction."),i.createElement("br",null),i.createElement("br",null),i.createElement("h4",null,"Go to the Contracts section in MyEtherWallet"),i.createElement("p",null,i.createElement("a",{href:"https://www.myetherwallet.com/#contracts",target:"_blank"},"https://www.myetherwallet.com/#contracts")),i.createElement("br",null),i.createElement("h4",null,"Enter the values below"),i.createElement("p",null,i.createElement("b",null,"Contract Address"),":"),i.createElement("p",null,i.createElement("input",{value:r.Z.config.cryptokitty.contract_address,className:"form-control",readOnly:!0})),i.createElement("p",null,i.createElement("b",null,"ABI / JSON Interface"),": Use the content below"),i.createElement("p",null,i.createElement("textarea",{value:r.Z.config.cryptokitty.abi,className:"form-control",readOnly:!0,rows:"5"})),i.createElement("br",null),i.createElement("h4",null,'Click "Access"'),i.createElement("br",null)))),r.Z.isProduction?"":i.createElement("div",{className:"panel"},i.createElement("h4",{className:"panel-heading",role:"tab"},i.createElement("b",null,i.createElement("span",{className:"badge badge-circle badge-warning"},"QA")," ",i.createElement("a",{role:"button","data-toggle":"collapse",href:"#nft-collapse-qa","aria-expanded":"false",className:"text-muted"},"How to mint a new CryptoKitty for your testing?"))),i.createElement("div",{id:"nft-collapse-qa",className:"panel-collapse collapse",role:"tabpanel"},i.createElement("div",{className:"panel-body"},i.createElement("small",{className:"text-muted"},"* This section appears on Test only."),i.createElement("br",null),i.createElement("br",null),i.createElement("h4",null,'Under "Read / Write Contract" section, select "mint" function'),i.createElement("br",null),i.createElement("h4",null,"Enter the values below"),i.createElement("p",null,i.createElement("b",null,"_to")," address: Use your own Goerli ethereum address"),i.createElement("p",null,i.createElement("b",null,"_tokenId"),": Any number not already minted (e.g. 1296073) OR Go to ",i.createElement("a",{href:"https://www.cryptokitties.co/search?orderBy=age&orderDirection=asc",target:"_blank"},"cryptokitties.co")," and get one of the latest kitty token ID."),i.createElement("br",null),i.createElement("h4",null,'Click "WRITE" and confirm the contract transaction'),i.createElement("br",null)))),i.createElement("div",{className:"panel"},i.createElement("h4",{className:"panel-heading",role:"tab"},i.createElement("b",null,i.createElement("span",{className:"badge badge-circle badge-success"},"2")," ",i.createElement("a",{role:"button","data-toggle":"collapse",href:"#nft-collapse-2","aria-expanded":"false"},"Approve your Gameflip NFT Address to transfer your CryptoKitty"))),i.createElement("div",{id:"nft-collapse-2",className:"panel-collapse collapse",role:"tabpanel"},i.createElement("div",{className:"panel-body"},i.createElement("small",{className:"text-muted"},"* You still own your CryptoKitty during the time it's listed for sale on Gameflip. We only have a right to transfer it to the buyer once it's sold."),i.createElement("br",null),i.createElement("br",null),i.createElement("h4",null,'Under "Read / Write Contract" section, select "approve" function'),i.createElement("br",null),i.createElement("h4",null,"Enter the values below"),i.createElement("p",null,i.createElement("b",null,"_to")," address: ",i.createElement("span",{className:"text-danger"},"Use your Gameflip NFT Address which is unique per account")),i.createElement("p",null,i.createElement("input",{value:t,className:"form-control",readOnly:!0})),i.createElement("p",null,i.createElement("b",null,"_tokenId"),": Use your CryptoKitty's Token ID (e.g. 1296073)"),i.createElement("br",null),i.createElement("h4",null,'Click "WRITE" and confirm the contract transaction'),i.createElement("br",null)))),i.createElement("div",{className:"panel"},i.createElement("h4",{className:"panel-heading",role:"tab"},i.createElement("b",null,i.createElement("span",{className:"badge badge-circle badge-success"},"3")," ",i.createElement("a",{role:"button","data-toggle":"collapse",href:"#nft-collapse-3","aria-expanded":"false"},"Your listing will be created in Draft"))),i.createElement("div",{id:"nft-collapse-3",className:"panel-collapse collapse",role:"tabpanel"},i.createElement("div",{className:"panel-body"},i.createElement("h4",null,'When the approval contract transaction has enough confirmations, a listing will be created in "Draft" with your CryptoKitty information.'),i.createElement("br",null),i.createElement("h4",null,"Check your ",i.createElement("a",{href:"/listings",target:"_blank"},"Listings")," page frequently to see the listing."),i.createElement("br",null)))),i.createElement("div",{className:"panel"},i.createElement("h4",{className:"panel-heading",role:"tab"},i.createElement("b",null,i.createElement("span",{className:"badge badge-circle badge-success"},"4")," ",i.createElement("a",{role:"button","data-toggle":"collapse",href:"#nft-collapse-4","aria-expanded":"false"},"Put your listing On Sale"))),i.createElement("div",{id:"nft-collapse-4",className:"panel-collapse collapse",role:"tabpanel"},i.createElement("div",{className:"panel-body"},i.createElement("h4",null,"Edit your listing, add a price, and put it on sale"),i.createElement("br",null),i.createElement(o.Link,{to:"listings",className:"btn btn-primary"},"Done"),i.createElement("br",null)))))))}}var pe=a(97614);class he extends i.Component{constructor(e,t){super(e,t);let a=c.Z.clone(this.props.item);this.PLATFORM_META={nba_topshot:{label:(0,v._)("Moment ID/URL"),placeholder:(0,v._)("Enter the Moment ID or URL to retrieve its information"),example:"1230eaea-d9e0-4d1e-a726-0a2a221af95f OR https://nbatopshot.com/moment/username+1230eaea-d9e0-4d1e-a726-0a2a221af95f"},topps_mlb:{example:"1099526598206"},alien_worlds:{example:"1099537756222"},sorare:{label:(0,v._)("Token ID"),placeholder:(0,v._)("Enter the Token ID to retrieve its information"),example:"2210841755728744254022406065208702859408372615270526569220029117882193947069"},rarible:{example:"111 OR https://rarible.com/token/0xd07dc4262bcdbf85190c01c996b4c06a461d2430:111"},axie:{example:"92226"},cryptopunks:{example:"7804"}},this.state={token_id:"",item:a,result:null}}componentDidMount(){m.Z.getNFTs((e=>{this.setState({nfts:e})}))}loadToken(e){e&&e.preventDefault();let{item:t}=this.state,{platform:a}=t,i=this.state.token_id?this.state.token_id.trim():"";i&&("nba_topshot"==a?this.loadTopshotMoment(i):this.loadListingToken(a,i))}loadListingToken(e,t){let{nfts:a}=this.state;if("rarible"==e&&t.startsWith("https://rarible.com")){let e=a.rarible;if(e&&e.contract&&!t.includes(e.contract))return c.Z.showErrorDialog((0,v._)("This NFT is not a Rarible contract. The URL should have the Rarible contract address")+": "+e.contract);let i=t.split(":");i.length>2&&(t=i[2])}m.Z.getNFTDetail(e,t,(e=>{if(e){if(e.nft_properties&&(e.nft_metadata=e.nft_properties),e.photo){let t=e.photo,a=null;t.cover&&(a=t.cover.view_url||null),!a&&t.image_url&&(a=t.image_url.view_url||null),e.nft_metadata.image=a,t.image_url.video_url&&(e.nft_metadata.video=t.image_url.video_url)}if("axie"==e.platform&&e.nft_metadata&&e.nft_metadata.id){let t=e.nft_metadata.id,a=e.name&&!e.name.includes(t)?" "+e.name:"";e.name=`Axie #${t}${a}`}if("topps_mlb"==e.platform&&Array.isArray(e.tags)&&e.nft_metadata){let t=e.nft_metadata;if(t.data&&t.template_mint&&t.template&&t.template.issued_supply){let a=`${t.template_mint} ${(0,v._)("of")} ${t.template.issued_supply}`;t.data.mint_number=a,e.tags.push(`mint_number: ${a}`)}}this.setState({result:e})}}),(e=>{o.Log.error(e),c.Z.showErrorDialog(e)}))}loadTopshotMoment(e){if(e){if(e.startsWith("http")){if(!e.startsWith("https://nbatopshot.com/moment/"))return c.Z.showErrorDialog("Invalid URL.")}else e="https://nbatopshot.com/moment/username+"+e;d.Z.getTopshotMoment(e,(e=>{this.setState({result:e})}),(e=>{o.Log.error(e),c.Z.showErrorDialog(e)}))}}onChangeTokenID(e){this.setState({token_id:e.target.value})}next(){let{token_id:e,item:t,result:a}=this.state;if(!a)return;let{platform:i}=t,{name:l,description:n,nft_metadata:s,tags:r}=a,{image:o,video:m}=s||{};t.name=l,t.description=n,a.photo?(t.photo=a.photo,t.icon_url=null):o&&(t.icon_url=o),m&&(t.video_url=m),c.Z.notEmpty(r)&&(t.tags="sorare"==i?r.concat("id: "+e):r),c.Z.notEmpty(s)&&(t.nft_metadata=s),this.props.next&&this.props.next(t)}render(){let{token_id:e,item:t,result:a}=this.state,{platform:l}=t,n="";if(a){let{name:e,description:t,nft_metadata:l,tags:s}=a,{image:o,video:c,attributes:m}=l||{},d="";"cryptopunks"==a.platform&&(d="nft-cryptopunks-image"),o&&o.includes("https://ipfs.atomichub.io")&&(o=o.replace(/ipfs\.atomichub\.io/,"atomichub-ipfs.com")),c&&c.includes("https://ipfs.atomichub.io")&&(c=c.replace(/ipfs\.atomichub\.io/,"atomichub-ipfs.com"));let p=o&&o.includes("atomichub")?r.Z.config.server_url+"/api/util/image/"+encodeURIComponent(o):o,h=c&&c.includes("atomichub")?r.Z.config.server_url+"/api/util/image/"+encodeURIComponent(c):c;n=i.createElement("div",{className:"item-preview col-12"},i.createElement("div",{className:"row"},i.createElement("div",{className:"col-12 col-md-6 text-center"},c?i.createElement("video",{src:h,autoPlay:!0,loop:!0,muted:!0,"webkit-playsinline":"true",playsInline:!0,style:{maxWidth:"100%"}}):i.createElement("img",{className:"img-fluid thumbnail d-inline-block "+d,src:p})),i.createElement("div",{className:"col-12 col-md-6"},i.createElement("div",null,i.createElement("h2",null,e)),i.createElement("div",{className:"row no-gutters my-3"},i.createElement(pe.Z,{item:a,className:"w-100"})),i.createElement("div",null,i.createElement("button",{className:"select-btn btn btn-primary",onClick:this.next.bind(this)},(0,v._)("Next"))))))}let s=this.PLATFORM_META[l]||{},o=s.label||(0,v._)("Token ID"),c=s.placeholder||(0,v._)("Enter the Token ID to retrieve its information"),m=s.example||"";return i.createElement("div",{id:"edit_item",className:"screen container movie-section"},i.createElement("h1",null,(0,v._)("Start Selling")),i.createElement("div",{className:"edit-item inner-content container-fluid"},i.createElement("div",{className:"row"},i.createElement("div",{className:"col-12"},i.createElement("form",{className:"input-group",onSubmit:this.loadToken.bind(this)},i.createElement("div",{className:"input-group-append"},i.createElement("button",{type:"button",className:"btn btn-outline-secondary",disabled:!0},o)),i.createElement("input",{className:"form-control",value:e,onChange:this.onChangeTokenID.bind(this),type:"text",placeholder:c}),i.createElement("div",{className:"input-group-append"},i.createElement("button",{className:"btn btn-primary",type:"submit"},i.createElement("span",{className:"fa fa-search"})))),m?i.createElement("div",{className:"ml-3"},i.createElement("small",{className:"text-muted"},"Example: ",i.createElement("b",null,m))):"",i.createElement("div",{className:"ml-3"},i.createElement("small",{className:"text-muted"},(0,v._)("Need help selling NFTs?")," ",i.createElement("a",{target:"_blank",href:"https://gameflip.zendesk.com/hc/en-us/sections/1260801656509-Selling-NFTs"},(0,v._)("Check the FAQ."))))),i.createElement("p",{className:"col-12"}," "),n)))}}var ue=a(36839);a(34471);const ge=[{type:P.EKU,title:(0,v._)("Item weighs 8 oz or less. Ship with tracking ($3)"),note:(0,v._)("Use Bubble mailer, best for Games, Toys, or small cables  in original packaging"),photos:["/img/app/ship_parcel.jpg","/img/app/ship_toy.png"]},{type:P.JnL,title:(0,v._)("Item weighs 3 oz or less. Ship in CD mailer & with NO tracking ($1)"),note:(0,v._)("Must use CD mailer, best for Discs, Memory cards, or Cartridges without packaging"),photos:["/img/app/ship_letter.jpg"]},{type:P.gtY,title:(0,v._)("Item weighs more than 8 oz. I’ll will ship the item myself"),note:(0,v._)("You must buy your own mailing label with tracking"),photos:null}],_e=[7,14,30,45,90,180,365],fe={90:(0,v._)("3 months"),180:(0,v._)("6 months"),365:(0,v._)("1 year")},Ee=[1,2,3,7],be=["nba_topshot","splinterlands"];class ve extends i.Component{constructor(e,t){super(e,t),this.state=this.getState(),this.valid=!1,this._onChange=this._onChange.bind(this),this._onChangeProfile=this._onChangeProfile.bind(this)}componentDidMount(){Z.Z.block=!1,g.Z.onChange(this._onChange),u.Z.onChange(this._onChangeProfile),u.Z.checkCardAdded();let e=this.props.match.params,{id:t}=e;t&&c.Z.isUUID4(t)&&g.Z.fetchListing(t,(e=>{if(e.kind==P.Bxu)return c.Z.transitionTo("sell_gig",{id:t});this.loadCustomTagsForm()}),(e=>{o.Log.error(e,"Fetch listing"),c.Z.transitionTo("listings")})),c.Z.setDocumentTitle((0,v._)("Start Selling"))}componentWillUnmount(){Z.Z.block=!0,g.Z.offChange(this._onChange),u.Z.offChange(this._onChangeProfile);let e=g.Z.item;e.id&&"draft"==e.status&&(g.Z.reset(),c.Z.showDialog({title:(0,v._)("Listing is Incomplete"),message:(0,v._)("Your listing has been saved and you can complete it later by navigating to the Listings menu."),ok:{label:(0,v._)("Go to Listings"),callback:e=>{c.Z.hideDialog(),c.Z.transitionTo("listings")}},cancel:{label:(0,v._)("Cancel"),callback:e=>{c.Z.hideDialog()}}}))}getState(){return{item:g.Z.item}}_onChange(){this.setState(this.getState(),(()=>{let{item:e,tags_form:t}=this.state;!t&&e&&this.loadCustomTagsForm()}))}_onChangeProfile(){this.forceUpdate()}onChangeValue(e,t){g.Z.setProp(e,t.target.value)}onChangeTag(e,t){o.Log.debug(e,"Changing tag to value: "+t),g.Z.setTag(e,t)}listOrSave(e){e.preventDefault();let t=this.state.item,a=g.Z.escrow;if(t.category!=P.SkU||t.digital_deliverable!=P.hAy||a!=P.VnA&&a!=P.Fgb||Fe.show(),!this.valid)return;let l=e=>{if(e&&e.message&&e.message.includes("not eligible")){let t=i.createElement("div",{className:"alert alert-danger"},(0,v._)("Before you can list an item, your account needs to be qualified."),i.createElement("br",null),i.createElement("a",{style:{color:"#666"},target:"_blank",href:"https://gameflip.zendesk.com/hc/en-us/articles/360006410293"},(0,v._)("Learn More")," >>"));c.Z.showInfoDialog(t,e.message)}else c.Z.showErrorDialog(e)};if(t.category==P.SkU&&t.digital_deliverable==P.hAy&&a==P.IZR)return g.Z.complete(P.f1I,(e=>{c.Z.transitionTo("listings")}),l);c.Z.showDialog({title:(0,v._)("Ready for Sale!"),message:(0,v._)("Your listing is now ready to be published."),ok:{label:(0,v._)("List Item"),callback:e=>{c.Z.hideDialog(),g.Z.complete(P.IB,(e=>{p.ZP.track(p.G8,e),c.Z.transitionTo("item",{name:c.Z.slug(e.name),id:e.id})}),l)}},cancel:{label:(0,v._)("Save For Later"),callback:e=>{c.Z.hideDialog(),g.Z.complete(P.f1I,(e=>{c.Z.transitionTo("listings")}),l)}}})}deleteListing(){if(c.Z.checkEscrowDepositing(g.Z.escrow,!0))return;let e=this.state.item;c.Z.showDialog({title:(0,v._)("Delete Listing"),message:(0,v._)("Do you want to delete this listing?"),ok:{label:(0,v._)("Delete"),callback:t=>{e.id?m.Z.deleteListing(e.id,(t=>{b.Z.setDeleteItem(e.id),g.Z.reset(),c.Z.hideDialog(),c.Z.transitionTo("listings")}),(e=>{c.Z.hideDialog()})):c.Z.hideDialog()}},cancel:{label:(0,v._)("Cancel"),callback:e=>{c.Z.hideDialog()}}})}loadCustomTagsForm(){let e=g.Z.item.category==P.SkU,t=g.Z.item.category==P.wz$,a=g.Z.item.category==P.xmu;if(!e&&!t&&!a)return;let i=g.Z.game_info?g.Z.game_info.id:null,l=g.Z.item.platform;a&&be.includes(l)?d.Z.getNFTCustomProperties(l,(e=>{this.setState({tags_form:e})}),(e=>{o.Log.error(e,"getNFTCustomProperties: error")})):i?d.Z.getGameCustomProperties(i,(e=>{o.Log.debug(e,"loadCustomTagsForm: result"),this.setState({tags_form:e})}),(e=>{o.Log.error(e,"loadCustomTagsForm: error")})):t&&g.Z.item.digital&&d.Z.getMovieCustomProperties((e=>{this.setState({tags_form:e})}),(e=>{o.Log.error(e,"getMovieCustomProperties: error")}))}validateListing(){let{item:e,tags_form:t}=this.state,a=g.Z.media,i=g.Z.steam_price,l=g.Z.item.category==P.SkU,n=g.Z.item.category==P.xmu,s=!1;return e.id&&e.category&&e.name&&e.description&&c.Z.isValidPrice(e.price)&&g.Z.images.length>=1&&(a==P.EYe?e.condition&&e.shipping_predefined_package&&e.shipping_paid_by&&e.shipping_within_days&&(s=!0):(e.digital_region||n)&&(e.digital_deliverable==P.tFI&&null!=e.shipping_within_days||e.digital_deliverable==P.hAy&&(e.shipping_within_days>0||g.Z.vault.trim()||g.Z.escrow==P.X8_||g.Z.escrow==P.IZR)||e.digital_deliverable==P.a_C&&"gameflip"==e.platform)&&(s=!0,l&&i&&!c.Z.isValidSuggestedPrice(e.price,100*i)&&(s=!1),t&&t.map(((e,t)=>{let{name:a,required:i}=e,l=g.Z.getTag(a)||"";i&&!l&&(s=!1)})))),s}createNewListing(e){e.icon_url&&g.Z.setDefaultCoverPhoto(e.icon_url),g.Z.postItem(e)}next(e){if(!e.media||!e.category)return void o.Log.debug(e,"Need required info for starting a new listing");let{media:t,category:a,platform:i,genre:l,photo:n}=e;g.Z.media=t;let s=c.Z.clone(g.Z.item);s.category=a.id,i&&(s.platform=i.id),l&&(s.genre=[l.id]),g.Z.setItemInfo(a.id,i);let r=!1;if([P.YJJ,P.SkU,P.wz$,P.tVC,P.xmu].indexOf(s.category)>=0)r=!0,s.category==P.xmu&&be.includes(s.platform)&&(r=!1);else if(n)g.Z.setDefaultCoverPhoto(n.preview);else if(t==P.a$Y){let e=i&&i.cover_image?i.cover_image:"/img/app/digital_cover_gf.jpg";g.Z.setDefaultCoverPhoto(e)}if(c.Z.isQualified()||(g.Z.item=s,r=!0),r)return this.forceUpdate();this.createNewListing(s)}render(){let{id:e}=this.props.match.params,t=g.Z.item;if(!t.id&&u.Z.isVerified&&t.category){if(!c.Z.isQualified())return i.createElement(ue.Z,{listing:t,onComplete:this.forceUpdate.bind(this)});if(t.category==P.SkU){let{steam_app_id:e,platform:a}=g.Z.game_info;return"ethereum"==a?i.createElement(de,{item:t}):e?i.createElement(ee,{game_info:g.Z.game_info,item:t,next:this.createNewListing.bind(this)}):i.createElement(ae,{game_info:g.Z.game_info,item:t,next:this.createNewListing.bind(this)})}if(t.category==P.YJJ&&!t.id)return i.createElement(re,{item:t,next:this.createNewListing.bind(this)});if(t.category==P.wz$&&!t.id)return i.createElement(ce,{item:t,next:this.createNewListing.bind(this)});if(t.category==P.tVC&&!t.id)return i.createElement(me,{item:t,next:this.createNewListing.bind(this)});if(t.category==P.xmu&&!be.includes(t.platform)&&!t.id)return i.createElement(he,{item:t,next:this.createNewListing.bind(this)})}else{if(t.id)return this.renderEdit();if(!e||!c.Z.isUUID4(e))return i.createElement(ye,{urlParams:this.props.match.params,onNext:this.next.bind(this)})}return!1}renderEdit(){let{item:e,tags_form:t}=this.state,a=g.Z.media,l=g.Z.item.category==P.SkU,n=g.Z.item.category==P.xmu,s=l&&g.Z.escrow==P.IZR;return this.valid=this.validateListing(),((l?g.Z.game_info:{}).delivery||[]).indexOf("code"),i.createElement("div",{id:"edit_item",className:"screen container"},i.createElement("h1",null,(0,v._)("Listing Details")),i.createElement("form",{className:"edit-item inner-content container-fluid",onSubmit:this.listOrSave.bind(this)},i.createElement(we,null),i.createElement(Ce,{item:e,onChangeValue:this.onChangeValue}),a==P.a$Y?i.createElement(N.Z,{meta:t,unmodifiables:l?["type","Type"]:null,getTag:e=>g.Z.getTag(e),setTag:(e,t)=>{g.Z.setTag(e,t)}}):"",i.createElement(ke,{item:e}),a==P.EYe?i.createElement(xe,{condition:e.condition,onChangeValue:this.onChangeValue}):"",a==P.EYe?i.createElement(Ze,{category:e.category,shipping_predefined_package:e.shipping_predefined_package,shipping_paid_by:e.shipping_paid_by,shipping_within_days:e.shipping_within_days,onChangeValue:this.onChangeValue}):"",a==P.a$Y&&!l&&!n||l&&Array.isArray(e.tags)&&e.tags.indexOf("type: Code")>=0?i.createElement(De,{digital_region:e.digital_region,onChangeValue:this.onChangeValue}):"",a==P.a$Y?i.createElement(Ie,{category:g.Z.item.category,platform:g.Z.item.platform,digital_deliverable:e.digital_deliverable,shipping_within_days:e.shipping_within_days,expire_in_days:e.expire_in_days,onChangeValue:this.onChangeValue}):"",i.createElement(Pe,{digital:e.digital,price:e.price,accept_currency:e.accept_currency,name:e.name,onChangeValue:this.onChangeValue}),l&&g.Z.deliveryOptions.escrow?"":i.createElement(Le,{expire_in_days:e.expire_in_days,onChangeValue:this.onChangeValue}),i.createElement(Se,{visibility:e.visibility,onChangeValue:this.onChangeValue}),i.createElement(Te,null),i.createElement("p",{className:"note"},(0,v._)("Selling prohibited and counterfeit <a href='https://gameflip.zendesk.com/hc/en-us/articles/206128677' target='_blank'>items</a> are against the law, and we do not allow such items on Gameflip.",{__html:!0})," ",(0,v._)("<a href='https://gameflip.zendesk.com/hc/en-us/articles/360006410293' target='_blank'>Additional requirements</a> may be required to list or sell in certain categories.",{__html:!0})),i.createElement("div",{className:"action-buttons row"},i.createElement("div",{className:"col-6 text-left"},i.createElement("button",{className:"btn btn-primary"+(this.valid?"":" disabled"),type:"submit"},i.createElement("span",{className:"fa fa-check","aria-hidden":"true"})," ",s?(0,v._)("Ready"):(0,v._)("Done"))),i.createElement("div",{className:"col-6 text-right"},i.createElement("button",{className:"btn btn-outline-secondary",type:"button",onClick:this.deleteListing.bind(this)},i.createElement("span",{className:"fa fa-trash","aria-hidden":"true"})," ",(0,v._)("Delete"))))),i.createElement(Ae,null),i.createElement(Fe,null),i.createElement(S,null))}}class ye extends i.Component{constructor(e,t){super(e,t),this.state={media:null,category:null,platform:null,genre:null,photo:null,show_all:!1},this.valid=!1,this.next=this.next.bind(this),this._onChange=this._onChange.bind(this),this._onChangeItem=this._onChangeItem.bind(this)}componentDidMount(){h.Z.onChange(this._onChange),u.Z.onChange(this.next),g.Z.onChange(this._onChangeItem);let{urlParams:e}=this.props;if(e&&e.id){let t=this.categoriesMap()[e.id];if(t&&(this.select({category:t}),e.topic)){let a=this.getPlatforms(t);for(let t=0;t<a.length;t++)if(c.Z.slug(a[t].label)==e.topic){this.select({platform:a[t]});break}}}}componentDidUpdate(){let e=this.state.category||{};if(this.valid&&[P.SkU,P.wz$,P.tVC,P.xmn,P.xmu].indexOf(e.id)>=0){if(!u.Z.isQualified&&P.SkU==e.id&&!g.Z.item.digital_deliverable){let e=this.state.platform;if(e&&e.delivery&&e.delivery.length>1&&e.delivery.indexOf("escrow")>=0)return void Me.show()}this.next()}}componentWillUnmount(){h.Z.offChange(this._onChange),u.Z.offChange(this.next),g.Z.offChange(this._onChangeItem)}_onChange(){this.forceUpdate()}_onChangeItem(){let e=g.Z.media;e&&this.setState({media:e})}_updatePath(e,t){let a=e?{category:c.Z.slug(e.category),platform:c.Z.slug(e.platform||"")}:{},i=t||(this.state.media==P.EYe?{media:P.EYe}:null);c.Z.replaceState("sell_item",a,i)}select(e,t){if(!e.category||e.category.id!=P.xmn||u.Z.isIDVerified){if(e.category&&this._updatePath({category:e.category.label}),e.category||this.state.category){let t=e.category||this.state.category;t.digital_only?e.media=P.a$Y:t.digital_enabled||(e.media=P.EYe)}if(e.platform&&this.state.category){let t=e.platform.media_type;!e.media&&t&&(1==t.length?e.media=t[0]==P.EYe?P.EYe:P.a$Y:t.length>1&&Ue.show()),this._updatePath({category:this.state.category.label,platform:e.platform.label})}o.Log.debug(e,"Setting prop"),this.setState(e)}else c.Z.showInfoDialog(i.createElement("div",null,(0,v._)("ID verification is required to sell game accounts. To verify, please go to "),i.createElement(o.Link,{to:"wallet",params:{tab:"verify"},onClick:()=>(c.Z.hideDialog(),!1)},(0,v._)("Menu > Wallet > Verify"))),(0,v._)("ID verification required"))}next(){if(!this.valid)return;if(!c.Z.checkVerified())return;let{media:e,category:t,platform:a,genre:i,photo:l}=this.state;if(!e)return Ue.show();this.props.onNext&&this.props.onNext({media:e,category:t,platform:a,genre:i,photo:l})}categoriesMap(){let e={},t=h.Z.config.categories;return Array.isArray(t)&&t.forEach((t=>{t.label&&(e[c.Z.slug(t.label)]=t)})),e}getPlatforms(e){return e&&e.platform&&e.platform.items?e.platform.items:[]}filterPlatforms(e,t){return e&&t&&(e=e.filter((e=>!e.media_type||e.media_type.indexOf(t)>=0))),e}categoryPlatforms(e){let t=null;return this.state.media,e&&e.platform&&(t=e.platform.items,e.digital_only?t=this.filterPlatforms(t,P.a$Y):e.digital_enabled||(t=this.filterPlatforms(t,P.EYe)),e.id==P.SkU&&(t=t.filter((e=>{if("steam"!=e.id)return!0})))),t}onDrop(e){o.Log.debug(e,"onDrop files");let t=e[0];c.Z.notValidImage(t)||this.setState({photo:t})}render(){let{media:e,category:t,platform:a,genre:l,photo:n,show_all:r}=this.state,o=(c.Z.categories()||[]).filter((e=>!e.kind||e.kind==P.Iox)),m="";if(o){let e=o.map((e=>{let a=t&&t.id==e.id;return i.createElement(Ne,{key:e.id,category:e,selected:a,onClick:this.select.bind(this,{category:e,platform:null,genre:null,show_all:!1})})}));m=i.createElement("div",{className:"edit-item-category section"},i.createElement("h2",null,i.createElement("span",null,(0,v._)("Select Category"))),i.createElement("div",{className:"row"},e))}let d="";if(t&&t.platform){let e=this.categoryPlatforms(t),l=e.filter((e=>r||e.visible)),n=e.length!=l.length,s=l.map((e=>{let l=a&&a.id==e.id;return i.createElement(Ne,{key:e.id,category:t,platform:e,selected:l,onClick:this.select.bind(this,{platform:e})})}));d=i.createElement("div",{className:"edit-item-category section"},i.createElement("h2",null,i.createElement("span",null,(0,v._)("Select {subcategory}",{subcategory:t.platform.label}))),i.createElement("div",{className:"row"},s),n&&!r?i.createElement("div",{className:"row"},i.createElement("button",{className:"btn btn-clear",onClick:()=>{this.setState({show_all:!0})}},(0,v._)("Show more"))):"")}let p=t&&-1===[P.YJJ,P.SkU,P.tVC,P.wz$,P.xmu].indexOf(t.id),h="";t&&p&&u.Z.isVerified&&(h=i.createElement("div",{className:"edit-item-photos section"},i.createElement("h2",null,i.createElement("span",null,(0,v._)("Screenshot or Photo")," ")),i.createElement("p",{className:"row text-muted"},(0,v._)("We recommend using your own 640x640 screenshot or photo that clearly show what you are selling. A default image is used if one is not supplied.")),i.createElement("div",{className:"photo-row row"},i.createElement("div",{className:"photo col-3 col-md-2"},i.createElement("div",{className:"square-responsive"+(n?"":" pointer")},n?i.createElement(k.Z,{className:"img-fluid bg_3d",src:n.preview,dim:200}):i.createElement(s.Z,{className:"dropzone square-content text-center",onDrop:this.onDrop.bind(this),multiple:!1,accept:"image/*"},i.createElement("div",null,(0,v._)("Click or Drag & Drop<br/>Image here",{__html:!0})))))))),this.valid=t&&(!t.platform||a),e==P.a$Y?(0,v._)("Digital items include In-Game items & skins, Game codes, CD keys, Gift codes or Digital movies."):((0,v._)("Note"),(0,v._)("Shipping within Continental US only"),(0,v._)("Physical items include Game discs, Consoles, Toys, or Accessories."));let g=e==P.a$Y?i.createElement("div",{className:"row"},i.createElement("p",{className:"col-12 text-muted"},(0,v._)("By listing on Gameflip, you confirm that you legally own the item(s) or that you have the full rights to sell the item(s). You are responsible for verifying what rights you have, and for adhering to all applicable terms and conditions with respect to the respective game(s), game publisher(s) or platform provider(s)."))):"";return i.createElement("div",{id:"edit_item",className:"screen container"},i.createElement("h1",null,(0,v._)("Start Selling")),i.createElement("div",{className:"inner-content"},i.createElement("div",{className:"edit-item container-fluid"},m,d,h,g,i.createElement("div",{className:"row"},i.createElement("p",{className:"col-12 note"},(0,v._)("Selling prohibited and counterfeit <a href='https://gameflip.zendesk.com/hc/en-us/articles/206128677' target='_blank'>items</a> are against the law, and we do not allow such items on Gameflip.",{__html:!0}))),i.createElement("div",{className:"row"},i.createElement("div",{className:"col-12"},i.createElement("button",{className:"btn btn-primary"+(this.valid?"":" disabled"),onClick:this.next.bind(this)},(0,v._)("Next")))))),i.createElement(Ue,null),i.createElement(Me,null))}}class Ne extends i.Component{render(){let{category:e,platform:t,genre:a,selected:l,onClick:n}=this.props,s="",r="",o="cell col-4 col-md-3 col-lg-2 pointer";return l&&(o+=" selected"),e&&!t?(s=e.label,r=e.image_orange):e&&t?(s=t.label,t.image?r=t.image:o+=" noimage"):a&&(s=a.label,o+=" noimage"),i.createElement("div",{className:o,onClick:n},r?i.createElement("img",{className:"img-fluid thumbnail",src:r}):"",i.createElement("p",{className:"text-center"},s))}}class we extends i.Component{constructor(e,t){super(e,t),this.state=this.getState(),this._onChange=this._onChange.bind(this)}getState(){return{images:g.Z.images}}componentDidMount(){g.Z.onChangeImage(this._onChange)}componentWillUnmount(){g.Z.offChangeImage(this._onChange)}_onChange(){this.setState(this.getState())}onDrop(e){o.Log.debug(e,"onDrop files");let t=e[0];c.Z.notValidImage(t)||g.Z.processPhoto(t.preview)}onDelete(e,t){c.Z.showDialog({title:(0,v._)("Delete Photo"),message:(0,v._)("Do you want to delete this photo?"),ok:{label:(0,v._)("Delete"),callback:t=>{g.Z.deletePhoto(e),c.Z.hideDialog()}},cancel:{label:(0,v._)("Cancel"),callback:e=>{c.Z.hideDialog()}}})}render(){let e=this.state.images,t=[],a=g.Z.item.category==P.SkU,l=g.Z.item.category==P.xmu,n=g.Z.item.category==P.xmn,r=g.Z.game_info,o=c.Z.escrowEnabled(r),m=o?1:4,d=e&&e.length>=(n?2:1)?"":"required-square-content",p=!(o||l&&!c.Z.isEmpty(g.Z.item.nft_metadata));for(let l=0;l<m;l++){let n="",r=!1;if(l<e.length){let t=e[l];if(null==t)n=i.createElement("div",{className:"square-responsive"},i.createElement("div",{className:"square-content"},i.createElement("div",{className:"spinner"},i.createElement("div",{className:"bounce1"}),i.createElement("div",{className:"bounce2"}),i.createElement("div",{className:"bounce3"}))));else if(r=!o&&c.Z.isEmpty(g.Z.item.nft_metadata),t.mime_type&&/^video\//.test(t.mime_type))n=i.createElement("video",{className:"img-fluid",autoPlay:!0,loop:!0,muted:!0,playsInline:!0,controls:!1,controlsList:"nodownload"},i.createElement("source",{src:t.view_url,type:t.mime_type}));else if(t.poster_selected&&t.posters&&t.posters[t.poster_selected]["640x640"]){let e=t.posters[t.poster_selected]["640x640"].view_url;n=i.createElement("div",{className:"square-responsive pointer"},i.createElement("div",{className:"square-content"}),i.createElement(k.Z,{className:"img-fluid "+(a?"bg_3d":"bg_2d"),src:e}))}else n=i.createElement("div",{className:"square-responsive pointer",onClick:r?this.onDelete.bind(this,l):null},i.createElement("div",{className:"square-content"}),i.createElement(k.Z,{className:"img-fluid "+(a?"bg_3d":"bg_2d"),src:t.view_url,dim:200}))}else n=l==e.length&&p?i.createElement("div",{className:"square-responsive pointer"},i.createElement(s.Z,{className:"dropzone square-content text-center "+d,onDrop:this.onDrop.bind(this),multiple:!1},i.createElement("div",null,(0,v._)("Click or Drag & Drop<br/>Image here",{__html:!0})))):i.createElement("div",{className:"square-responsive"},i.createElement("div",{className:"square-content"}));t.push(i.createElement("div",{className:"photo col-3 col-md-2",key:l},n,r?i.createElement("img",{className:"icon-delete pointer",src:"/img/app/icon_delete_photo.png",onClick:this.onDelete.bind(this,l)}):""))}return i.createElement("div",{className:"edit-item-photos section"},i.createElement("h2",null,i.createElement("span",null,(0,v._)("Screenshots / Photos"))),i.createElement("p",{className:"row text-muted"},(0,v._)("Your screenshots should clearly show what you are selling. 640x640 is recommended.")),i.createElement("div",{className:"photo-row row"},t))}}class Ce extends i.Component{render(){let e=this.props.item,t=this.props.onChangeValue,a=e.name||"",l=e.description||"",n=e.category==P.SkU,s=e.category==P.xmu,r=g.Z.game_info,o=n||s&&!be.includes(e.platform),c=n&&r&&!r.editable;return i.createElement("div",{className:"edit-item-description section"},i.createElement("h2",null,i.createElement("span",null,(0,v._)("Description"))),i.createElement("p",{className:"row text-muted"},(0,v._)("The listing title and description must be accurate and as informative as possible (no random or lottery-like listing). Misleading description is a violation of our terms of service.")),i.createElement("div",{className:"row"+(a?"":" has-error")},i.createElement("input",{className:"form-control",type:"text",placeholder:(0,v._)("Game title or listing title"),value:a,onChange:t.bind(this,"name"),disabled:o})),i.createElement("div",{className:"row"+(l?"":" has-error")},i.createElement("textarea",{className:"form-control",placeholder:(0,v._)("Item description or Listing details"),rows:"6",value:l,onChange:t.bind(this,"description"),disabled:c})))}}class Se extends i.Component{render(){let e=this.props.visibility,t=this.props.onChangeValue;return i.createElement("div",{className:"edit-item-visibility section"},i.createElement("h2",null,i.createElement("span",null,(0,v._)("Visibility"))),i.createElement("div",{className:"row"},i.createElement("div",{className:"col-8 col-md-3 text-left"},i.createElement("select",{className:"form-control",name:"visibility",value:e,onChange:t.bind(this,"visibility")},i.createElement("option",{value:P.kS2},(0,v._)("Public")),i.createElement("option",{value:P.VHQ},(0,v._)("Unlisted"))))),i.createElement("div",{className:"row"},i.createElement("span",{className:"note"},(0,v._)("Public listings can be seen and searched by anyone using Gameflip. Unlisted listings can be seen and shared by anyone with the link."))))}}class ke extends i.Component{constructor(e,t){super(e,t),this.state={product:null}}componentDidMount(){if(this.props.item&&this.props.item.upc){let e=this.props.item.upc;this.lookup(e)}}lookup(e){m.Z.getProduct(e,(e=>{this.setState({product:e})}),(e=>{}))}render(){let e=this.props.item,t=e.category?e.category:"",a=e.platform?e.platform:"",l=e.genre?e.genre:[],n=this.state.product||{},s=e.category==P.YJJ||e.category==P.yD1||e.category==P.SkU?(0,v._)("Platform"):(0,v._)("Subcategory"),r=c.Z.platformName(t,a);!r&&n.platform&&(r=c.Z.platformName(n.category,n.platform));let o=[{header:(0,v._)("Category"),content:c.Z.categoryName(t,e.upc),contentprops:{size:9}},{header:s,content:r,contentprops:{size:9}}];if(n&&(n.name&&o.splice(0,0,{header:(0,v._)("Title"),content:n.name,contentprops:{size:9}}),e.category==P.YJJ&&n.rating&&o.push({header:(0,v._)("Rating"),content:n.rating,contentprops:{size:9}})),l&&l.length>0){let e=[];l.map((t=>{let a=c.Z.genreName(t);a&&e.push(a)})),e.length>0&&o.push({header:(0,v._)("Genre"),content:e.join(", "),contentprops:{size:9}})}return i.createElement("div",{className:"edit-item-category-info section"},i.createElement("h2",null,i.createElement("span",null,(0,v._)("Category"))),i.createElement("div",{className:"row"},i.createElement("div",{className:"col-12 col-md-8 col-lg-8"},i.createElement(x.Z,{items:o}))))}}class xe extends i.Component{render(){let{condition:e,onChangeValue:t}=this.props;return i.createElement("div",{className:"edit-item-condition section"},i.createElement("h2",null,i.createElement("span",null,(0,v._)("Condition"))),i.createElement("div",{className:"row"+(e?"":" has-error")},i.createElement("div",{className:"col-8 col-md-3 text-left"},i.createElement("select",{className:"form-control",name:"condition",value:e,onChange:t.bind(this,"condition")},i.createElement("option",{value:""}," - "),i.createElement("option",{value:"new"},(0,v._)("New")),i.createElement("option",{value:"like new"},(0,v._)("Like New")),i.createElement("option",{value:"good"},(0,v._)("Good")),i.createElement("option",{value:"fair"},(0,v._)("Fair")),i.createElement("option",{value:"poor"},(0,v._)("Poor"))))))}}class Ze extends i.Component{render(){let{category:e,shipping_predefined_package:t,shipping_paid_by:a,shipping_within_days:l,onChangeValue:n}=this.props,s=t?"":"required-section",r=ge.map((a=>{if(a.type==P.EKU&&e==P.yD1)return"";if(a.type==P.JnL&&e!=P.YJJ&&e!=P.wz$)return"";let l="";return a.photos&&(l=a.photos.map(((e,t)=>i.createElement("img",{className:"shipping-option-photo",src:e,key:t})))),i.createElement("div",{className:"row",key:a.type},i.createElement("div",{className:"col-2 col-md-1 text-right"},i.createElement("input",{type:"radio",name:"shipping-option",value:a.type,checked:t==a.type,onChange:n.bind(this,"shipping_predefined_package")})),i.createElement("div",{className:"col-10 col-md-11"},a.title,i.createElement("br",null),i.createElement("span",{className:"note"},a.note),i.createElement("br",null),l,i.createElement("div",{className:"clear"})))})),o="";t&&t==P.gtY||(o=i.createElement("div",null,i.createElement("h3",null,(0,v._)("Who pays for shipping ?")),i.createElement("div",{className:"row"},i.createElement("div",{className:"col-2 col-md-1 text-right"},i.createElement("input",{type:"radio",name:"payer-option",value:"buyer",checked:"buyer"==a,onChange:n.bind(this,"shipping_paid_by")})),i.createElement("div",{className:"col-10 col-md-11"},(0,v._)("The buyer will pay for shipping"))),i.createElement("div",{className:"row"},i.createElement("div",{className:"col-2 col-md-1 text-right"},i.createElement("input",{type:"radio",name:"payer-option",value:"seller",checked:"seller"==a,onChange:n.bind(this,"shipping_paid_by")})),i.createElement("div",{className:"col-10 col-md-11"},(0,v._)("I will pay for shipping")))));let c=u.Z.profile.sell||0,m=Ee.map((e=>{if(c<300&&e>=7)return!1;let t=(0,v._)("Within {d} day(s)",{d:e});return i.createElement("option",{key:e,value:e},t)}));return i.createElement("div",{className:"edit-item-shipping section"},i.createElement("h2",null,i.createElement("span",null,(0,v._)("U.S. Shipping"))),i.createElement("p",{className:"row text-muted"},(0,v._)("Important"),": ",(0,v._)("Shipping is currently offered only <u>within</u> the U.S. Use of tracking is highly recommended. Gameflip will not reimburse you if your item is lost and/or not confirmed to be delivered to the Buyer.",{__html:!0})),i.createElement("h3",null,(0,v._)("Select a shipping option for your item")),i.createElement("div",{className:s},r),o,i.createElement("h3",null,(0,v._)("When will you ship ?")),i.createElement("div",{className:"row"},i.createElement("div",{className:"col-8 col-md-3 text-left"},i.createElement("select",{className:"form-control",name:"shipping_within_days",value:l,onChange:n.bind(this,"shipping_within_days")},m))),i.createElement("p",{className:"row text-muted"},(0,v._)("Important"),": ",(0,v._)("You must ship the item within the promised time frame to avoid cancellation and bad rating")))}}class De extends i.Component{render(){let{digital_region:e,onChangeValue:t}=this.props;return i.createElement("div",{className:"edit-item-region section"},i.createElement("h2",null,i.createElement("span",null,(0,v._)("Region / Server Restriction"))),i.createElement("p",{className:"row text-muted"},(0,v._)("Please be specific with any restrictions for this digital item or code. Example: game key for US region or server only")),i.createElement("div",{className:"row"},i.createElement("div",{className:"col-2 col-md-1 text-right"},i.createElement("input",{type:"radio",name:"region",value:"none",checked:null==e||"none"==e,onChange:t.bind(this,"digital_region")})),i.createElement("div",{className:"col-10 col-md-11"},(0,v._)("None / Global"))),i.createElement("div",{className:"row"},i.createElement("div",{className:"col-2 col-md-1 text-right"},i.createElement("input",{type:"radio",name:"region",value:"",checked:null!=e&&"none"!=e,onChange:t.bind(this,"digital_region")})),i.createElement("div",{className:"col-10 col-md-7"},i.createElement("input",{className:"region-restricted form-control",type:"text",placeholder:(0,v._)("Please be specific and clear with any restrictions."),value:e&&"none"!=e?e:"",disabled:null==e||"none"==e,onChange:t.bind(this,"digital_region")}))))}}class Ie extends i.Component{constructor(e,t){super(e,t),this.state={escrow:g.Z.escrow,vault:g.Z.vault},this.game=g.Z.game_info,this._onChangeEscrow=this._onChangeEscrow.bind(this),this._onChangeVault=this._onChangeVault.bind(this)}componentDidMount(){g.Z.onChangeEscrow(this._onChangeEscrow),g.Z.onChangeVault(this._onChangeVault)}componentWillUnmount(){g.Z.offChangeEscrow(this._onChangeEscrow),g.Z.offChangeVault(this._onChangeVault)}_onChangeEscrow(){this.setState({escrow:g.Z.escrow})}_onChangeVault(){this.setState({vault:g.Z.vault})}openVaultDialog(){this.props.digital_deliverable==P.hAy&&Ae.show()}onChangeValue(e,t){let a=this.props.digital_deliverable;"shipping_within_days"==e&&a!=P.tFI&&a!=P.hAy||"digital_deliverable"==e&&t.target.value==P.tFI&&c.Z.checkEscrowDepositing(g.Z.escrow,!0)||"digital_deliverable"==e&&t.target.value==P.hAy&&this.state.escrow==P.vrM||("digital_deliverable"==e&&t.target.value==P.tFI&&g.Z.escrow==P.VnA&&g.Z.deleteEscrowDeposit((e=>{g.Z.escrow=""}),(e=>{})),this.props.onChangeValue(e,t))}openEscrowDialog(){if(!c.Z.getTradeUrl())return;let e=this.state.escrow;if(e!=P.IZR)if(e!=P.vrM){if(e!=P.X8_){let e=[];this.props.digital_deliverable!=P.hAy&&e.push({op:"replace",path:"/digital_deliverable",value:P.hAy}),0!==this.props.shipping_within_days&&e.push({op:"replace",path:"/shipping_within_days",value:0}),365!==this.props.expire_in_days&&e.push({op:"replace",path:"/expire_in_days",value:365}),e.length>0&&g.Z.setProps(e)}Fe.show()}else c.Z.showInfoDialog((0,v._)("This feature is disabled when the item for this listing is returned to you or when you've exceeded the maximum number of unsold listings using Bot delivery."));else c.Z.showInfoDialog((0,v._)("The item was deposited but is now on trade hold until {held_until}. By entering the price and click Ready, the listing will automatically go On Sale when the trade hold is removed.",{held_until:g.Z.held_until}))}render(){let{category:e,platform:t,digital_deliverable:a,shipping_within_days:l}=this.props,n=this.onChangeValue,s=this.state.escrow,r=this.state.vault,o=[1,2,3].map((e=>i.createElement("div",{key:e,className:"row"},i.createElement("div",{className:"col-2 col-md-1 text-right"},i.createElement("input",{className:"pointer",type:"radio",name:"delivery-transfer",value:e,checked:(a==P.tFI||a==P.hAy)&&l==e,onChange:n.bind(this,"shipping_within_days")})),i.createElement("div",{className:"col-10 col-md-11"},(0,v._)("{d} day(s)",{d:e})))));if(o.push(i.createElement("div",{key:"note",className:"row"},i.createElement("div",{className:"col-12 text-muted"},i.createElement("b",null,(0,v._)("Important")),": ",(0,v._)("You must send the item within the promised time frame.")," ",i.createElement("span",{className:"text-danger"},(0,v._)("Do NOT send the item to the buyer until payment processing is successful."))))),a==P.hAy){let e=r&&a==P.hAy&&0==l?i.createElement("span",null,"(",i.createElement("a",{className:"pointer",onClick:this.openVaultDialog.bind(this)},(0,v._)("Digital Vault")),")"):"";o.unshift(i.createElement("div",{key:"vault",className:"row"},i.createElement("div",{className:"col-2 col-md-1 text-right"},i.createElement("input",{type:"radio",name:"delivery-code",value:"0",checked:a==P.hAy&&0==l&&e,onChange:n.bind(this,"shipping_within_days"),onClick:this.openVaultDialog.bind(this)})),i.createElement("div",{className:"col-10 col-md-11"},(0,v._)("Automatic delivery")," ",e,i.createElement("br",null),i.createElement("span",{className:"note"},(0,v._)("Use this option for faster transaction & payment.")))))}let c=(0,v._)("Deposit Item");switch(s){case P.VnA:c=(0,v._)("Deposit Pending");break;case P.IZR:c=(0,v._)("On Hold");break;case P.X8_:c=(0,v._)("Return Item");break;case P.Fgb:c=(0,v._)("Return Pending");break;case P.vrM:c=(0,v._)("Function not available, see why!")}let m=i.createElement("span",null,"(",i.createElement("a",{className:"pointer",onClick:this.openEscrowDialog.bind(this)},c),")"),d=u.Z.isQualified,p=g.Z.deliveryOptions,h=!a||isNaN(l)?" required-section":"";return i.createElement("div",{className:"edit-item-delivery section"+h},i.createElement("h2",null,i.createElement("span",null,(0,v._)("Delivery Method"))),p.escrow?i.createElement("div",{className:"media"},i.createElement("div",{className:"mr-2"},i.createElement("div",{className:"input-group"},i.createElement("div",{className:"input-group-prepend"},s==P.vrM?i.createElement("input",{className:"disabled",type:"radio",name:"delivery",value:"code",checked:!1,readOnly:!0}):i.createElement("input",{className:"pointer",type:"radio",name:"delivery",value:"code",checked:a==P.hAy&&s!=P.vrM,onClick:this.openEscrowDialog.bind(this)})),i.createElement("img",{className:"img-digital-delivery",src:"/img/app/icon_delivery_bot.png"}))),i.createElement("div",{className:"media-body"},s==P.IZR?i.createElement("p",{className:"row text-muted"},(0,v._)("Automatic delivery via Bot")," ",m,i.createElement("br",null),i.createElement("span",{className:"text-danger"},(0,v._)("The item was deposited but is now on trade hold until {held_until}. By entering the price and click Ready, the listing will automatically go On Sale when the trade hold is removed.",{held_until:g.Z.held_until}))):s==P.vrM?i.createElement("p",{className:"row text-muted"},(0,v._)("Automatic delivery via Bot")," ",m,i.createElement("br",null),i.createElement("span",{className:"text-danger"},(0,v._)("This option is no longer available after the item is returned to you."))):i.createElement("p",null,(0,v._)("Automatic delivery via Bot")," ",m,i.createElement("br",null),i.createElement("span",{className:"note"},(0,v._)("Gameflip Bot holds and delivers your item to the buyer when your listing is sold. You can take back your item any time if the listing is not sold."))))):"",(p.transfer||p.address)&&d?i.createElement("div",{className:"media"},i.createElement("div",{className:"mr-2"},i.createElement("div",{className:"input-group"},i.createElement("div",{className:"input-group-prepend"},i.createElement("input",{className:"pointer",type:"radio",name:"delivery",value:"transfer",checked:a==P.tFI,onChange:n.bind(this,"digital_deliverable")})),i.createElement("img",{className:"img-digital-delivery",src:"/img/app/icon_delivery_transfer.png"}))),i.createElement("div",{className:"media-body"},i.createElement("p",{className:"row text-muted"},(0,v._)("I will coordinate with buyer to transfer.")),a==P.tFI?o:"")):"",p.code&&d?i.createElement("div",{className:"media"},i.createElement("div",{className:"mr-2"},i.createElement("div",{className:"input-group"},i.createElement("div",{className:"input-group-prepend"},i.createElement("input",{className:"pointer",type:"radio",name:"delivery",value:"code",checked:a==P.hAy,onChange:n.bind(this,"digital_deliverable")})),i.createElement("img",{className:"img-digital-delivery",src:r&&0==l?"/img/app/icon_delivery_key_instant.png":"/img/app/icon_delivery_key.png"}))),i.createElement("div",{className:"media-body"},i.createElement("p",{className:"text-muted"},(0,v._)("I will send a key / code for activation"),i.createElement("br",null),i.createElement("span",{className:"note"},(0,v._)("For redeemable key or code that can be activated immediately"))),a==P.hAy?o:"")):"",p.contract?i.createElement("div",{className:"media"},i.createElement("div",{className:"mr-2"},i.createElement("div",{className:"input-group"},i.createElement("div",{className:"input-group-prepend"},i.createElement("input",{className:"pointer",type:"radio",name:"delivery",value:"contract",checked:a==P.a_C,onChange:n.bind(this,"digital_deliverable")})),i.createElement("img",{className:"img-digital-delivery",src:"/img/app/icon_delivery_bot.png"}))),i.createElement("div",{className:"media-body"},i.createElement("p",{className:"row text-muted"},(0,v._)("Your item will be transfered automatically to the buyer by a Gameflip contract that you had approved.")))):"")}}class Pe extends i.Component{constructor(e,t){super(e,t);let{price:a,accept_currency:i}=this.props;i||(i=P.qBs);let l=this.acceptCurrencies(i);this.state={price:a,accept_currency:i,currencies:l,steam_price:0,steam_price_formatted:""}}acceptCurrencies(e){e||(e=P.qBs);let t={};return e==P.QV0?(t[P.qBs]=!0,t[P.jtz]=!0):t[e]=!0,t}componentDidUpdate(e,t){try{if(JSON.stringify(this.props)!==JSON.stringify(e)){let e=this.props.accept_currency,t=this.acceptCurrencies(e);this.setState({price:this.props.price,accept_currency:e,currencies:t})}}catch(e){o.Log.error(e)}}componentDidMount(){let e=g.Z.steam_properties;if(e&&e.appid){let t=e.market_hash_name||e.name;d.Z.getSteamPrice(e.appid,t,(e=>{o.Log.debug(e,"SteamSection.getSteamPrice: result");let t=c.Z.lowestPrice(e.lowest_price,e.median_price);t&&(g.Z.steam_price=t,this.setState({steam_price:t,steam_price_formatted:n().formatMoney(t)}))}),(e=>{o.Log.error(e,"SteamSection.getSteamPrice: error")}))}g.Z.startPriceTimer()}componentWillUnmount(){g.Z.stopPriceTimer()}onChangePrice(e){this.onChangePriceWithCents(e)}onChangePriceWithCents(e){let t=e.target.value;if(o.Log.debug(t,"Input value"),""!=t){let a=t.match(/\d/g);if(!a)return;t=a.join("");let i=parseInt(t);o.Log.debug(i,"Got price"),isNaN(i)||i==this.state.price||((c.Z.isValidPrice(i)||c.Z.isValidPrice(this.state.price))&&(o.Log.debug("Updating parent"),e.target.value=i,g.Z.price=i),this.setState({price:i,discount:""}))}else t!=this.state.price&&this.setState({price,discount:""})}onChangeDiscount(e){let t=e.target.value||"",a="";if(""!=t){let i=t.match(/\d/g);if(!i)return;t=i.join("");let l=parseInt(t);o.Log.debug(l,"Got percent"),!isNaN(l)&&l>=0&&l<=100&&(a=100*this.state.steam_price*(100-l)/100,(c.Z.isValidPrice(a)||c.Z.isValidPrice(this.state.price))&&(o.Log.debug("Updating parent"),e.target.value=a,this.props.onChangeValue("price",e)))}this.setState({discount:t,price:a})}acceptCurrency(e,t){let a=this.state.accept_currency,i=c.Z.clone(this.state.currencies);i[e]=t.target.checked;let l=0;for(let e in i)i[e]&&(a=e,l++);0!=l&&(2==l&&(a=P.QV0),g.Z.setProp("accept_currency",a),this.setState({accept_currency:a,currencies:i}))}openSimilarDialog(){E.item=g.Z.item,E.emitShowSimilar()}render(){let{digital:e}=this.props,{currencies:t,steam_price:a,steam_price_formatted:l}=this.state;const n=this.state.price?parseFloat(this.state.price/100).toFixed(2):"",s=(this.props.name||"").trim(),r=this.state.discount?parseInt(this.state.discount):"",o=this.state.price&&c.Z.isValidPrice(this.state.price);let m=[],d="";a&&(m.push(i.createElement("div",{key:"steam_price_formatted",className:"row"},(0,v._)("Suggested Price"),": ",l)),c.Z.isValidSuggestedPrice(n,a)?c.Z.isInternal&&(d=i.createElement("div",{className:"row"},"   ",i.createElement("input",{className:"form-control",style:{width:"80px"},type:"text",placeholder:(0,v._)("Discount"),value:r,onChange:this.onChangeDiscount.bind(this)})," ",(0,v._)("% OFF of Steam"))):m.push(i.createElement("div",{key:"steam_price_alert",className:"row"},i.createElement("div",{className:"alert alert-danger"},(0,v._)("Item price cannot exceed {x} times the Suggested Price of {steam_price}",{x:P.zIm,steam_price:l})))));let p="";return c.Z.flpEnabled&&e&&(p=i.createElement("div",{className:"row checkbox"},i.createElement("span",null,(0,v._)("Accept currency"),":     "),i.createElement("label",null,i.createElement("input",{type:"checkbox",name:"accept-usd",onChange:this.acceptCurrency.bind(this,P.qBs),checked:t[P.qBs]||!1})," USD"),"     ",i.createElement("label",null,i.createElement("input",{type:"checkbox",name:"accept-flp",onChange:this.acceptCurrency.bind(this,P.jtz),checked:t[P.jtz]||!1})," FLP")," ",i.createElement("a",{className:"btn-link",href:"https://gameflip.zendesk.com/hc/en-us/articles/360005254594",target:"_blank"},i.createElement("span",{className:"fa fa-question-circle","aria-hidden":"true"})))),i.createElement("div",{className:"edit-item-price section"},i.createElement("h2",null,i.createElement("span",null,(0,v._)("Price"))),m,d,i.createElement("div",{className:"row"+(o?"":" has-error")},i.createElement("span",null,"$ ",i.createElement("input",{className:"form-control price-input",type:"text",placeholder:(0,v._)("Your Price"),value:n,onChange:this.onChangePrice.bind(this)})," USD"),"",c.Z.flpEnabled&&e&&this.state.price?i.createElement(y.Z,{className:"flp-price formatted-money",money:this.state.price,currency:"FLP",leadingText:"≈ ",flpAsUSD:!1}):""),p,i.createElement("div",{className:"row"},i.createElement("span",{className:"note"},(0,v._)("Our marketplace is for items priced between ${price_min} and ${price_max}",{price_min:P.CJR/100,price_max:P.n3Z/100}))),i.createElement("div",{className:"row"},s?i.createElement("a",{onClick:this.openSimilarDialog.bind(this)},(0,v._)("Compare to similar listings")):""))}}class Le extends i.Component{render(){let e=this.props.expire_in_days,t=this.props.onChangeValue,a=u.Z.profile.sell||0,l=_e.map((e=>{if(a<40&&e>=45)return!1;if(a<80&&e>=90)return!1;if(a<200&&e>=180)return!1;if(a<500&&e>=365)return!1;let t=fe[e]||(0,v._)("{d} days",{d:e});return i.createElement("option",{key:e,value:e},t)}));return i.createElement("div",{className:"section"},i.createElement("h2",null,i.createElement("span",null,(0,v._)("Expiration"))),i.createElement("div",{className:"row"},i.createElement("div",{className:"col-8 col-md-3 text-left"},i.createElement("select",{className:"form-control",name:"expiration-days",value:e,onChange:t.bind(this,"expire_in_days")},l))))}}class Te extends i.Component{constructor(e,t){super(e,t),this.state={item:g.Z.item,subscription:null},this._onChange=this._onChange.bind(this)}componentDidMount(){g.Z.onChangeFee(this._onChange)}componentWillUnmount(){g.Z.offChangeFee(this._onChange)}_onChange(){this.setState({item:g.Z.item});let e=g.Z.item?g.Z.item.subscription:null,t=this.state.subscription;!e||t&&e==t.subscription.sub_id||this.loadSubscription(e)}loadSubscription(e){m.Z.getSubscription(e,(e=>{this.setState({subscription:e})}),(e=>{o.Log.error(e)}))}feePercent(e){return.5*Math.round(100*e/.5)}render(){let{item:e,subscription:t}=this.state,a=parseFloat(e.price/100||0).toFixed(2),l=parseFloat(e.digital_fee/100||0).toFixed(2),n=parseFloat(e.commission/100||0).toFixed(2),s=parseFloat("seller"==e.shipping_paid_by&&e.shipping_fee?e.shipping_fee/100:0).toFixed(2),r=parseFloat(a-n-s-l).toFixed(2),c=e.subscription&&t||!1;return e.commission&&!isNaN(e.commission)&&e.price>0&&(0,v._)("{percent} % of Price",{percent:this.feePercent(e.commission/e.price)}),e.digital_fee&&!isNaN(e.digital_fee)&&e.price>0&&(0,v._)("{percent} % of Price",{percent:this.feePercent(e.digital_fee/e.price)}),i.createElement("div",{className:"section"},i.createElement("h2",null,i.createElement("span",null,(0,v._)("Estimate Fees & Proceeds"))),e.digital?i.createElement("div",{className:"row"},i.createElement("div",{className:"col-6 col-md-3 text-left"},(0,v._)("Digital transfer fee"),":"),i.createElement("div",{className:"col-5 col-md-2 text-right"},"$",l," ",i.createElement("span",{className:"note"},"USD"))):i.createElement("div",{className:"row"},i.createElement("div",{className:"col-6 col-md-3 text-left"},(0,v._)("Shipping fee"),":"),i.createElement("div",{className:"col-5 col-md-2 text-right"},"$",s," ",i.createElement("span",{className:"note"},"USD"))),i.createElement("div",{className:"row"},i.createElement("div",{className:"col-6 col-md-3 text-left"},(0,v._)("Commission fee"),":"),i.createElement("div",{className:"col-5 col-md-2 text-right"},"$",n," ",i.createElement("span",{className:"note"},"USD"))),i.createElement("div",{className:"row"},i.createElement("div",{className:"col-6 col-md-3 text-left"},(0,v._)("You make"),":"),i.createElement("div",{className:"col-5 col-md-2 text-right"},"$",r," ",i.createElement("span",{className:"note"},"USD"))),i.createElement("div",{className:"row"},c?i.createElement("small",{className:"text-muted"},(0,v._)("NOTE"),": ",(0,v._)("Final fees & proceeds are calculated when the listing is sold and whether your subscription is still valid and applicable at that time.")):i.createElement("p",{className:"text-muted"},(0,v._)("Want to lower fees? Check out our subscription program")," ",i.createElement(o.Link,{to:"wallet",params:{tab:"subscriptions"}},(0,v._)("here")),"!")))}}class Ae extends i.Component{constructor(e,t){super(e,t),this.state=this.getState(),this._onChange=this._onChange.bind(this),this.valid=!1}getState(){let{item:e,vault:t}=g.Z;return{vault:t}}componentDidMount(){g.Z.onChangeVault(this._onChange)}componentWillUnmount(){g.Z.offChangeVault(this._onChange)}_onChange(){this.setState(this.getState())}static show(){$("#edit_item .vault-dialog").is(":visible")||$("#edit_item .vault-dialog").modal("show")}static hide(){$("#edit_item .vault-dialog").modal("hide")}onChangeVault(e){g.Z.vault=e.target.value}apply(){let{vault:e}=g.Z;(e||"").trim()&&g.Z.putVault((()=>{Ae.hide()}),(e=>{c.Z.showErrorDialog(e)}))}render(){let e=this.state.vault,t="",a="",l="";g.Z.item.category===P.tVC?(t=(0,v._)("We securely encrypt your Gift Card code, and it will only be sent to the buyer after payment has been verified by Gameflip."),l=(0,v._)("Enter the redemption code or card Serial Number and PIN. Use multiple lines when bundling several codes."),a=(0,v._)("Be sure to enter the correct code or card number and PIN. Buyer will request refund if card cannot be redeemed.")):(t=(0,v._)("We securely encrypt your digital key or code, and it will only be sent to the buyer after payment has been verified by Gameflip."),l=(0,v._)("Enter digital key or code for this listing. Use multiple lines when bundling several keys or codes."),a=(0,v._)("Be sure to enter the complete and correct key or code. Incorrect code will result in buyer refund.")),this.valid=!!e.trim();let n=i.createElement("div",{className:"row"},i.createElement("textarea",{className:"form-control",placeholder:l,rows:"4",value:e,onChange:this.onChangeVault.bind(this)}));return i.createElement(o.Dialog,{className:"vault-dialog fade",title:(0,v._)("Digital Vault"),content:i.createElement("div",{className:"container-fluid"},i.createElement("div",{className:"row"},t),n,i.createElement("div",{className:"row"},i.createElement("b",null,(0,v._)("Important"),":")," ",a),i.createElement("div",{className:"buttons row text-left"},i.createElement("button",{className:"btn btn-primary"+(this.valid?"":" disabled"),onClick:this.valid?this.apply.bind(this):null},(0,v._)("Apply")),i.createElement("button",{className:"btn btn-outline-secondary",onClick:Ae.hide},(0,v._)("Cancel"))))})}}class Fe extends i.Component{constructor(e,t){super(e,t),this.state=this.getState(),this.offer_id="",this._onChange=this._onChange.bind(this),this.error=null}getState(){return{escrow:g.Z.escrow}}componentDidMount(){g.Z.onChangeEscrow(this._onChange)}componentDidUpdate(){this.error&&(this.error="")}componentWillUnmount(){g.Z.offChangeEscrow(this._onChange)}_onChange(){this.setState(this.getState())}static show(){$("#edit_item .escrow-dialog").is(":visible")||$("#edit_item .escrow-dialog").modal("show")}static hide(){$("#edit_item .escrow-dialog").modal("hide")}setError(e){if(Z.Z.block=!1,e&&409==e.code){let e=this.state.escrow;e!=P.VnA&&e!=P.Fgb||(c.Z.showErrorDialog((0,v._)("Offer declined or canceled. Please retry.")),g.Z.escrow=e==P.VnA?"":P.X8_)}else this.error=e.message&&"XHR error"!=e.message?e.message:(0,v._)("There is an error. Please refresh the page and retry it again."),this.forceUpdate()}next(){Z.Z.block=!0;let e=this.state.escrow;e&&e!=P.vrM?e==P.VnA?g.Z.putEscrowDeposit((e=>{Z.Z.block=!1,e.status==P.X8_?(Fe.hide(),g.Z.escrow=P.X8_):e.status==P.VnA?c.Z.showInfoDialog((0,v._)("Please complete the Bot Trade and confirm it again.")):e.status==P.IZR?(Fe.hide(),g.Z.escrow=P.IZR):(c.Z.showErrorDialog((0,v._)("The bot trade offer has been cancelled. Please retry by starting bot trade again.")),g.Z.escrow="")}),(e=>{this.setError(e)})):e==P.X8_?g.Z.postEscrowReturn((e=>{Z.Z.block=!1,this.offer_id=e.offer_id,g.Z.escrow=P.Fgb}),(e=>{this.setError(e)})):e==P.Fgb?g.Z.putEscrowReturn((e=>{Z.Z.block=!1,e.status==P.vrM?(Fe.hide(),g.Z.escrow=P.vrM):e.status==P.Fgb?c.Z.showInfoDialog((0,v._)("Please complete the Bot Trade and confirm it again.")):(c.Z.showErrorDialog((0,v._)("The bot trade offer has been cancelled. Please retry by starting bot trade again.")),g.Z.escrow=P.X8_)}),(e=>{this.setError(e)})):Z.Z.block=!1:g.Z.postEscrowDeposit((e=>{Z.Z.block=!1,this.offer_id=e.offer_id,g.Z.escrow=P.VnA}),(e=>{this.setError(e)}))}cancel(){Fe.hide()}render(){let e=this.state.escrow,t=g.Z.item,a="",l="",n=(0,v._)("Start Bot Trade"),s=!0,r=!1;e&&e!=P.vrM?e==P.VnA?(a=(0,v._)("Deposit item to Bot"),l=i.createElement("div",{className:"text"},(0,v._)("Please verify that the bot trade offer references the following Listing ID"),i.createElement("br",null),i.createElement("br",null),i.createElement("div",{className:"text-center"},i.createElement("b",null,t.id)),i.createElement("br",null),(0,v._)("Once you successfully traded with Gameflip Steam bot, please confirm below.")),n=(0,v._)("I've completed Bot Trade"),s=!1,this.offer_id&&(r=!0)):e==P.X8_?(a=(0,v._)("Return item from Bot"),l=i.createElement("div",{className:"row text"},(0,v._)("When you click Start, a Gameflip bot will send you a trade offer in Steam using <b>your Steam Trade URL</b>. The trade offer is automatically cancelled if you do not accept within <b>5 minutes</b>.",{__html:!0}),i.createElement("br",null),i.createElement("br",null),(0,v._)("You must be logged in Steam and have your Steam Guard Mobile ready for trading."))):e==P.Fgb&&(a=(0,v._)("Return item from Bot"),l=i.createElement("div",{className:"row text"},(0,v._)("Please verify that the bot trade offer references the following Listing ID"),i.createElement("br",null),i.createElement("br",null),i.createElement("div",{className:"text-center"},i.createElement("b",null,t.id)),i.createElement("br",null),(0,v._)("Once you successfully traded with Gameflip Steam bot, please confirm below.")),n=(0,v._)("I've completed Bot Trade"),s=!1,this.offer_id&&(r=!0)):(a=(0,v._)("Deposit item to Bot"),l=i.createElement("div",{className:"row"},(0,v._)("Our Gameflip Bot will hold your item and deliver to buyer when your listing is sold. When you click Start, a Gameflip bot will send you a trade offer in Steam using <b>your Steam Trade URL</b>. The trade offer is automatically cancelled if you do not accept within <b>5 minutes</b>.",{__html:!0}),i.createElement("br",null),(0,v._)("You must be logged in Steam and have your Steam Guard Mobile ready for trading."),i.createElement("br",null),(0,v._)("Having problems to deposit your item?")," ",i.createElement("a",{href:"https://steamstat.us",target:"_blank"},(0,v._)("Check the current Steam status")),".")),this.error&&(l=i.createElement("div",{className:"row text"},(0,v._)("{title} failed",{title:a}),".  ",(0,v._)("Please retry"),s?" "+(0,v._)("by starting bot trade again"):"",".",i.createElement("br",null),i.createElement("br",null),i.createElement("div",{className:"alert alert-danger"},this.error),(0,v._)("Having problems to transfer your item?")," ",i.createElement("a",{href:"https://steamstat.us",target:"_blank"},(0,v._)("Check the current Steam status")),"."));let c=e==P.VnA||e==P.Fgb;return i.createElement(o.Dialog,{className:"escrow-dialog fade",title:a,content:i.createElement("div",{className:"container-fluid"},l,i.createElement("div",{className:"row bot-trade-steps"},i.createElement("div",{className:"bg-bar"}),i.createElement("div",{className:"col-4 text-right"},i.createElement("span",{className:"badge done"},c?i.createElement("span",{className:"fa fa-check"}):"1"),i.createElement("br",null),i.createElement("span",{className:"text"},(0,v._)("Start Bot<br/>Trade",{__html:!0}))),i.createElement("div",{className:"col-4 text-center"},i.createElement("span",{className:"badge-steam"},i.createElement("img",{src:"/img/app/steam_icon.png"})),i.createElement("br",null),i.createElement("span",{className:"text"},(0,v._)("Accept Bot Trade Request<br/>in Steam",{__html:!0}))),i.createElement("div",{className:"col-4 text-left"},i.createElement("span",{className:"badge"+(c?" done":"")},"2"),i.createElement("br",null),i.createElement("span",{className:"text"},(0,v._)("Complete<br/>Bot Trade",{__html:!0})))),i.createElement("div",{className:"buttons row text-left"},i.createElement("button",{className:"btn btn-primary",onClick:this.next.bind(this)},n),s?i.createElement("button",{className:"btn btn-outline-secondary",onClick:this.cancel.bind(this)},(0,v._)("Cancel")):"",r?i.createElement("a",{href:"https://steamcommunity.com/tradeoffer/"+this.offer_id+"/",target:"_blank"},(0,v._)("See trade offer")):""))})}}class Ue extends i.Component{constructor(e,t){super(e,t),this.state=this.getState(),this._onChange=this._onChange.bind(this)}getState(){return{media:g.Z.media}}componentDidMount(){g.Z.onChange(this._onChange)}componentWillUnmount(){g.Z.offChange(this._onChange)}_onChange(){this.setState(this.getState())}static show(){$("#edit_item .media-type-dialog").is(":visible")||$("#edit_item .media-type-dialog").modal("show")}static hide(){$("#edit_item .media-type-dialog").modal("hide")}onChangeMedia(e){g.Z.media=e,Ue.hide()}render(){let e=g.Z.media,t=[{media:P.a$Y,label:(0,v._)("Digital Item"),sub:(0,v._)("Digital items include In-Game items & skins, Game codes, CD keys, Gift codes or Digital movies.")},{media:P.EYe,label:(0,v._)("Physical Item"),sub:(0,v._)("Physical items include Game discs, Consoles, Toys, or Accessories. (Note: Shipping within Continental US only)")}].map(((t,a)=>i.createElement("div",{className:"row pointer",key:a,onClick:this.onChangeMedia.bind(this,t.media)},i.createElement("div",{className:"col-2 text-right"},i.createElement("span",{className:"mt-3 pointer far fa-"+(e==t.media?"check-square text-primary":"square"),"aria-hidden":"true"})),i.createElement("div",{className:"col-10"},i.createElement("h4",null,t.label),i.createElement("small",{className:"text-muted"},t.sub)))));return i.createElement(o.Dialog,{className:"media-type-dialog fade",title:(0,v._)("Select Media Type"),content:i.createElement("div",{className:"container-fluid info-table"},t)})}}class Me extends i.Component{constructor(e,t){super(e,t),this.state=this.getState(),this._onChange=this._onChange.bind(this)}getState(){return{item:g.Z.item}}componentDidMount(){g.Z.onChange(this._onChange)}componentWillUnmount(){g.Z.offChange(this._onChange)}_onChange(){this.setState(this.getState())}static show(){$("#edit_item .delivery-type-dialog").is(":visible")||$("#edit_item .delivery-type-dialog").modal("show")}static hide(){$("#edit_item .delivery-type-dialog").modal("hide")}onChangeDelivery(e){g.Z.switchDelivery(e),Me.hide()}render(){let e=g.Z.item,t="";"transfer"==e.digital_deliverable&&(t="transfer"),"code"==e.digital_deliverable&&(t="escrow");let a=[{delivery:"escrow",label:(0,v._)("Automatic delivery via Bot"),sub:(0,v._)("Gameflip Bot holds and delivers your item to the buyer when your listing is sold. You can take back your item any time if the listing is not sold.")},{delivery:"transfer",label:(0,v._)("I will coordinate with buyer to transfer"),sub:(0,v._)("You must send the item within the promised time frame.")}].map(((e,a)=>i.createElement("div",{className:"row pointer",key:a,onClick:this.onChangeDelivery.bind(this,e.delivery)},i.createElement("div",{className:"col-2 text-right"},i.createElement("span",{className:"mt-3 pointer far fa-"+(t==e.delivery?"check-square text-primary":"square"),"aria-hidden":"true"})),i.createElement("div",{className:"col-10"},i.createElement("h4",null,e.label),i.createElement("small",{className:"text-muted"},e.sub)))));return i.createElement(o.Dialog,{className:"delivery-type-dialog fade",title:(0,v._)("Select Delivery Method"),content:i.createElement("div",{className:"container-fluid info-table"},a)})}}},76100:(e,t,a)=>{var i=a(14985),l=["id","appid","contextid","amount","name","type","tradable","classid","icon_url","market_hash_name","original_id","est_usd"];function n(e){if(i.notNull(e.inspect_url))return e.inspect_url;if(e.actions&&e.actions.length>0)for(var t=0;t<e.actions.length;t++){var a=e.actions[t];if(a.name&&0==a.name.indexOf("Inspect"))return a.link}return null}function s(e){if(!e.tradable){var t=e.owner_descriptions;if(i.isArray(t))for(var a=0;a<t.length;a++){var l=t[a].value;if(i.isString(l)){var n=(l=l.trim()).match(/^On Trade Cooldown Until: (.*)$/i);if(i.notNull(n)){var s=Date.parse(n[1]);return isNaN(s)||s<=0?i.now(7*i.DAY):new Date(s).toISOString()}if(n=l.match(/^Tradable after: \[date\](\d+)\[\/date\]\.$/i),i.notNull(n)){var r=i.parseInt(n[1]);if(r>0)return i.epochToIsoString(r)}if(n=l.match(/^Tradable After (.*)$/i),i.notNull(n))return s=Date.parse(n[1].replace(/[\(\)]/g,"")),isNaN(s)||s<=0?i.now(7*i.DAY):new Date(s).toISOString();if(n=l.match(/^Tradable After/i),i.notNull(n))throw new Error("Failed to parse: "+l)}}}return null}function r(e,t=null){var a=i.copyProps(e,l);a.owner_steamid=e.owner||e.owner_steamid||t,a.icon_url=e.icon_url_large||e.icon_url;var r=n(e);i.notNull(r)&&(a.inspect_url=r);var o=s(e);i.notNull(o)&&(a.held_until=o);var c=e.wear_value;i.notNull(c)&&(a.wear_value=c);var m=e.float;return i.notNull(m)&&(a.float=m),i.cleanEmptyValues(a)}function o(e){return i.isNull(e)?e:e.replace(/\s+/g," ").trim().slice(0,128)}e.exports={listing:function(e,t=null,a=null){t=Object.assign({owner_steamid:a},t,r(e));var l=[];i.isArray(e.fraudwarnings)&&(l=l.concat(e.fraudwarnings)),e.descriptions&&(l=l.concat(e.descriptions.map((function(a){var l=a.value;if(!l)return null;if(l.indexOf('id="sticker_info"')>0)return t.sticker=l,null;if(570==e.appid&&l.indexOf("<div style=")>=0)return t.sticker=l.replace(/color: rgb\(255, 255, 255\)/g,"color: rgb(55, 55, 55)"),null;var n=i.stripHtml(l).trim();return""==n?null:n}))));let n=[];return i.isArray(e.tags)&&(n=e.tags.map((function(e){return e.category_name?e.category_name+": "+e.name:e.name})),l.push(n.join(", "))),e.market_hash_name&&n.unshift("market_hash_name: "+e.market_hash_name),e.name&&n.unshift("name: "+e.name),n=n.map((function(e){return o(e)})).filter((function(e){return i.notEmpty(e)})).slice(0,32),l=l.filter((function(e){return i.notEmpty(e)})).map((e=>e.slice(0,1023))).join("\n\n"),{name:e.market_hash_name||e.market_name||e.name,description:i.notEmpty(l)?l.slice(0,4095):".",tags:n,steam_properties:i.cleanEmptyValues(t)}},properties:r,inspectUrl:n,needsItemInfo:function(e){return i.notNull(e)&&"730"==e.appid&&i.notNull(e.inspect_url)&&i.isNull(e.paintwear)&&i.notNull(e.name)&&i.notNull(e.market_hash_name)&&e.name!==e.market_hash_name},canonicalTag:o,fungible:function(e){return e.name==(e.market_hash_name||e.market_name)},tradeHold:s}},14985:(e,t,a)=>{Array.prototype.sample=function(){return this[Math.floor(Math.random()*this.length)]},Array.prototype.shuffle=function(){for(var e,t,a=this.length;0!==a;)t=Math.floor(Math.random()*a),e=this[a-=1],this[a]=this[t],this[t]=e;return this};var i=/(<([^>]+)>)/gi,l={SECOND:1e3,MINUTE:6e4,HOUR:36e5,DAY:864e5,randomInt:function(e){return Math.floor(Math.random()*e)},parseInt:function(e){return"string"==typeof e?parseInt(e,10):e},parseFloat:function(e){return"string"==typeof e?parseFloat(e):e},parseQuery:function(e){return a(8575).parse(e,!0).query},notNull:function(e){return null!=e},notEmpty:function(e){return null!=e&&""!==e},isNull:function(e){return null==e},isTrue:function(e){return void 0!==e&&e},isFalse:function(e){return!(void 0===e||e)},isArray:function(e){return void 0!==e&&Array.isArray(e)},isString:function(e){return"string"==typeof e},hasKey:function(e,t){return null!=e&&"object"!=typeof e&&t in e},options:function(){for(var e=0;e<arguments.length;e++){var t=arguments[e];if(null!=t)return t}return null},now:function(e){return new Date(Date.now()+(e||0)).toISOString()},timestamp:function(e){return Math.floor((Date.now()+(e||0))/1e3)},isoDateToEpoch:function(e){return l.isNull(e)?null:Math.floor(Date.parse(e)/1e3)},isoStringToGMT:function(e){return l.isString(e)?e.replace(/T/," ").replace(/:\d{2}\.\d{3}Z/," GMT"):""},epochToIsoString:function(e){return l.isNull(e)?"unspecified":new Date(1e3*e).toISOString()},seconds:function(e){return Math.floor(e/1e3)},copyProps:function(e,t){for(var a={},i=0;i<t.length;i++){var n=t[i],s=e[n];l.notEmpty(s)&&(a[n]="amount"===n||"tradable"===n?parseInt(s,10):String(s))}return a},stripHtml:function(e){return l.isString(e)?e.replace(i,""):""},cleanEmptyValues:function(e){var t={};for(var a in e){var i=e[a];l.notEmpty(i)&&(t[a]=i)}return t},nextPage:function(e,t){var i=e.get("X-Forwarded-Proto")||e.protocol,l=e.get("X-Forwarded-Port")||e.app.settings.port;return("https"===i&&"443"==l||"http"===i&&"80"==l)&&(l=null),a(8575).format({hostname:e.get("X-Forwarded-Host")||e.hostname,protocol:i,port:l,pathname:e.baseUrl+e.path,query:t})}};e.exports=l},4942:(e,t,a)=>{function i(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}a.d(t,{Z:()=>i})}}]);