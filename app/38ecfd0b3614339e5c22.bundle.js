"use strict";(self.webpackChunkgameflip_market=self.webpackChunkgameflip_market||[]).push([[8537],{98004:(e,t,a)=>{a.d(t,{Z:()=>s});var i=a(67294),l=a(84766),n=a(96655);class s extends i.Component{constructor(e,t){super(e,t),this.ref=i.createRef()}get data(){let{options:e,value:t,placeholder:a}=this.props,i=[];Array.isArray(t)?t.map(((e,t)=>{i[e.value]=e.value})):"string"==typeof t&&(i[t]=t);let l=[];return l.push({placeholder:!0,text:a}),e.map(((e,t)=>{l.push({value:e.value,text:e.label||e.text,selected:!!i[e.value]})})),l}onChange(e){let{options:t,value:a}=this.props;if(this.props.onChange){let e=this.select.selected(),a=e=>{let a=null;return t.map(((t,i)=>{t.value==e&&(a=Object.assign({},t),a.text=t.label||t.text)})),a};if(Array.isArray(e)){let t=[];e.map(((e,i)=>{let l=a(e);l&&t.push(l)})),this.props.onChange(t)}else{let t=a(e);this.props.onChange(t)}}}componentDidMount(){l.ScriptLoader.load(this,n._8D),l.ScriptLoader.load(this,n._Yb,{htmlElem:"link"})}componentWillUnmount(){this.select&&(this.select.destroy(),delete this.select)}onScriptLoaded(e){e==n._8D&&this.createSlimSelect()}onScriptError(e){l.Log.error("Script loading error: "+e)}createSlimSelect(){if(this.select)return;let{placeholder:e,isMulti:t,limit:a}=this.props;this.select=new SlimSelect({data:this.data,select:this.ref.current,onChange:this.onChange.bind(this),placeholder:e||"",css:"background-color: #999",limit:t?a||5:1,hideSelectedOption:!0})}componentDidUpdate(e){let t=this.props.value;t&&this.valuesEqual(t,e.value)&&this.select&&this.select.setData(this.data)}valuesEqual(e,t){if(Array.isArray(e)&&Array.isArray(t)){let a=e.length==t.length;for(let i=0;a&&i<e.length;i++)a=a&&e[i].value==t[i];return a}return e===t}render(){let{className:e,options:t,value:a,placeholder:l,isMulti:n}=this.props;return this.select&&this.select.setData(this.data),i.createElement("select",{ref:this.ref,className:e||"",multiple:n||!1})}}},36839:(e,t,a)=>{a.d(t,{Z:()=>u});var i=a(67294),l=a(84766),n=a(46858),s=(a(42741),a(39927)),r=a(12031),o=a(58445),c=a(1055),m=a(78314),d=a(84454),h=a(96655);const p="step_account",g="step_verification";class u extends i.Component{constructor(e,t){super(e,t),this.state={step:p,verify_option:""},this._onChangeProfile=this._onChangeProfile.bind(this)}componentDidMount(){m.Z.onChange(this._onChangeProfile),m.Z.checkCardAdded(),n.Z.reloadPopover(),n.Z.scrollTop()}componentDidUpdate(){n.Z.reloadPopover()}componentWillUnmount(){m.Z.offChange(this._onChangeProfile)}_onChangeProfile(){this.forceUpdate(),m.Z.isQualified&&this.props.onComplete()}startVerification(){this.setState({step:g}),n.Z.scrollTop()}completeVerification(){this.props.onComplete()}onSelectCard(e){}onChangeVerifyOption(e){this.setState({verify_option:e})}get cardPaymentProvider(){let e="",t=d.Z.getMethods();for(let a of t)if("card"==a.id&&a.available){e=a.provider;break}return l.Log.debug(e,"Card payment provider"),e}requireID(e){h.tVC,h.YJJ,h.gav;let t=!1;return e&&e.category&&(e.category==h.tVC?t=!0:e.category!=h.YJJ||!0!==e.digital&&"true"!=e.digital||(t=!0)),t}render(){let{listing:e}=this.props,{step:t,verify_option:a}=this.state;this.account_valid=!(!m.Z.isVerified||!m.Z.profile.email),this.verification_valid=m.Z.isQualified;let l=t==p?"badge-warning":"badge-success",d=t==p?1:"✓",h=t==g?"badge-warning":"badge-inverse",u="";if(t==g){let t=this.requireID(e),l=i.createElement("span",null,t?(0,c._)("You must submit your government issued identity information to be eligible as a seller."):"You can choose to submit your government issued identity information to be eligible as a seller."),n=[{verify_option:"identity",label:(0,c._)("Submit identity verification"),sub:l}];t||n.push({verify_option:"card",label:(0,c._)("Add a credit card"),sub:(0,c._)("You can choose to add a credit card to be eligible as a seller. We will not charge your card.")}),u=n.map(((e,t)=>i.createElement("div",{className:"row pointer info-table",key:t,onClick:this.onChangeVerifyOption.bind(this,e.verify_option),style:{padding:"10px 0",margin:"15px -15px"}},i.createElement("div",{className:"col-2 text-right"},i.createElement("input",{type:"radio",name:e.verify_option,value:e.verify_option,defaultChecked:a==e.verify_option,style:{marginTop:"20%"}})),i.createElement("div",{className:"col-10"},i.createElement("h4",null,e.label),i.createElement("small",{className:"text-muted"},e.sub))))),n.length>1&&u.splice(1,0,i.createElement("h4",{key:"or"},(0,c._)("OR")))}let v="";if(t==g){let e="<b>"+(0,c._)("What is this verification?")+"</b><p>"+(0,c._)("Online sales of digital items and services can easily become targets for fraud and scam activities if customer safety and regulations are neglected. By ensuring all sellers are verified, Gameflip adds yet another layer of protection to our secure environment.")+"</p><b>"+(0,c._)("How is my information kept?")+"</b><p>"+(0,c._)("Your information is securely encrypted on our server and will only be used to verify your account, and for processing payments and payouts.")+"</p>";v=n.Z.popover({content:e,className:"align-top"})}return i.createElement("div",{id:"edit_item",className:"screen container seller-verification-section"},i.createElement("h1",null,(0,c._)("Become a Seller")),i.createElement("div",{className:"edit-item inner-content"},i.createElement("div",{className:"container-fluid"},i.createElement("div",null,i.createElement("h4",{className:"float-left",style:{marginRight:"25px"}},i.createElement("span",{className:"badge badge-circle "+l},d)," ",(0,c._)("Your Account")),i.createElement("h4",{className:"float-left"},i.createElement("span",{className:"badge badge-circle "+h},"2")," ",(0,c._)("Verification")),i.createElement("hr",{className:"clear"})),t==p?i.createElement("div",null,i.createElement("h2",null,(0,c._)("Profile")),i.createElement("p",{className:"text-muted"},(0,c._)("A complete and accurate profile gives you more credibility for potential buyers")),i.createElement(s.Z,null),i.createElement("div",{className:"row text-right"},i.createElement("div",{className:"col-12"},i.createElement("br",null),i.createElement("button",{className:"btn btn-primary"+(this.account_valid?"":" disabled"),onClick:this.account_valid?this.startVerification.bind(this):null},(0,c._)("Next"))))):"",t==g?i.createElement("div",null,i.createElement("div",null,i.createElement("h2",{className:"d-inline"},(0,c._)("Verification"))," ",v),i.createElement("div",{className:"container-fluid"},u),i.createElement("hr",null),"identity"==a?i.createElement(r.Z,null):"","card"==a?i.createElement(o.Z,{hide_3ds:!0,provider:this.cardPaymentProvider,onSelect:this.onSelectCard.bind(this)}):"",i.createElement("div",{className:"row text-right"},i.createElement("div",{className:"col-12"},i.createElement("br",null),i.createElement("button",{className:"btn btn-primary"+(this.verification_valid?"":" disabled"),onClick:this.verification_valid?this.completeVerification.bind(this):null},(0,c._)("Next"))))):""),i.createElement("hr",null)))}}},86164:(e,t,a)=>{a.d(t,{Z:()=>r});var i=a(67294),l=a(46858),n=a(84766),s=a(98004);class r extends i.Component{getTag(e){return this.props.getTag?this.props.getTag(e):(n.Log.error(e,"Cannot get tag"),null)}setTag(e,t){return this.props.setTag?this.props.setTag(e,t):(n.Log.error(e,"Cannot get tag"),null)}changeTagValue(e,t,a){let i="";if(a&&(a.target?i=a.target.value:a.value&&(i=a.value)),n.Log.debug(t,"Changing tag ["+t+"] to value: "+i),n.Log.debug(e,"Changing tag input type"),!i||"multiple"!=e&&"checkbox"!=e)this.setTag(t,i);else{let e=this.getTag(t)||[];if("string"==typeof e){e=e.split(",");for(let t=0;t<e.length;t++)e[t]=e[t].trim()}let a=e.indexOf(i);a>=0?e.splice(a,1):e.push(i),this.setTag(t,e)}}cannotModifyTag(e){let t=this.props.unmodifiables;if(t){if("string"==typeof t&&t==e)return!0;if(Array.isArray(t))return t.includes(e)}return!1}render(){let e=this.props.meta;if(l.Z.isEmpty(e))return"";let t=e.map(((e,t)=>{let{name:a,label:r,placeholder:o,input:c,values:m,tip:d}=e,h=!("required"in e)||e.required,p=this.getTag(a)||"",g=e.dependencies||null;if(this.cannotModifyTag(a)&&p)return null;if(g){let e=!1;if(Object.keys(g).map((t=>{let a=this.getTag(t)||"",i=g[t];n.Log.debug(i,"Values in dependency"),i.map((t=>{t==a&&(e=!0)}))})),!e)return n.Log.warn("No dependency match"),i.createElement("span",{key:t})}m||(m=[]);let u=null;switch(c){case"select":case"single":let e=m.map((e=>{if(l.Z.isEmpty(e))return null;let t=e,a=e;return Array.isArray(e)&&(t=e[0],a=e[1]),{value:t,label:a}})).filter((e=>e));u=i.createElement(s.Z,{isMulti:!1,className:"tag-form-select form-control"+(h&&!p?" is-invalid":""),name:a,placeholder:o||r,value:p,onChange:this.changeTagValue.bind(this,c,a),options:e});break;case"checkbox":case"multiple":let t=p||[],n=m.length>5,d=m.map(((e,l)=>i.createElement("div",{key:l,className:(n?"col-5":"mr-2")+" custom-control custom-checkbox"},i.createElement("input",{className:"custom-control-input"+(h&&!p?" is-invalid":""),type:"checkbox",id:a+l,onChange:this.changeTagValue.bind(this,c,a),checked:-1!==t.indexOf(e),value:e}),i.createElement("label",{className:"custom-control-label",htmlFor:a+l}," ",e," "))));u=i.createElement("div",{className:"row"},d);break;default:u=i.createElement("input",{className:"form-control"+(h&&!p?" is-invalid":""),type:"text",placeholder:o||r,value:p,onChange:this.changeTagValue.bind(this,c,a)})}return i.createElement("div",{className:"row p-2",key:t},i.createElement("div",{className:"col-3 col-md-2 text-right"},i.createElement("p",null,r)),i.createElement("div",{className:"checkbox"==c||"multiple"==c?"col-9 col-md-10":"col-9 col-md-4"},u),d?i.createElement("p",{className:"col-12 col-md-6 help-block"},d):"")}));return i.createElement("div",null,t)}}},28537:(e,t,a)=>{a.r(t),a.d(t,{default:()=>N});var i=a(67294),l=(a(50743),a(88601)),n=(a(47675),a(84766)),s=a(46858),r=a(42741),o=a(58166),c=a(35255),m=(a(40872),a(78314)),d=a(330),h=a(16778),p=a(1055),g=a(95835),u=(a(96637),a(36230)),v=a(86164),E=a(36839),f=(a(80324),a(47552)),b=a(96655);const _=1e4;class N extends i.Component{getState(){return{gig:d.ZP.gig}}constructor(e,t){super(e,t),this.state=this.getState(),this.valid=!1,this._onChange=this._onChange.bind(this),this._onChangeProfile=this._onChangeProfile.bind(this)}componentDidMount(){u.Z.block=!1,d.ZP.onChange(this._onChange),m.Z.onChange(this._onChangeProfile);let e=this.props.match.params,{id:t}=e;t&&s.Z.isUUID4(t)&&d.ZP.fetchListing(t,(e=>e.kind==b.Iox?s.Z.transitionTo("sell_item",{id:t}):e.category!=b.gav?s.Z.transitionTo("sell_gig",{id:t}):void this.loadMeta(e)),(e=>{n.Log.error(e,"Fetch listing"),s.Z.replacePathWith("listings")})),s.Z.setDocumentTitle((0,p._)("Start Selling"))}componentWillUnmount(){u.Z.block=!0,d.ZP.offChange(this._onChange),m.Z.offChange(this._onChangeProfile);let e=d.ZP.gig;e.id&&"draft"==e.status&&(d.ZP.reset(),s.Z.showDialog({title:(0,p._)("Listing is Incomplete"),message:(0,p._)("Your listing has been saved and you can complete it later by navigating to the Listings menu."),ok:{label:(0,p._)("Go to Listings"),callback:e=>{s.Z.hideDialog(),s.Z.transitionTo("listings")}},cancel:{label:(0,p._)("Cancel"),callback:e=>{s.Z.hideDialog()}}}))}onCompleteVerification(){let{id:e}=this.props.match.params;e||this.createNewListing()}_onChange(){let{gig:e}=this.state;this.setState(this.getState(),(()=>{}))}_onChangeProfile(){this.forceUpdate()}onChangeValue(e,t){let a="object"==typeof t?t.target.value:t;"genre"==e&&"string"==typeof a&&(a=a?[a]:[]),d.ZP.setProp(e,a)}onChangeTag(e,t){n.Log.debug(e,"Changing tag to value: "+t),d.ZP.setTag(e,t)}isQualified(e){return m.Z.isQualified}createNewListing(e){d.ZP.gig=e,this.isQualified(e)&&d.ZP.postGig(e,(e=>{this.loadMeta(e),s.Z.replacePathWith("sell_pro",{id:e.id})}),(e=>{s.Z.showErrorDialog(e),s.Z.replacePathWith("")}))}toggleChat(e){let t=e.target.checked;this.setState({chat_enabled:t},(()=>{let e=[];e.push({op:"replace",path:"/chat_enabled",value:t}),r.Z.patchProfile(e,(e=>{m.Z.profile=e}))}))}listOrSave(e){if(e.preventDefault(),!this.valid)return;let{gig:t}=this.state,a=(m.Z.profile||{}).chat_enabled?"":i.createElement("div",{className:"panel"},i.createElement("input",{type:"checkbox",name:"enable_chat",onChange:this.toggleChat.bind(this)}),"  ",i.createElement("span",null,(0,p._)("Allow buyer to contact you?"))),l=e=>{if(e&&e.message&&e.message.includes("not eligible")){let t=i.createElement("div",{className:"alert alert-danger"},(0,p._)("Before you can list an gig, your account needs to be qualified."),i.createElement("br",null),i.createElement("a",{style:{color:"#666"},target:"_blank",href:"https://gameflip.zendesk.com/hc/en-us/articles/360006410293"},(0,p._)("Learn More")," >>"));s.Z.showInfoDialog(t,e.message)}else s.Z.showErrorDialog(e)};s.Z.showDialog({title:(0,p._)("Ready for Sale!"),message:i.createElement("div",{className:"container-fluid"},i.createElement("p",null,(0,p._)("Your listing is now ready to be published.")),a?i.createElement("div",{className:"panel"},i.createElement("input",{type:"checkbox",name:"enable_chat",onChange:this.toggleChat.bind(this)}),"  ",i.createElement("span",null,(0,p._)("Allow potential buyers to contact you before making purchase?"))):""),ok:{label:(0,p._)("List"),callback:e=>{s.Z.hideDialog(),d.ZP.complete(b.IB,(e=>{c.ZP.track(c.G8,e),s.Z.transitionTo("gig",{name:s.Z.slug(e.name),id:e.id})}),l)}},cancel:{label:(0,p._)("Save For Later"),callback:e=>{s.Z.hideDialog(),d.ZP.complete(b.f1I,(e=>{s.Z.transitionTo("listings")}),l)}}})}deleteListing(){let e=this.state.gig;e.id&&s.Z.showDialog({title:(0,p._)("Delete Listing"),message:(0,p._)("Do you want to delete this listing?"),ok:{label:(0,p._)("Delete"),callback:t=>{r.Z.deleteListing(e.id,(t=>{h.Z.setDeleteItem(e.id),d.ZP.reset(),s.Z.hideDialog(),s.Z.transitionTo("listings")}),(e=>{s.Z.hideDialog()}))}},cancel:{label:(0,p._)("Cancel"),callback:e=>{s.Z.hideDialog()}}})}validatePriceTiers(){let{gig:e}=this.state,t=0;for(let a of d.$6){let i=e[a];if(i&&(t++,!d.ZP.validatePriceTier(i,10)))return!1}return!!t}loadMeta(e){let{category:t,platform:a,genre:i}=e;t&&a&&o.Z.getGigMetaProperties(t,a,i,(e=>{n.Log.debug(e,"GigMetaInfo.loadMeta: result"),this.setState({meta:e})}),(e=>{n.Log.debug(e,"GigMetaInfo.loadMeta")}))}validateListing(){let{gig:e,meta:t}=this.state,{category:a,platform:i,name:l,description:n}=e,s=!0;t&&t.map(((e,t)=>{let{name:a}=e,i=!("required"in e)||e.required,l=d.ZP.getTag(a)||"";i&&!l&&(s=!1)}));let r=l&&l.trim()&&l.length>=5&&l.length<=45,o=n&&n.trim()&&n.length>=100&&n.length<=_;return s&&a&&i&&r&&o&&this.validatePriceTiers()&&d.ZP.images.length>=1}render(){let{id:e}=this.props.match.params,t=d.ZP.gig||{};return e=e||t.id,t.category||(t.category=b.gav),!e&&m.Z.isVerified&&t.category&&!this.isQualified(t)?i.createElement(E.Z,{listing:t,onComplete:this.onCompleteVerification.bind(this)}):t.id?this.renderEdit():(!e||!s.Z.isUUID4(e))&&i.createElement(y,{urlParams:this.props.match.params,onNext:this.createNewListing.bind(this)})}renderEdit(){let{id:e}=this.props.match.params,{gig:t,meta:a}=this.state,l=s.Z.notEmpty(t.genre)?s.Z.genreName(t.genre[0]):"";return this.valid=this.validateListing(),i.createElement("div",{id:"edit_item",className:"screen container mb-5"},i.createElement("h1",null,(0,p._)("Pro Listing: {genre_name}",{genre_name:l})),i.createElement("div",{className:"edit-item inner-content",style:{padding:"10px 25px 20px 25px"}},i.createElement("h3",null,i.createElement("b",null,(0,p._)("Your Profile"))),i.createElement("p",{className:"text-muted",style:{margin:"-5px 0 25px 10px"}},(0,p._)("Introduce yourself to the community!")),i.createElement(Z,{gig:t,onChangeValue:this.onChangeValue}),i.createElement("br",null),i.createElement(k,{gig:t,onChangeValue:this.onChangeValue}),i.createElement("br",null),i.createElement("div",{className:"mt-4 row"},i.createElement("div",{className:"col-12"},i.createElement(x,{gig:t,onChangeValue:this.onChangeValue}))),i.createElement("div",{className:"mt-4 row"},i.createElement("div",{className:"col-12"},i.createElement(P,{gig:t,onChangeValue:this.onChangeValue}))),i.createElement(v.Z,{meta:a,getTag:e=>d.ZP.getTag(e),setTag:(e,t)=>{d.ZP.setTag(e,t)}}),i.createElement("hr",{className:"mt-4 mb-4"}),i.createElement(w,{gig:t,onChangeValue:this.onChangeValue}),i.createElement("hr",{className:"mt-4 mb-4"}),i.createElement(S,{gig:t,onChangeValue:this.onChangeValue}),i.createElement("br",null),i.createElement("br",null),i.createElement("br",null),i.createElement("div",{className:"action-buttons row mb-2"},i.createElement("div",{className:"col-6 text-left"},i.createElement("button",{className:"btn btn-primary"+(this.valid?"":" disabled"),onClick:this.valid?this.listOrSave.bind(this):null},i.createElement("span",{className:"fa fa-check"})," ",(0,p._)("Done"))),i.createElement("div",{className:"col-6 text-right"},i.createElement("button",{className:"btn btn-outline-secondary",type:"button",onClick:this.deleteListing.bind(this)},i.createElement("span",{className:"fa fa-trash"})," ",(0,p._)("Delete"))))))}}class y extends i.Component{constructor(e,t){super(e,t),this.state=this.getState(),this.valid=!1,this.next=this.next.bind(this)}getState(){let{category:e,platform:t,genre:a}=d.ZP.gig;return{category:b.gav,platform:"pro_play",genre:a}}get playWithProCategory(){let e=(s.Z.categories()||[]).filter((e=>e.kind==b.Bxu&&e.id==b.gav));return e&&e.length>0?e[0]:{}}select(e,t){n.Log.debug(e,"Setting prop"),this.setState(e)}next(){if(!this.valid)return;if(!s.Z.checkVerified())return;let{category:e,platform:t,genre:a}=this.state;this.props.onNext&&this.props.onNext({category:e,platform:t,genre:a?a.id:null})}render(){let{platform:e,genre:t}=this.state,a=this.playWithProCategory,l="";if(a.genre){let e=a.genre.items.map((e=>{let a=t&&t.id==e.id;return i.createElement(C,{key:e.id,label:e.label,selected:a,onClick:this.select.bind(this,{genre:e})})}));l=i.createElement("div",{className:"edit-item-category section"},i.createElement("h2",null,i.createElement("span",null,(0,p._)("Select Game"))),i.createElement("div",{className:"row"},e))}return this.valid=a&&(!a.platform||e&&(!a.genre||t)),i.createElement("div",{id:"edit_item",className:"screen container"},i.createElement("h1",null,(0,p._)("Start Selling")),i.createElement("div",{className:"inner-content"},i.createElement("div",{className:"edit-item container-fluid"},i.createElement("div",{className:"row"},i.createElement("p",{className:"col-12"},i.createElement("span",{className:"fas fa-flag text-primary"})," ",(0,p._)("Want to create a listing that stands out from the crowd? (Check our <a target='_blank' href='https://gameflip.zendesk.com/hc/en-us/articles/360046924094--Guide-How-to-create-a-Gameflip-Compete-listing-that-stands-out'>guide</a> now!)",{__html:!0}))),l,i.createElement("div",{className:"row"},i.createElement("p",{className:"col-12"},i.createElement("span",{className:"fa fa-exclamation-triangle text-danger"})," ",i.createElement("span",{className:"font-weight-bold text-muted"},(0,p._)("Sharing game login and password for play sessions is strictly prohibited.")))),i.createElement("div",{className:"row"},i.createElement("div",{className:"col-12"},i.createElement("button",{className:"btn btn-primary"+(this.valid?"":" disabled"),onClick:this.next.bind(this)},(0,p._)("Next")))))))}}class C extends i.Component{render(){let{label:e,image:t,selected:a,onClick:l}=this.props,n="cell col-4 col-md-3 col-lg-2 pointer";return a&&(n+=" selected"),t||(n+=" noimage"),i.createElement("div",{className:n,onClick:l},t?i.createElement("img",{className:"img-fluid thumbnail",src:t}):"",i.createElement("p",{className:"text-center"},(0,p._)(e)))}}class Z extends i.Component{render(){let{gig:e,onChangeValue:t}=this.props,a=e.name||"",l=a&&a.length>=5&&a.length<=45;return i.createElement("div",{className:"edit-gig-name"},i.createElement("div",{className:"row"},i.createElement("div",{className:"col-2 col-md-2 text-right"},i.createElement("p",null,(0,p._)("Name or alias"))),i.createElement("div",{className:"col-10 col-md-5"+(l?"":" has-error")},i.createElement("input",{className:"form-control",type:"text",value:a,onChange:t.bind(this,"name")}),i.createElement("div",{style:{width:"100%"}},i.createElement("div",{className:"float-left "+(l?"text-muted":"text-danger")},i.createElement("small",null,(0,p._)("Min.")," ",5)),i.createElement("div",{className:"float-right "+(l?"text-muted":"text-danger")},i.createElement("small",null,a.length,"/",45))))))}}class k extends i.Component{render(){let{gig:e,onChangeValue:t}=this.props,a=e.description||"",l=a&&a.length>=100&&a.length<=_;return i.createElement("div",{className:"edit-gig-description"},i.createElement("div",{className:"row"},i.createElement("div",{className:"col-2 text-right"},i.createElement("p",null,(0,p._)("About"))),i.createElement("div",{className:"col-10"+(l?"":" has-error")},i.createElement("textarea",{className:"form-control",placeholder:(0,p._)("Share some nice words about yourself and what the community can expect from your sessions"),rows:"5",value:a,onChange:t.bind(this,"description")}),i.createElement("div",{style:{width:"100%"}},i.createElement("div",{className:"float-left "+(l?"text-muted":"text-danger")},i.createElement("small",null,(0,p._)("Min.")," ",100)),i.createElement("div",{className:"float-right "+(l?"text-muted":"text-danger")},i.createElement("small",null,a.length,"/",_))))))}}class x extends i.Component{constructor(e,t){super(e,t),this.state=this.getState(),this._onChange=this._onChange.bind(this)}getState(){return{images:d.ZP.images}}componentDidMount(){d.ZP.onChangeImage(this._onChange)}componentWillUnmount(){d.ZP.offChangeImage(this._onChange)}_onChange(){this.setState(this.getState())}onDrop(e){n.Log.debug(e,"onDrop files");let t=e[0];s.Z.notValidImage(t,{bytes:524288})||d.ZP.processPhoto(t.preview)}onDelete(e,t){s.Z.showDialog({title:(0,p._)("Delete Photo"),message:(0,p._)("Do you want to delete this photo?"),ok:{label:(0,p._)("Delete"),callback:t=>{d.ZP.deletePhoto(e),s.Z.hideDialog()}},cancel:{label:(0,p._)("Cancel"),callback:e=>{s.Z.hideDialog()}}})}render(){let e=this.state.images,t=[],a=e&&e.length>=1?"":"required-square-content";for(let n=0;n<4;n++){let s="";if(n<e.length){let t=e[n];s=null==t?i.createElement("div",{className:"square-responsive"},i.createElement("div",{className:"square-content"},i.createElement("div",{className:"spinner"},i.createElement("div",{className:"bounce1"}),i.createElement("div",{className:"bounce2"}),i.createElement("div",{className:"bounce3"})))):i.createElement("div",{className:"square-responsive pointer",onClick:this.onDelete.bind(this,n)},i.createElement(g.Z,{className:"img-fluid square-content bg_2d",src:t.view_url,dim:200}),i.createElement("img",{className:"icon-delete",src:"/img/app/icon_delete_photo.png"}))}else s=n==e.length?i.createElement("div",{className:"square-responsive pointer"},i.createElement(l.Z,{className:"dropzone square-content text-center "+a,onDrop:this.onDrop.bind(this),multiple:!1},i.createElement("div",null,(0,p._)("Click here<br/>or drag-drop<br/>(max 500kB)",{__html:!0})))):i.createElement("div",{className:"square-responsive"},i.createElement("div",{className:"square-content"}));t.push(i.createElement("div",{className:"col-12 col-md-3",key:n},s))}return i.createElement("div",{className:"edit-item-photos"},i.createElement("div",{className:"row"},i.createElement("div",{className:"col-2 text-right"},i.createElement("p",null,(0,p._)("Your Picture"))),i.createElement("div",{className:"col-8"},i.createElement("div",{className:"photo-row row"},t))))}}class P extends i.Component{constructor(e,t){super(e,t),this.state=this.getState(),this._onChange=this._onChange.bind(this)}getState(){return{media:d.ZP.media,posters:[]}}componentDidMount(){d.ZP.onChangeMedia(this._onChange)}componentWillUnmount(){d.ZP.offChangeMedia(this._onChange)}_onChange(){this.setState(this.getState())}onDrop(e){n.Log.debug(e,"onDrop files");let t=e[0];s.Z.notValidMedia(t,{bytes:104857600})||d.ZP.processMedia(t)}onDelete(e,t){t.stopPropagation(),s.Z.showDialog({title:(0,p._)("Delete File"),message:(0,p._)("Do you want to delete this file?"),ok:{label:(0,p._)("Delete"),callback:t=>{d.ZP.deleteMedia(e),s.Z.hideDialog()}},cancel:{label:(0,p._)("Cancel"),callback:e=>{s.Z.hideDialog()}}})}onClickVideoIcon(e,t,a){if(t.posters){let i=[];try{for(let a in t.posters)i.push({media_order:e,poster_id:a,view_url:t.posters[a]["640x640"].view_url});s.Z.sortArrayBy(i,"poster_id",1)}catch(a){n.Log.debug(a)}i.length&&this.setState({posters:i})}}changePoster(e,t){let{media:a}=this.state;try{a[e].poster_selected=t,this.setState({media:a,posters:[]},(()=>{d.ZP.changePoster(e,t)}))}catch(e){n.Log.debug(e)}}render(){let{media:e,posters:t}=this.state,a=[];for(let t=0;t<1;t++){let n="";if(t<e.length){let a=e[t];n=null==a||null==e?i.createElement("div",{className:"square-responsive"},i.createElement("div",{className:"square-content"},i.createElement("div",{className:"spinner"},i.createElement("div",{className:"bounce1"}),i.createElement("div",{className:"bounce2"}),i.createElement("div",{className:"bounce3"})))):s.Z.isVideo(a.mime_type)&&a.status==b.HFc?i.createElement("div",{className:"square-responsive pointer",onClick:this.onClickVideoIcon.bind(this,t,a)},i.createElement("img",{className:"img-fluid square-content bg_2d",src:s.Z.itemVideoPoster(a)}),i.createElement("img",{className:"icon-delete",src:"/img/app/icon_delete_photo.png",onClick:this.onDelete.bind(this,t)})):a.status==b.Po2?i.createElement("div",{className:"square-responsive pointer"},i.createElement("img",{className:"img-fluid square-content bg_2d",src:"/img/app/icon_exchange_processing.png"}),i.createElement("img",{className:"icon-delete",src:"/img/app/icon_delete_photo.png",onClick:this.onDelete.bind(this,t)})):i.createElement("div",{className:"square-responsive pointer"},i.createElement(g.Z,{className:"img-fluid square-content bg_2d",src:a.view_url,dim:200}),i.createElement("img",{className:"icon-delete",src:"/img/app/icon_delete_photo.png",onClick:this.onDelete.bind(this,t)}))}else n=t==e.length?i.createElement("div",{className:"square-responsive pointer"},i.createElement(l.Z,{className:"dropzone square-content text-center ",onDrop:this.onDrop.bind(this),multiple:!1},i.createElement("div",{className:"square-content-landscape"},(0,p._)("Click here<br/>or drag-drop<br/>(max 30s, 100MB)",{__html:!0})))):i.createElement("div",{className:"square-responsive"},i.createElement("div",{className:"square-content"}));a.push(i.createElement("div",{className:"col-12 col-md-6",key:t},n))}let n=[];if(t.length)for(let e of t){let t=i.createElement("div",{className:"square-responsive pointer"},i.createElement(g.Z,{className:"img-fluid square-content bg_2d",src:e.view_url,onClick:this.changePoster.bind(this,e.media_order,e.poster_id),dim:200}));n.push(i.createElement("div",{className:"col-12 col-md-6",key:e.poster_id},t))}return i.createElement("div",{className:"edit-item-photos"},i.createElement("div",{className:"row"},i.createElement("div",{className:"col-2 text-right"},i.createElement("p",null,(0,p._)("Your Video"),i.createElement("br",null),i.createElement("span",{className:"text-muted"},(0,p._)("(Optional)")))),i.createElement("div",{className:"col-4"},i.createElement("div",{className:"photo-row row"},a),n.length?i.createElement("div",null,i.createElement("p",{className:"row text-muted"},(0,p._)("Choose an image for your video")+":"),i.createElement("div",{className:"photo-row row"},n)):"")))}}class w extends i.Component{componentDidMount(){d.ZP.startTierTimer()}componentWillUnmount(){d.ZP.stopTierTimer()}render(){let{gig:e}=this.props,t=[{id:"pkg_tier1",selected:Boolean(e.pkg_tier1),package:e.pkg_tier1||{name:(0,p._)("1-hour session with Pro"),description:(0,p._)("Play a 1-hour session with the Pro"),session_duration:60,deliver_within_days:1,price:1e3}},{id:"pkg_tier2",selected:Boolean(e.pkg_tier2),package:e.pkg_tier2||{name:(0,p._)("2-hour session with Pro"),description:(0,p._)("Play a 2-hour session with the Pro"),session_duration:120,deliver_within_days:1,price:2e3}},{id:"pkg_tier3",selected:Boolean(e.pkg_tier3),package:e.pkg_tier3||{name:(0,p._)("3-hour session with Pro"),description:(0,p._)("Play a 3-hour session with the Pro"),session_duration:180,deliver_within_days:1,price:3e3}}].map((e=>i.createElement(D,{tier:e,key:e.id})));return i.createElement("div",{className:"edit-gig-price"},i.createElement("h3",null,i.createElement("b",null,(0,p._)("Offers"))),i.createElement("p",{className:"text-muted",style:{margin:"-5px 0 25px 10px"}},(0,p._)("Choose the services you would like to offer and provide details, like pricing.")),i.createElement("div",null,t))}}class D extends i.Component{constructor(e,t){super(e,t),this.state=this.getState(this.props),this.timeout=null}componentDidUpdate(e,t){try{JSON.stringify(this.props)!==JSON.stringify(e)&&this.setState(this.getState(this.props))}catch(e){n.Log.error(e)}}getState(e){let{tier:t}=e;return{price:t&&t.package&&t.package.price||0}}onKeyUp(e,t){s.Z.isBrowser&&(window.clearTimeout(this.timeout),this.timeout=window.setTimeout((()=>{let{tier:e}=this.props;n.Log.debug(e,"Update pricing tier"),d.ZP.updatePriceTiers()}),500))}onChangeProp(e,t){let{tier:a}=this.props,i="object"==typeof t?t.target.value:t;a.package[e]=i,d.ZP.setTier(a,!0)}onChangePrice(e){let{tier:t}=this.props,a=e.target.value;if(""!=a){let e=s.Z.parsePrice(a)||0;e!=this.state.price&&((s.Z.isValidPrice(e)||s.Z.isValidPrice(this.state.price))&&(t.package.price=e,delete t.package.cost,d.ZP.setTier(t,!0)),this.setState({price:e}))}else a!=this.state.price&&this.setState({price})}onChangeSessionDuration(e){let{tier:t}=this.props,{session_duration:a}=t,i=e.target.value;i?(i=s.Z.parsePrice(i),i&&i!=a?(t.package.session_duration=i,d.ZP.setTier(t,!0)):(t.package.session_duration="",d.ZP.setTier(t))):i!=a&&(t.package.session_duration="",d.ZP.setTier(t))}selectTier(e){let{tier:t}=this.props;t.selected=e.target.checked,n.Log.info(t,"Selected package"),d.ZP.setTier(t,!0)}render(){let{tier:e}=this.props,{selected:t}=e,{name:a,description:l,deliver_within_days:s,cost:r,session_duration:o}=e.package,c=parseFloat((this.state.price||0)/100).toFixed(2),m=c&&r?parseFloat((r.total_cost||0)/100).toFixed(2):0,h=c&&r?parseFloat(c-m).toFixed(2):0;h<0&&(h=0);let g=!t||c>=10&&c<=d.a5,u=!t||s,v=[];for(let e=1;e<=7;e++)v.push({id:e,label:1==e?(0,p._)("1 day"):(0,p._)("{day} days",{day:e})});return i.createElement("div",{className:"offer-tier img-thumbnail mb-2"},i.createElement("div",{className:"row p-2"},i.createElement("div",{className:"col-1 text-center"},i.createElement("input",{className:"mt-4",type:"checkbox",name:`select-${e.id}`,onChange:this.selectTier.bind(this),checked:t})),i.createElement("div",{className:"col-10 col-md-4"},i.createElement("h5",{style:{margin:"15px 0px 0px 0px"}},i.createElement("b",null,a)),i.createElement("p",{className:"text-muted",style:{margin:"5px 0px 0px 0px"}},l)),t?i.createElement("div",{className:"col-6 col-md-2"},i.createElement("p",{style:{marginBottom:"5px"}},(0,p._)("Deliver Time")),i.createElement("div",{className:u?"":" has-error"},i.createElement(n.Dropdown,{onSelect:this.onChangeProp.bind(this,"deliver_within_days"),onKeyUp:this.onKeyUp.bind(this,"deliver_within_days"),name:"deliver_within_days",label:"　　　　　",selections:v,selectedId:s}))):"",t?i.createElement("div",{className:"col-9 col-md-3"},i.createElement("p",{style:{marginBottom:"5px"}},(0,p._)("Price")),i.createElement("div",{className:"input-group edit-item-price"+(g?"":" has-error")},i.createElement("input",{className:"form-control price-input text-right",type:"text",placeholder:(0,p._)("$5 - $999"),value:"$"+c,onChange:this.onChangePrice.bind(this)}),i.createElement("div",{className:"input-group-append"},i.createElement("span",{className:"input-group-text"},"USD"))),i.createElement("div",{className:"row text-muted text-right mt-2"},i.createElement("div",{className:"col-6"},(0,p._)("Service fee"),":"),i.createElement("div",{className:"col-6"},g?i.createElement("div",null,"$",m," ",i.createElement("span",{className:"note"},"USD")):""),i.createElement("div",{className:"col-6"},(0,p._)("You make"),":"),i.createElement("div",{className:"col-6"},g?i.createElement("div",null,"$",h," ",i.createElement("span",{className:"note"},"USD")):""))):""))}}class S extends i.Component{addMore(e){e.preventDefault(),d.ZP.addFAQ()}edit(e,t,a){d.ZP.editFAQ(e.id,{[t]:a})}remove(e,t){d.ZP.removeFAQ(e)}render(){let{gig:e,onChangeValue:t}=this.props,a=d.ZP.faqs.map(((e,t)=>{let{question:a,answer:l}=e;return i.createElement("div",{key:e.id},i.createElement(f.Z,{className:"mt-2 mb-2",mode:"input",value:a,placeholder:(0,p._)("Question {num}",{num:t+1}),submit:this.edit.bind(this,e,"question"),remove:this.remove.bind(this,e)}),i.createElement(f.Z,{className:"mt-2 mb-2",mode:"input",value:l,placeholder:(0,p._)("Answer {num}",{num:t+1}),submit:this.edit.bind(this,e,"answer")}),i.createElement("hr",null))}));return i.createElement("div",{className:"edit-gig-faq section"},i.createElement("h2",null,i.createElement("span",{className:"p-0"},(0,p._)("Frequently Asked Questions"))),i.createElement("p",{className:"row text-muted"},(0,p._)("Add common Questions & Answers for your buyers.")),a,i.createElement("p",null,i.createElement("a",{className:"pointer",onClick:this.addMore.bind(this)},"+ ",(0,p._)("Add More"))))}}}}]);