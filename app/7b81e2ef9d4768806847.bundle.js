"use strict";(self.webpackChunkgameflip_market=self.webpackChunkgameflip_market||[]).push([[5741],{48282:(e,t,a)=>{a.d(t,{Z:()=>h});var s=a(67294),n=a(84766),i=a(42741),l=a(46858),r=a(99657),o=a(20771),c=a(1055),d=a(96655);class h extends s.Component{constructor(e,t){super(e,t),this.state={addresses:{},address_id:this.props.address_id,address_dialog:null},this.type=this.props.type||d.BPU}componentDidMount(){this.loadAddresses()}loadAddresses(){i.Z.getProfile("me",(e=>{this.setState({addresses:e.address,address_dialog:null})}),(e=>{}))}addressObj(e){let t=this.state.addresses;if(t[e]){let a=t[e];return a.id=e,a}return null}onSelect(e){let t=e.target.value,a=this.addressObj(t);n.Log.debug(a,"Select address"),a&&(this.setState({address_id:t}),this.props.onSelect(a),n.Storage.set(this.type,t))}onSaveAddress(e){let t=e=>{this.loadAddresses(),this.props.onSelect&&this.props.onSelect(e)};if(e.id){let a=[];for(const t in e)"id"!=t&&a.push({op:"replace",path:"/address/"+e.id+"/"+t,value:e[t]});i.Z.patchProfile(a,(e=>{this.setState({address_id:e.id},t(e))}),(e=>{n.Log.error(e),l.Z.showErrorDialog(e)}))}else i.Z.postAddress(e,(e=>{this.setState({address_id:e.id,address_dialog:e},t(e)),n.Storage.set(this.type,e.id)}),(e=>{n.Log.error(e),l.Z.showErrorDialog(e)}))}openAddressDialog(e){e&&(e=l.Z.clone(e)),this.setState({address_dialog:e||null},(()=>{m.show("#"+this.type+"_dialog")}))}deleteAddress(e,t){l.Z.showDialog({title:"Delete Address",message:"Do you want to delete this address?",ok:{label:"Delete",callback:t=>{i.Z.deleteAddress(e,(t=>{l.Z.hideDialog(),e==this.state.address_id&&(n.Storage.remove(this.type),this.setState({address_id:null}),this.props.onSelect&&this.props.onSelect(null)),this.loadAddresses()}),(e=>{l.Z.hideDialog(),l.Z.showErrorDialog(e)}))}},cancel:{label:"Cancel",callback:e=>{l.Z.hideDialog()}}})}render(){let{addresses:e,address_id:t,address_dialog:a}=this.state,{onSelect:n,className:i}=this.props,r=[];if(e)for(let t in e){let a=e[t];a.id=t,r.push(a)}let o=r.map(((e,a)=>s.createElement("div",{className:"row",key:a},s.createElement("div",{className:"col-1 text-right"},n?s.createElement("input",{type:"radio",name:e.id+"_address_id",value:e.id,checked:e.id==t,onChange:this.onSelect.bind(this)}):""),s.createElement("div",{className:"col-8"},l.Z.formatAddress(e)),s.createElement("div",{className:"col-1"},s.createElement("span",{className:"text-muted fa fa-pen pointer","aria-hidden":"true",onClick:this.openAddressDialog.bind(this,e)})),s.createElement("div",{className:"col-1"},s.createElement("span",{className:"text-muted fa fa-trash pointer","aria-hidden":"true",onClick:this.deleteAddress.bind(this,e.id)})))));return s.createElement("div",{className:"container-fluid"+(i?" "+i:" info-table")},o,s.createElement("div",{className:"row"},s.createElement("div",{className:"col-12"},s.createElement("a",{className:"btn btn-link",onClick:this.openAddressDialog.bind(this,null)},s.createElement("span",{className:"fa fa-chevron-right","aria-hidden":"true"},"Â "),(0,c._)("Add new address")))),s.createElement(m,{onSave:this.onSaveAddress.bind(this),address:a,title:a?(0,c._)("Edit Address"):(0,c._)("Add New Address")}))}}class m extends s.Component{constructor(e,t){super(e,t),this.state={error:null,address:this.blankAddress}}static show(){$("#address-dialog").is(":visible")||$("#address-dialog").modal("show")}static hide(){$("#address-dialog").modal("hide")}get blankAddress(){return{name:"",street1:"",street2:"",city:"",zip:"",country:"us",state:""}}copyFromProps(e,t){n.Log.debug(e,"Copy from props");let a=e&&e.address?n.Util.merge(this.blankAddress,e.address):this.blankAddress;n.Log.debug(a,"Copy from props.addresss"),this.setState({address:a},(()=>{n.Log.debug(this.state,"State after copied props"),t&&t()}))}componentDidMount(){this.copyFromProps(this.props)}componentDidUpdate(e,t){JSON.stringify(e)!==JSON.stringify(this.props)&&this.copyFromProps(this.props)}handleChange(e,t){let a="object"==typeof t?t.target.value:t,s=this.state.address,n=s.country?s.country.toUpperCase():"";"state"!=e||"US"!=n&&"CA"!=n||(a=r.Z.convert(n,a)),s[e]=a,this.setState({address:s,error:null})}validate(e){let{name:t,street1:a,city:s,zip:n,country:i,state:l}=e,r="us"==i||"ca"==i;return t&&a&&s&&n&&i&&(!r||r&&l)}save(){let e=this.state.address;this.validate(e)&&(e.country?e.country=e.country.toUpperCase():delete e.country,this.props.onSave&&this.props.onSave(e),this.close())}close(){m.hide("#address-dialog")}render(){let e=this.state.address,t=this.validate(e)?"":" disabled",a=this.state.error?s.createElement("div",{className:"alert alert-danger"},(0,c._)("Error"),": ",this.state.error.message):"";return s.createElement(n.Dialog,{className:"fade",title:this.props.title||(0,c._)("Add New Address"),id:"address-dialog",content:s.createElement("div",{className:"container-fluid"},a,s.createElement("div",{className:"container-fluid info-table"},s.createElement("div",{className:"row"},s.createElement("div",{className:"col-12"},s.createElement("input",{type:"text",className:"form-control",name:"name",autoComplete:"name",value:e.name||"",placeholder:(0,c._)("Full Name"),onChange:this.handleChange.bind(this,"name")}))),s.createElement("div",{className:"row"},s.createElement("div",{className:"col-12"},s.createElement("input",{type:"text",className:"form-control",name:"address-line1",autoComplete:"address-line1",value:e.street1||"",placeholder:(0,c._)("Street address 1"),onChange:this.handleChange.bind(this,"street1")}))),s.createElement("div",{className:"row"},s.createElement("div",{className:"col-12"},s.createElement("input",{type:"text",className:"form-control",name:"address-line2",autoComplete:"address-line2",value:e.street2||"",placeholder:(0,c._)("Street address 2"),onChange:this.handleChange.bind(this,"street2")}))),s.createElement("div",{className:"row"},s.createElement("div",{className:"col-12"},s.createElement("input",{type:"text",className:"form-control",name:"address-level2",autoComplete:"address-level2",value:e.city||"",placeholder:(0,c._)("City"),onChange:this.handleChange.bind(this,"city")}))),s.createElement("div",{className:"row"},s.createElement("div",{className:"col-12"},s.createElement("input",{type:"text",className:"form-control",name:"postal-code",autoComplete:"postal-code",value:e.zip||"",placeholder:(0,c._)("Zip or Postal Code"),onChange:this.handleChange.bind(this,"zip")}))),s.createElement("div",{className:"row"},s.createElement("div",{className:"col-12"},s.createElement("input",{type:"text",className:"form-control",name:"address-level1",autoComplete:"address-level1",value:e.state||"",placeholder:(0,c._)("State or Province"),onChange:this.handleChange.bind(this,"state")}))),s.createElement("div",{className:"row"},s.createElement("div",{className:"col-12"},s.createElement(o.Z,{country:e.country,onChange:this.handleChange.bind(this,"country")})))),s.createElement("div",{className:"buttons row text-right"},s.createElement("button",{className:"btn btn-primary"+t,onClick:this.save.bind(this)},(0,c._)("Save")),s.createElement("button",{className:"btn btn-outline-secondary",onClick:this.close.bind(this)},(0,c._)("Cancel"))))})}}},20771:(e,t,a)=>{a.d(t,{Z:()=>g});var s=a(74927),n=a(20890),i=a(67294),l=a(45697),r=a.n(l),o=(a(73935),a(94184)),c=a.n(o),d=a(84766),h=a(96655);let m=d.countryData.allCountries;class p extends i.Component{constructor(e,t){super(e,t),this.state=this.getState(),this.state.showDropDown=!1,this.flagDropdownRef=i.createRef(),this.countrySelector=[],(0,s.map)(m,((e,t)=>{this.countrySelector[t]=i.createRef()}))}getState(){let e=this.props.country?this.props.country.toLowerCase():"us",t=(0,s.find)(m,{iso2:e});return{selectedCountry:t,selectedCountryIndex:(0,n.findIndex)(m,t)}}componentDidMount(){d.ScriptLoader.load(this,h.gAR,{htmlElem:"link"})}componentDidUpdate(e,t){try{JSON.stringify(this.props)!==JSON.stringify(e)&&this.setState(this.getState())}catch(e){d.Log.error(e)}}onScriptLoaded(e){e==h.gAR&&d.Log.debug(e,"Loaded css")}onScriptError(e){d.Log.error(e,"Error loading css")}scrollTo(e,t){if(!e)return;let a=this.flagDropdownRef.current;if(!a)return;let s=a.offsetHeight,n=a.getBoundingClientRect().top+document.body.scrollTop,i=n+s,l=e,r=l.getBoundingClientRect(),o=l.offsetHeight,c=r.top+document.body.scrollTop,d=c+o,h=c-n+a.scrollTop,m=s/2-o/2;if(c<n)t&&(h-=m),a.scrollTop=h;else if(d>i){t&&(h+=m);let e=s-o;a.scrollTop=h-e}}getElement(e){return this.countrySelector[e]?this.countrySelector[e].current:null}handleFlagDropdownClick(){this.setState({showDropDown:!this.state.showDropDown,selectedCountryIndex:(0,n.findIndex)(m,this.state.selectedCountry)},(()=>{this.state.showDropDown&&this.scrollTo(this.getElement(this.state.selectedCountryIndex),!0)}))}handleFlagItemClick(e){let t=this.state.selectedCountry,a=(0,s.find)(m,e);t.iso2!==a.iso2&&this.setState({showDropDown:!1,selectedCountry:a},(()=>{this.props.onChange&&this.props.onChange(e.iso2)}))}getCountryDropDownList(){let e=(0,s.map)(m,((e,t)=>{let a=c()({country:!0,preferred:"us"===e.iso2||"gb"===e.iso2,active:"us"===e.iso2,highlight:this.state.selectedCountryIndex===t}),s=`flag ${e.iso2}`;return i.createElement("li",{ref:this.countrySelector[t],key:`flag_no_${t}`,"data-flag-key":`flag_no_${t}`,className:a,"data-country-code":e.iso2,onClick:this.handleFlagItemClick.bind(this,e)},i.createElement("div",{className:s}),i.createElement("span",{className:"country-name"},e.name))}),this);const t=i.createElement("li",{key:"dashes",className:"divider"});e.splice(m.length,0,t);const a=c()({"country-list":!0,hide:!this.state.showDropDown});return i.createElement("ul",{ref:this.flagDropdownRef,className:a},e)}render(){let e=c()({arrow:!0,up:this.state.showDropDown}),t=c()({"flag-dropdown":!0,"open-dropdown":this.state.showDropDown}),a=`flag ${this.state.selectedCountry.iso2}`,s=this.getCountryDropDownList();return i.createElement("div",{className:"phone-input country-select"},i.createElement("div",{ref:"flagDropDownButton",className:t},i.createElement("div",{ref:"selectedFlag",onClick:this.handleFlagDropdownClick.bind(this),className:"selected-flag"},i.createElement("div",{className:a},i.createElement("div",{className:"name"},this.state.selectedCountry.name),i.createElement("div",{className:e}))),this.state.showDropDown?s:""))}}p.defaultProps={country:m[222].iso2,flagsImagePath:"./flags.png"},p.propTypes={country:r().string,onChange:r().func};const g=p},96637:(e,t,a)=>{a.d(t,{Z:()=>r});var s=a(67294),n=a(46858);class i extends s.Component{render(){let e=void 0===this.props.use_div||this.props.use_div,t=this.props.items.map(((t,a)=>t?s.createElement(l,{key:a,item:t,use_div:e}):"")),a=(e?"container-fluid info-table border ":"table table-bordered info-table ")+(this.props.className||"");return e?s.createElement("div",{className:a},t):s.createElement("table",{className:a},s.createElement("tbody",null,t))}}class l extends s.Component{componentDidMount(){if(n.Z.isBrowser){let e=$('[data-toggle="popover"]');e.length>0&&e.popover()}}render(){let{item:e,use_div:t}=this.props,a="";if(e.headerprops){switch(e.headerprops.transform){case"lowercase":a+=" text-lowercase";break;case"uppercase":a+=" text-uppercase";break;case"capitalize":a+=" text-capitalize"}switch(e.headerprops.align){case"left":a+=" text-left";break;case"right":a+=" text-right"}}let n="";if(e.contentprops){switch(e.contentprops.transform){case"lowercase":n+=" text-lowercase";break;case"uppercase":n+=" text-uppercase";break;case"capitalize":n+=" text-capitalize"}switch(e.contentprops.align){case"left":n+=" text-left";break;case"right":n+=" text-right"}}e.contentprops&&e.contentprops.size&&!isNaN(e.contentprops.size)&&e.contentprops.size<12&&e.contentprops.size>0?(a+=" col-md-"+(12-e.contentprops.size),n+=" col-md-"+e.contentprops.size):(a+=" col-md-5",n+=" col-md-7");let i=[];if(e.contentprops&&e.contentprops.icon){let t={maxHeight:"2em"};(Array.isArray(e.contentprops.icon)?e.contentprops.icon:[e.contentprops.icon]).map(((a,n)=>{i.push(s.createElement("img",{key:n,style:t,src:e.contentprops.icon}))}))}return t?s.createElement("div",{className:"row "+(e.className||"")},s.createElement("div",{className:"col-6 font-weight-bold"+a},e.header),s.createElement("div",{className:"col-6"+n},e.content," ",i.length>0?i:"")):s.createElement("tr",null,s.createElement("th",{className:"col-6"+a},e.header),s.createElement("td",{className:"col-6"+n},e.content," ",i))}}const r=i},10894:(e,t,a)=>{a.d(t,{Z:()=>n});var s=a(67294);a(46858),a(84766),a(1055);class n extends s.Component{render(){let{style:e}=this.props;return s.createElement("a",{className:"invest-banner",style:e||null,target:"_blank",href:"https://www.startengine.com/gameflip"})}}},40654:(e,t,a)=>{a.d(t,{Z:()=>m});var s=a(67294),n=a(88601),i=a(84766),l=a(42741),r=a(46858);class o extends s.Component{render(){return s.createElement("div",{id:this.props.id,className:"photo-dialog fade modal",tabIndex:"-1",role:"dialog","aria-labelledby":this.props.id+"Label","aria-hidden":"true"},s.createElement("div",{className:"modal-dialog"},s.createElement("div",{className:"modal-content"},s.createElement("div",{className:"modal-body"},s.createElement("img",{className:"photo-dialog-img",src:""}),s.createElement("button",{type:"button",className:"close","data-dismiss":"modal","aria-label":"Close"},s.createElement("span",{"aria-hidden":"true"},s.createElement("img",{src:"/img/app/icon_close.gif"})))))))}}const c=o;var d=a(78314),h=a(1055);class m extends s.Component{getState(e){return this.exchange_id=e.exchange_id,{messages:[],next_page:null,message:""}}constructor(e,t){super(e,t),this.state=this.getState(this.props),this.loadMessages(this.props.audience)}componentDidUpdate(e,t){JSON.stringify(e)!==JSON.stringify(this.props)&&this.setState(this.getState(this.props),(()=>{this.loadMessages(this.props.audience)}))}loadMessages(e){l.Z.getExchangeMessages(this.exchange_id,this.state.next_page,((t,a)=>{t=t.filter((t=>e?t.audience==e:!t.audience)),this.setState({messages:this.state.messages.concat(t),next_page:a})}),(e=>{i.Log.error(e)}))}refresh(){this.setState(this.getState(this.props),(()=>{this.loadMessages(this.props.audience)}))}onChangeMessage(e){this.setState({message:e.target.value})}sendMessage(e){e.preventDefault();let t=this.state.message.trim();if(!t)return;let a={message:t};this.props.audience&&(a.audience=this.props.audience),l.Z.postExchangeMessage(this.exchange_id,a,(e=>{e.avatar=d.Z.profile.avatar,e.display_name=d.Z.profile.display_name;let t=this.state.messages;t.unshift(e),this.setState({messages:t,message:""})}),(e=>{r.Z.showErrorDialog(e)}))}selectPhoto(e){this.refs.message_photo_dropzone.open()}onDrop(e){i.Log.debug(e,"onDrop files");let t=e[0];r.Z.notValidImage(t)||r.Z.compressImageAny(t.preview,1024,640,0,!1,(e=>{let t=r.Z.dataURItoBlob(e);l.Z.uploadExchangePhoto(this.exchange_id,t,this.props.audience,((e,t,a)=>{i.Log.debug(a),a.avatar=d.Z.profile.avatar,a.display_name=d.Z.profile.display_name,a.media_id=e,a.view_url=t;let s=this.state.messages;s.unshift(a),this.setState({messages:s})}),(e=>{r.Z.showErrorDialog(e)}))}))}loadMore(e){e.preventDefault(),this.loadMessages(this.props.audience)}zoomImage(e,t){$("#message-photo-dialog img.photo-dialog-img").attr("src",e),$("#message-photo-dialog").is(":visible")||$("#message-photo-dialog").modal("show")}render(){let e=this.props.quickview,t=this.props.audience||"",a=this.props.to||"",l=this.state.messages.map(((t,a)=>{let n="";n=t.media_id&&t.view_url?s.createElement("div",{className:"row zoom-photo message-content message-photo"+(e?" quickview":""),onClick:e?null:this.zoomImage.bind(this,t.view_url)},s.createElement("img",{className:"img-fluid img-thumbnail",src:t.view_url})):s.createElement("div",{className:"row message-content"},r.Z.replaceLineBreak(t.message));let l=s.createElement("img",{src:r.Z.avatarUrl(t.avatar),className:"img-fluid rounded-circle"});return s.createElement("div",{className:"row message",key:a},s.createElement("div",{className:"col-2 avatar"},e?l:s.createElement(i.Link,{to:"profile",params:{id:t.owner,name:r.Z.slug(t.display_name)}},l)),s.createElement("div",{className:"col-10"},s.createElement("div",{className:"row"},s.createElement("b",null,t.display_name)),n,s.createElement("div",{className:"row"},s.createElement("p",{className:"text-muted"},r.Z.timePassed(t.created)))))})),o=null;o="support"==t?s.createElement("h3",null,(0,h._)("Dispute Support")):"buyer"==a.toLowerCase()?s.createElement("h3",null,(0,h._)("Messages to Buyer")):"seller"==a.toLowerCase()?s.createElement("h3",null,(0,h._)("Messages to Seller")):s.createElement("p",null,"Â ");let d="support"==t?s.createElement("p",null,(0,h._)("Please provide evidence for the dispute. Be sure to include screenshots or photos to support the investigation.")):s.createElement("p",null,(0,h._)("All messages and photos can be reviewed by Gameflip at any time to support both parties during the transaction.")),m=this.props.readonly?"":s.createElement("div",null,o,d,s.createElement("textarea",{className:"form-control",placeholder:(0,h._)("Type your message"),rows:"4",value:this.state.message,onChange:this.onChangeMessage.bind(this)}),s.createElement("div",{className:"row"},s.createElement("div",{className:"col-4 col-md-6"},s.createElement("button",{className:"btn btn-outline-secondary",onClick:this.selectPhoto.bind(this)},s.createElement("span",{className:"fa fa-picture","aria-hidden":"true"})," ",(0,h._)("Add Photo")),s.createElement(n.Z,{ref:"message_photo_dropzone",className:"dropzone",onDrop:this.onDrop.bind(this),multiple:!1,accept:"image/*"})),s.createElement("div",{className:"col-8 col-md-6 text-right"},s.createElement("div",{className:"btn-group",role:"group"},s.createElement("button",{className:"btn btn-primary",onClick:this.sendMessage.bind(this)},(0,h._)("Send")),s.createElement("button",{className:"btn btn-outline-secondary",onClick:this.refresh.bind(this)},s.createElement("span",{className:"fa fa-sync-alt","aria-hidden":"true"})))))),p=this.state.next_page?s.createElement("div",{className:"load-more row text-center"},s.createElement("button",{className:"btn btn-primary",onClick:this.loadMore.bind(this)},(0,h._)("Load More"))):"";return m||l&&0!=l.length||(l=s.createElement("p",{className:"text-muted"},(0,h._)("There is no message available."))),s.createElement("div",{className:"message-component section"},s.createElement("div",{className:"section-content container-fluid"},m,s.createElement("div",{className:"message-list"},l),p),e?"":s.createElement(c,{id:"message-photo-dialog"}))}}},25315:(e,t,a)=>{a.d(t,{Z:()=>r});var s=a(67294),n=(a(84766),a(46858)),i=a(1055);const l=["good","neutral","poor"];class r extends s.Component{constructor(e,t){super(e,t),this.state={rate:"good",comment:""}}onRate(e,t){this.setState({rate:e})}onChangeComment(e){this.setState({comment:e.target.value})}rate(e){this.isValid()&&this.props.onPostRating&&this.props.onPostRating(this.state)}isValid(){let{rate:e,comment:t}=this.state;return!(!e||-1==l.indexOf(e)||!t||"good"!=e&&t.length<64||"good"==e&&t.length<20)}render(){let{heading:e}=this.props,{rate:t,comment:a}=this.state,r=this.isValid(),o=l.map(((e,a)=>s.createElement("div",{className:"col-3 text-center",key:a},s.createElement("img",{className:"img-fluid",src:"/img/app/icon_rating_"+e+".png"}),s.createElement("span",null,n.Z.capitalize((0,i._)(e))),s.createElement("br",null),s.createElement("input",{type:"radio",name:"rate",value:e,checked:t==e,onChange:this.onRate.bind(this,e)}))));return s.createElement("div",{className:"container-fluid info-table"},s.createElement("div",{className:"row"},s.createElement("p",null,e,":")),s.createElement("div",{className:"row"},s.createElement("div",{className:"col-1"}),o,s.createElement("div",{className:"col-1"})),s.createElement("div",{className:"row form-group"+(r?"":" has-error")},s.createElement("textarea",{className:"form-control",placeholder:(0,i._)("Your comments..."),rows:"3",value:a,onChange:this.onChangeComment.bind(this)}),s.createElement("div",{className:"float-left "+(r?"text-muted":"text-danger")},s.createElement("small",null,(0,i._)("Min.")," ","good"!=t?64:20)),s.createElement("div",{className:"float-right "+(r?"text-muted":"text-danger")},s.createElement("small",null,a.length,"/",512))),s.createElement("div",{className:"row text-center"},s.createElement("button",{className:"btn btn-primary"+(this.isValid()?"":" disabled"),onClick:this.rate.bind(this)},(0,i._)("Send Feedback"))))}}},90135:(e,t,a)=>{a.d(t,{Z:()=>o});var s=a(67294),n=a(84766),i=a(95835),l=a(46858);class r extends s.Component{render(){let{profile:e,nolink:t,className:a}=this.props;if(!e)return null;let r=s.createElement("div",{className:a},s.createElement(i.Z,{src:l.Z.avatarUrl(e.avatar),alt:e.display_name,className:"img-fluid rounded-circle img-thumbnail avatar-image avatar-dummy",dim:200}),s.createElement(i.Z,{src:l.Z.avatarUrl(e.avatar),alt:e.display_name,className:"img-fluid rounded-circle img-thumbnail avatar-image",dim:200}),e.id_verified?s.createElement("img",{src:"/img/app/verified_frame.png",className:"img-fluid avatar-verified-frame"}):"");return t?r:s.createElement(n.Link,{className:a,to:"profile",params:{id:e.owner,name:l.Z.slug(e.display_name)}},r)}}const o=r},94643:(e,t,a)=>{a.d(t,{Z:()=>r});var s=a(67294),n=a(46858),i=(a(84766),a(1055));class l extends s.Component{componentDidMount(){n.Z.reloadPopover()}componentDidUpdate(){n.Z.reloadPopover()}render(){let{profile:e,className:t}=this.props;if(!e||!e.id_verified)return null;let a=(0,i._)("Gameflip Verified"),n=(0,i._)("This profile has been verified by Gameflip.");return s.createElement("a",{tabIndex:"0",role:"button",className:"btn-link"+(t?" "+t:""),"data-toggle":"popover","data-trigger":"focus","data-placement":"top","data-container":"body","data-original-title":a,"data-content":n,"data-html":!0},s.createElement("img",{className:"img-fluid avatar-verified-badge",src:"/img/app/icon_badge_verified.png",alt:"Verified User Badge"}))}}const r=l},99657:(e,t,a)=>{a.d(t,{Z:()=>s});const s=new class{getRegions(e){let t=e.toUpperCase();return"US"==t?[["Alabama","AL"],["Alaska","AK"],["American Samoa","AS"],["Arizona","AZ"],["Arkansas","AR"],["Armed Forces Americas","AA"],["Armed Forces Europe","AE"],["Armed Forces Pacific","AP"],["California","CA"],["Colorado","CO"],["Connecticut","CT"],["Delaware","DE"],["District Of Columbia","DC"],["Florida","FL"],["Georgia","GA"],["Guam","GU"],["Hawaii","HI"],["Idaho","ID"],["Illinois","IL"],["Indiana","IN"],["Iowa","IA"],["Kansas","KS"],["Kentucky","KY"],["Louisiana","LA"],["Maine","ME"],["Marshall Islands","MH"],["Maryland","MD"],["Massachusetts","MA"],["Michigan","MI"],["Minnesota","MN"],["Mississippi","MS"],["Missouri","MO"],["Montana","MT"],["Nebraska","NE"],["Nevada","NV"],["New Hampshire","NH"],["New Jersey","NJ"],["New Mexico","NM"],["New York","NY"],["North Carolina","NC"],["North Dakota","ND"],["Northern Mariana Islands","NP"],["Ohio","OH"],["Oklahoma","OK"],["Oregon","OR"],["Pennsylvania","PA"],["Puerto Rico","PR"],["Rhode Island","RI"],["South Carolina","SC"],["South Dakota","SD"],["Tennessee","TN"],["Texas","TX"],["US Virgin Islands","VI"],["Utah","UT"],["Vermont","VT"],["Virginia","VA"],["Washington","WA"],["West Virginia","WV"],["Wisconsin","WI"],["Wyoming","WY"]]:"CA"==t?[["Alberta","AB"],["British Columbia","BC"],["Manitoba","MB"],["New Brunswick","NB"],["Newfoundland","NF"],["Northwest Territory","NT"],["Nova Scotia","NS"],["Nunavut","NU"],["Ontario","ON"],["Prince Edward Island","PE"],["Quebec","QC"],["Saskatchewan","SK"],["Yukon","YT"]]:[]}convert(e,t,a){let s=this.getRegions(e||"");if(a||(a=2),2==a){let e=t.replace(/\w\S*/g,(e=>e.charAt(0).toUpperCase()+e.substr(1).toLowerCase()));for(let t=0;t<s.length;t++)if(s[t][0]==e)return s[t][1]}else if(1==a){let e=t.toUpperCase();for(let t=0;t<s.length;t++)if(s[t][1]==e)return s[t][0]}return t}}},91345:(e,t,a)=>{a.r(t),a.d(t,{default:()=>N});var s=a(67294),n=a(88601),i=a(84766),l=a(46858),r=a(42741),o=a(40872),c=a(78314),d=a(97261),h=a(1055),m=a(96637),p=a(40654),g=a(64927),u=a(48282),_=a(21397),v=a(90135),E=a(94643),f=a(25315),b=a(10894),y=a(96655);class N extends s.Component{getState(){return{exchange:d.Z.exchange}}constructor(e,t){super(e,t),d.Z.reset(),this.state=this.getState(),this._onChange=this._onChange.bind(this)}componentDidMount(){if(!l.Z.checkLogin(!0))return;d.Z.onChange(this._onChange);let e=this.props.exchange_id||this.props.match.params.id;this.loadExchange(e)}componentDidUpdate(e,t){JSON.stringify(this.props)!==JSON.stringify(e)&&this.loadExchange(this.props.exchange_id)}componentWillUnmount(){d.Z.offChange(this._onChange)}_onChange(){this.setState(this.getState())}loadExchange(e){e&&d.Z.fetchExchange(e,(e=>{l.Z.setDocumentTitle("Order: "+e.name)}),(e=>{i.Log.error(e,"Fetch exchange"),l.Z.transitionTo("listings",{tab:"sold"})}))}render(){if(!l.Z.isLoggedIn)return!1;let e=this.state.exchange.name||"",t=this.props.quickview;return s.createElement("div",{id:"exchange",className:"screen container-lg"},t?"":s.createElement("div",{className:"row"},s.createElement("h1",{className:"col-12 col-md-12"},(0,h._)("Order"),": ",e)),s.createElement("div",{className:"row"},s.createElement("div",{className:"col-12 col-md-6"},s.createElement(w,{quickview:t}),s.createElement(x,{quickview:t})),s.createElement("div",{className:"col-12 col-md-6 info-table"},s.createElement(k,{quickview:t}))))}}class w extends s.Component{constructor(e,t){super(e,t),this.state=this.getState(),this.state.show_item_detail=!1,this._onChange=this._onChange.bind(this)}getState(){return{exchange:d.Z.exchange,item:d.Z.item}}componentDidMount(){d.Z.onChangeItem(this._onChange)}componentWillUnmount(){d.Z.offChangeItem(this._onChange)}_onChange(){this.setState(this.getState())}onListingClick(e){e.preventDefault();let t=this.state;t.show_item_detail=!t.show_item_detail,this.setState(t)}render(){let{exchange:e,item:t}=this.state;if(!t.id)return!1;t.info=[],t.category&&(t.info=l.Z.itemInfo(t));let a="";e.kind==y.Bxu&&(a=s.createElement("div",{className:"row"},s.createElement("div",{className:"col-7 col-md-7"},s.createElement("label",{className:"gig-label"},e.pkg_name)),s.createElement("div",{className:"col-12"},s.createElement("span",{className:"fa fa-time"}),"Â Â ",s.createElement("span",{className:"text-muted"},1==e.pkg_deliver_within_days?(0,h._)("1 day delivery"):(0,h._)("{day} days delivery",{day:e.pkg_deliver_within_days}))),s.createElement("div",{className:"col-12 gig-tier-description"},e.pkg_description?l.Z.replaceLineBreak(e.pkg_description.trim()):"")));let n=this.props.quickview,r=t.kind==y.n$X&&t.collectible_item_id||t.id,o=s.createElement(_.Z,{alt:t.name,className:"rounded border img-fluid bg_2d",item:t,dim:320}),c=n?o:s.createElement(i.Link,{to:t.kind||y.Iox,params:{name:l.Z.slug(t.name),id:r}},o),d=n?e.name:s.createElement(i.Link,{to:t.kind||y.Iox,params:{name:l.Z.slug(t.name),id:r}},e.name);return s.createElement("div",{className:"exchange-item"},s.createElement("div",{className:"exchange-item-top container-fluid"},s.createElement("div",{className:"row "},s.createElement("div",{className:"col-4 overflow-hidden"},c),s.createElement("div",{className:"col-8"},s.createElement("h3",null,d),s.createElement(C,{quickview:n})))),a?s.createElement("div",{className:"container-fluid inner-content exchange-item-top"},a):"",e.kind==y.Iox?s.createElement("div",{className:"container-fluid inner-content exchange-item-top"},s.createElement("div",{id:"listing-details-toggle","data-toggle":"collapse","data-target":"#listing-details","aria-expanded":"false","aria-controls":"listing-details",onClick:this.onListingClick.bind(this)},s.createElement("a",{className:"btn-link"},this.state.show_item_detail?(0,h._)("Hide Listing Details"):(0,h._)("Show Listing Details")),s.createElement("span",{className:"float-right fa "+(this.state.show_item_detail?"fa-chevron-up":"fa-chevron-down"),"aria-hidden":"true"})),s.createElement("div",{className:"collapse",id:"listing-details"},s.createElement(m.Z,{items:t.info}))):"")}}class x extends s.Component{constructor(e){super(e),this.state={tab:"user"}}selectTab(e){this.setState({tab:e})}render(){let e=d.Z.exchange,t=[y.rlS,y.PGQ,y.Xp3,y.ggQ,y.V5K,y.Zue,y.c9c,y.h_V,y.I2W].indexOf(e.status)>=0&&e.original_status!=y.WWs,a=[y.h_V,y.I2W].indexOf(e.status)>=0,n=this.state.tab||"user",i="support"==n?"support":"",l=e.status==y.c9c;return t?s.createElement("div",{className:"container-fluid inner-content"},s.createElement("p",null,"Â "),s.createElement("ul",{className:"nav nav-tabs"},s.createElement("li",{className:"nav-item"},s.createElement("a",{className:"nav-link "+("user"==n?"active":""),onClick:this.selectTab.bind(this,"user"),role:"tab"},s.createElement("img",{src:"/img/app/icon_conversation.png",className:"menu-icon center-block"}))),l?s.createElement("li",{className:"nav-item"},s.createElement("a",{className:"nav-link "+("support"==n?"active":""),onClick:this.selectTab.bind(this,"support"),role:"tab"},s.createElement("img",{src:"/img/app/icon_support.png",className:"menu-icon center-block"}))):""),s.createElement(p.Z,{exchange_id:e.id,to:"buyer",readonly:a,quickview:this.props.quickview,audience:i}),e&&"complete"==e.status?s.createElement(b.Z,null):""):s.createElement("div",null)}}class C extends s.Component{constructor(e,t){super(e,t),this.state=this.getState(),this._onChange=this._onChange.bind(this)}getState(){return{profile:d.Z.profile}}componentDidMount(){d.Z.onChangeProfile(this._onChange)}componentWillUnmount(){d.Z.offChangeProfile(this._onChange)}_onChange(){this.setState(this.getState())}render(){let e=this.state.profile;if(!e.owner)return!1;let t=this.props.quickview,a=s.createElement(v.Z,{profile:e,nolink:t}),n=t?e.display_name:s.createElement("span",null,s.createElement(E.Z,{profile:e}),s.createElement(i.Link,{to:"profile",params:{id:e.owner,name:l.Z.slug(e.display_name)}},e.display_name));return s.createElement("div",{className:"row profile"},s.createElement("div",{className:"col-3 avatar"},a),s.createElement("div",{className:"col-9 info"},s.createElement("div",{className:"row no-gutters"},s.createElement("h5",null,(0,h._)("Sold to")," ",n))))}}class k extends s.Component{render(){let e=d.Z.exchange;if(!e.id)return!1;let t=e.status,a={shipping:!1,to_address:!1,delivery:!1,tracking:!1,vault:!1,transfer:!1,timer:!1,info:!0,rate:!1,cancel:!1,resolve:!1};if(e.kind==y.Bxu?t!=y.PGQ&&t!=y.Xp3||t==y.c9c||(a.transfer=!0):e.digital?t!=y.PGQ&&t!=y.Xp3&&t!=y.c9c&&t!=y.I2W||("code"==e.digital_deliverable?e.steam_properties||e.escrow_status||e.nft||(a.vault=!0):e.digital_deliverable&&t!=y.c9c&&t!=y.I2W&&(a.transfer=!0)):(t==y.rlS&&(a.shipping=!0),e.tracking_code&&e.carrier&&(a.tracking=!0),t==y.PGQ&&(a.delivery=!0),e.to_address&&(a.to_address=!0)),e.original_status!=y.rlS||e.escrow_status||(e.hold_status==y.c9c?a.resolve=!0:e.handling_status!=y.jJH&&(a.cancel=!0)),t==y.Zue)e.nft||(a.rate=!0);else if(t==y.I2W&&!e.seller_rated&&!e.escrow_status&&!e.nft){let t=e.rate_by?new Date(e.rate_by).getTime():0;a.rate=(new Date).getTime()<t}return e.auto_rate_after&&t==y.Xp3&&(a.timer=!0),s.createElement("div",{className:"exchange-detail"},s.createElement(Z,null),a.shipping?s.createElement(S,null):"",a.to_address?s.createElement(D,{address:e.to_address}):"",a.delivery?s.createElement(I,null):"",a.tracking?s.createElement(A,null):"",a.vault?s.createElement(L,null):"",a.timer?s.createElement(P,null):"",a.transfer?s.createElement(M,null):"",a.resolve?s.createElement(R,null):"",a.info?s.createElement(T,null):"",a.rate?s.createElement(B,null):"",a.cancel?s.createElement(U,null):"")}}class Z extends s.Component{render(){let e=d.Z.exchange,t=e.state.help?s.createElement("a",{className:"btn-link",href:e.state.help,target:"_blank"},s.createElement("span",{className:"fa fa-question-circle","aria-hidden":"true"})):"";return s.createElement("div",{className:"row no-gutters"},s.createElement("div",{className:"col-3 exchange-status-icon"},s.createElement("img",{src:e.state.icon,className:"img-fluid"})),s.createElement("div",{className:"col-9 exchange-status-info"},s.createElement("h3",null,e.state.title,"Â ",t),s.createElement("p",null,e.state.detail)))}}class S extends s.Component{constructor(e,t){super(e,t),this.state={address_id:l.Z.shipFromAddressId(),agreed:!1},this.valid=!1}selectAddress(e){this.setState({address_id:e?e.id:""})}agree(e){this.setState({agreed:!this.state.agreed})}createLabel(){if(!this.valid)return;let e={address_id:this.state.address_id};d.Z.createLabel(e,(e=>{l.Z.showDialog({title:(0,h._)("Shipping Label Created"),message:(0,h._)("Your shipping label is created and sent to your email address at {email}. Please send your item as soon as possible.",{email:c.Z.profile.email}),ok:{label:(0,h._)("Download Label"),callback:t=>{l.Z.hideDialog(),l.Z.isBrowser&&window.open(e,"_blank")}},cancel:{label:"Not Now",callback:e=>{l.Z.hideDialog()}}})}),(e=>{l.Z.showErrorDialog(e)}))}render(){let e=d.Z.exchange,{address_id:t,agreed:a}=this.state,n={Parcel:{text:s.createElement("p",null,(0,h._)("Item + packaging must weigh <b>8 oz or less</b>.<br/> We highly recommend using Bubble mailer for shipping.",{__html:!0})),photos:["/img/app/ship_parcel.jpg","/img/app/ship_toy.png"]},Letter:{text:s.createElement("p",null,(0,h._)("Item + packaging must weigh <b>3 oz or less</b>.<br/> We highly recommend using CD mailer for shipping.",{__html:!0})),photos:["/img/app/ship_letter.jpg"]}},i="",l=c.Z.profile.sell&&c.Z.profile.sell>5;if(e.shipping_predefined_package&&[y.EKU,y.JnL].indexOf(e.shipping_predefined_package)>=0){let t=n[e.shipping_predefined_package],r=t.photos.map(((e,t)=>s.createElement("img",{className:"col-12 col-sm-6 col-md-4",src:e,key:t})));i=s.createElement("div",{className:"row text-center"},s.createElement("div",{className:"col-12"},t.text),r,l?"":s.createElement("div",{className:"row pointer text-left",onClick:this.agree.bind(this)},s.createElement("div",{className:"col-2 col-md-1 text-right"},s.createElement("input",{type:"checkbox",onChange:this.agree.bind(this),checked:a})),s.createElement("div",{className:"col-10 col-md-11"},s.createElement("span",null,"I understand the weight and packaging requirement for shipping, and I am responsible for any return or additional charges due to incorrect weight or improper packaging."))))}return this.valid=t&&(a||l),s.createElement("div",{className:"row no-gutters"},s.createElement("h2",null,"Ship From Address"),s.createElement(u.Z,{type:y.mr3,address_id:t,onSelect:this.selectAddress.bind(this)}),i,s.createElement("div",{className:"row text-center"},s.createElement("br",null),s.createElement("button",{className:"btn btn-primary"+(this.valid?"":" disabled"),onClick:this.createLabel.bind(this)},(0,h._)("Create Shipping Label"))))}}class D extends s.Component{render(){return s.createElement("div",{className:"row no-gutters"},s.createElement("h2",null,(0,h._)("Ship To Address")),s.createElement("div",{className:"container-fluid"},l.Z.formatAddress(this.props.address)))}}class I extends s.Component{constructor(e,t){super(e,t),this.state={tracking:!0,carrier:"USPS",tracking_code:""},this.valid=!1}onTrack(e){this.setState({tracking:e.target.checked})}selectCarrier(e){this.setState({carrier:e.target.value})}onChangeTrackingCode(e){this.setState({tracking_code:e.target.value.trim()})}deliver(e){if(!this.valid)return;let t=d.Z.exchange,a=this.state.tracking,s=this.state.carrier,n=this.state.tracking_code,i=t.shipping_predefined_package==y.gtY&&a?{carrier:s,tracking_code:n}:null;d.Z.deliver(i,(()=>{}),(e=>{l.Z.showErrorDialog(e)}))}render(){let e=d.Z.exchange,t=this.state.tracking,a=this.state.carrier,n=this.state.tracking_code,i="";if(e.shipping_predefined_package==y.gtY){let e="";t&&(e=s.createElement("div",null,s.createElement("div",{className:"row"},s.createElement("div",{className:"col-5"},s.createElement("h4",null,"Shipping carrier")),s.createElement("div",{className:"col-7"},s.createElement("select",{className:"form-control",name:"shipping_within_days",value:a,onChange:this.selectCarrier.bind(this)},s.createElement("option",{value:"USPS"},"USPS"),s.createElement("option",{value:"FedEx"},"FedEx"),s.createElement("option",{value:"UPS"},"UPS"),s.createElement("option",{value:"DHL"},"DHL")))),s.createElement("div",{className:"row"},s.createElement("div",{className:"col-12"},s.createElement("input",{className:"form-control",type:"text",placeholder:(0,h._)("Tracking code"),value:n,onChange:this.onChangeTrackingCode.bind(this)}))))),i=s.createElement("div",null,s.createElement("div",{className:"row"},s.createElement("div",{className:"col-2"},s.createElement("input",{type:"checkbox",onChange:this.onTrack.bind(this),checked:t})),s.createElement("div",{className:"col-10"},s.createElement("h5",null,(0,h._)("I shipped with tracking"))," ",s.createElement("span",{className:"note"},(0,h._)("Gameflip will NOT provide Seller protection when shipping items without tracking.")))),e)}return this.valid=e.shipping_predefined_package!=y.gtY||!t||n,s.createElement("div",{className:"exchange-delivery row no-gutters"},s.createElement("h2",null,(0,h._)("Confirm Shipping")),s.createElement("div",{className:"container-fluid"},s.createElement("p",null,(0,h._)("Notify the Buyer that you've shipped the item.")),i,s.createElement("div",{className:"row text-center"},s.createElement("button",{className:"btn btn-primary"+(this.valid?"":" disabled"),onClick:this.deliver.bind(this)},(0,h._)("I've Shipped the Item")))))}}class A extends s.Component{render(){let e=d.Z.exchange,t=(o.Z.config.shipping||{})[e.carrier.toLowerCase()]+e.tracking_code,a=[{header:e.carrier,content:s.createElement("a",{href:t,target:"_blank"},(0,h._)("Tracking history"))}];return e.shipping_predefined_package!=y.gtY&&a.push({header:"Shipping Label",content:s.createElement("a",{href:e.label_pdf_url,target:"_blank"},"Download")}),s.createElement("div",{className:"row no-gutters"},s.createElement("h2",null,(0,h._)("Tracking")),s.createElement(m.Z,{items:a}))}}class L extends s.Component{constructor(e,t){super(e,t),this.state=this.getState(),this._onChange=this._onChange.bind(this)}getState(){return{vault:d.Z.vault}}componentDidMount(){d.Z.onChangeVault(this._onChange)}componentWillUnmount(){d.Z.offChangeVault(this._onChange)}_onChange(){this.setState(this.getState())}onChangeVault(e){d.Z.vault=e.target.value}send(e){this.state.vault.trim()&&d.Z.sendVault((()=>{}),(e=>{l.Z.showErrorDialog(e)}))}render(){let e=d.Z.exchange,t=this.state.vault,a="";return e.status==y.PGQ?a=s.createElement("div",{className:"section-content container-fluid"},s.createElement("textarea",{className:"form-control",placeholder:(0,h._)("Enter digital key or code for this listing. Use multiple lines when bundling several keys or codes."),rows:"4",value:t,onChange:this.onChangeVault.bind(this)}),s.createElement("p",null,s.createElement("b",null,(0,h._)("Important")),": ",(0,h._)("Be sure to enter the complete and correct key or code. Incorrect code will result in buyer refund.")),s.createElement("div",{className:"row text-center"},s.createElement("button",{className:"btn btn-primary",onClick:this.send.bind(this)},(0,h._)("Send to Buyer")))):t&&(a=s.createElement("div",{className:"section-content container-fluid"},s.createElement("pre",{className:"vault well text-center"},t))),s.createElement("div",{className:"exchange-detail-vault section"},a?s.createElement("h2",{className:"section-title"},(0,h._)("Key or Code")):"",a)}}class P extends s.Component{render(){let e=d.Z.exchange;return!!e.auto_rate_after&&s.createElement("div",{className:"row no-gutters"},s.createElement("h2",null,(0,h._)("Acceptance")," "),s.createElement("div",{className:"container-fluid info-table"},s.createElement("p",null,(0,h._)("Buyer must complete transaction by"),": ",s.createElement(i.TimeCountDown,{className:"text-danger",datetime:e.auto_rate_after}))))}}class M extends s.Component{constructor(e,t){super(e,t),this.state={confirmed:!1,attachments:[]}}onConfirm(e){this.setState({confirmed:e.target.checked})}deliver(e){this.isReady()&&d.Z.deliver(null,(()=>{}),(e=>{l.Z.showErrorDialog(e)}))}onDrop(e){i.Log.debug(e,"onDrop files");let{attachments:t}=this.state;if(t.length>=4)return;let a=-1,s=()=>{if(a++,a>=e.length||a>=3)return;let t=e[a];l.Z.notValidImage(t)||this.uploadAttachment(t,(()=>{s()}))};s()}uploadAttachment(e,t){let a=d.Z.exchange;l.Z.compressImageAny(e.preview,1920,1200,0,!1,(e=>{let s=l.Z.dataURItoBlob(e);r.Z.uploadExchangePhoto(a.id,s,"support",((e,a,s)=>{s.media_id=e,s.view_url=a;let{attachments:n}=this.state;n.push(s),this.setState({attachments:n}),t&&t()}),(e=>{l.Z.showErrorDialog(e),t&&t()}))}))}deleteAttachment(e,t){let{attachments:a}=this.state;a=a.filter((t=>t.media_id!=e.media_id)),this.setState({attachments:a})}zoomImage(e,t){$("#message-photo-dialog").length>0&&($("#message-photo-dialog img.photo-dialog-img").attr("src",e),$("#message-photo-dialog").is(":visible")||$("#message-photo-dialog").modal("show"))}isReady(){let{confirmed:e,attachments:t}=this.state,a=d.Z.exchange.kind==y.Bxu;return e&&(!a||t.length>0)}render(){let{confirmed:e,attachments:t}=this.state,a=d.Z.exchange,r=a.kind==y.Bxu,o=a.category==y.gav,c=this.isReady(),m=l.Z.gameInfo(a.upc),p=m.platform||"",g=a.steam_properties?a.steam_properties.buyer_trade_url:"",u=m.steam_app_id&&g?s.createElement("div",{className:"col-12"},s.createElement("p",null,"Use the following Buyer Steam Trade URL to deliver your skin:"),s.createElement("pre",null,g)):"",_="";if(a.digital_deliver_to){let e=l.Z.deliverToLabels(a.kind==y.Bxu?a:m),t=a.digital_deliver_to.split("|"),n=0,i=e.map((e=>{let a=n<t.length?t[n]:"";return n++,s.createElement("div",{key:n},s.createElement("span",null,e),s.createElement("pre",{className:"well text-center"},a))}));_=s.createElement("div",{className:"col-12"},s.createElement("p",null,(0,h._)("The buyer provided you with this information to deliver your item"),":"),i)}let v="";v=u?(0,h._)("Include the Order ID when you send the trade offer."):p&&["playstation","xbox"].indexOf(p)>=0?(0,h._)("Using Gameflip, message the Buyer for his Gamer ID/Tag. When delivering your item in-game, confirm the correct buyer and not an impostor."):p&&["steam"].indexOf(p)>=0?(0,h._)("Using Gameflip, message the Buyer for his Steam profile ID. When delivering your item in-game, confirm the correct buyer and not an impostor."):(0,h._)("Using Gameflip, message the Buyer for his game character ID and server name/shard. When delivering your item in-game, confirm the correct buyer and not an impostor.");let E=a.shipped||!a.shipping_before||this.state.confirmed?null:new Date(a.shipping_before);E=E&&new Date<E?E:null;let f="";return l.Z.notEmpty(t)&&(f=t.map(((e,t)=>s.createElement("div",{className:"col-4",key:t},s.createElement("div",{className:"attachment zoom-photo"},s.createElement("img",{className:"img-fluid img-thumbnail pointer",src:e.view_url,onClick:this.zoomImage.bind(this,e.view_url)}),s.createElement("button",{className:"close",onClick:this.deleteAttachment.bind(this,e)},s.createElement("img",{src:"/img/app/icon_close.gif"}))))))),s.createElement("div",{className:"row no-gutters"},s.createElement("h2",null,r?(0,h._)("Delivery"):(0,h._)("Send / Delivery")),s.createElement("div",{className:"container-fluid info-table"},s.createElement("div",{className:"row"},E?s.createElement("p",null,r?(0,h._)("Must deliver within"):(0,h._)("Must send item within"),": ",s.createElement(i.TimeCountDown,{className:"text-danger",datetime:E})):"",_,u,s.createElement("p",null,r?(0,h._)("For your protection, take the following steps with delivery:"):(0,h._)("For your protection, take the following steps when sending your item:")),s.createElement("ul",null,r?"":s.createElement("li",null,s.createElement("b",null,(0,h._)("Confirm correct Buyer.")),"  ",v),s.createElement("li",null,s.createElement("b",null,(0,h._)("Agree on the time.")),"  ",r?(0,h._)("Using Gameflip, message the Buyer to arrange the timing of delivery."):""," ",(0,h._)("Be sure to check for any time zone difference.")),s.createElement("li",null,s.createElement("b",null,(0,h._)("Take screenshots or photos.")),"  ",(0,h._)("Attach all screenshots to the messages with the Buyer.")))),a.status==y.PGQ?s.createElement("div",{className:"row"},r?s.createElement("div",{className:"col-12 attachments"},s.createElement("small",{className:"text-muted"},(0,h._)("You must submit <b>screenshots or photos</b> of the delivery.",{__html:!0})),s.createElement("div",{className:"row panel"},f,t.length>0?s.createElement("p",{className:"col-12"},"Â "):"",t.length<3?s.createElement(n.Z,{className:"col-12",onDrop:this.onDrop.bind(this),multiple:!0,accept:"image/*"},s.createElement("button",{className:"btn btn-outline-secondary btn-lg center-block"},s.createElement("span",{className:"fa fa-picture"}),"Â Â ",(0,h._)("Attach Screenshot"))):"")):"",s.createElement("div",{className:"col-2 col-md-1"},s.createElement("input",{type:"checkbox",onChange:this.onConfirm.bind(this),value:""})),s.createElement("div",{className:"col-10 col-md-11 mb-3"},r?o?(0,h._)("Iâve taken the necessary precautions to deliver the session to the correct buyer."):(0,h._)("Iâve taken the necessary precautions to deliver the gig to the correct buyer."):(0,h._)("Iâve taken the necessary precautions to deliver the item to the correct buyer.")),s.createElement("div",{className:"col-12 text-center"},s.createElement("button",{className:"btn btn-primary"+(c?"":" disabled"),onClick:this.deliver.bind(this)},r?o?(0,h._)("I've delivered the session"):(0,h._)("Iâve delivered the gig"):(0,h._)("Iâve delivered the item")))):""))}}class T extends s.Component{render(){let e=d.Z.exchange,t=e.price,a=e.commission,n=e.digital_fee?e.digital_fee:0,i="seller"==e.shipping_paid_by&&e.shipping_fee?e.shipping_fee:0,r=t-a-n-i,o=[{header:(0,h._)("Order ID"),content:s.createElement("span",{className:"text-warning"},e.id),contentprops:{align:"right",size:8}},{header:(0,h._)("Date"),content:l.Z.timeToDateString(e.created),contentprops:{align:"right",size:8}},{header:(0,h._)("Price"),content:s.createElement(g.Z,{money:t}),contentprops:{align:"right"}},{header:(0,h._)("Commission"),content:s.createElement(g.Z,{money:a}),contentprops:{align:"right"}},{header:s.createElement("b",null,(0,h._)("You make")),content:s.createElement(g.Z,{className:"font-weight-bold formatted-money",money:r}),contentprops:{align:"right"}}];return e.digital?o.splice(o.length-1,0,{header:(0,h._)("Digital Fee"),content:s.createElement(g.Z,{money:n}),contentprops:{align:"right"}}):e.kind==y.Iox&&o.splice(o.length-1,0,{header:(0,h._)("Shipping"),content:s.createElement(g.Z,{money:i}),contentprops:{align:"right"}}),s.createElement("div",{className:"row no-gutters"},s.createElement("h2",null,(0,h._)("Order Details")),s.createElement(m.Z,{items:o}))}}class B extends s.Component{rate(e){d.Z.postRating(e,(()=>{}),(e=>{l.Z.showErrorDialog(e)}))}render(){let e=(0,h._)("My experience with this Buyer was");return s.createElement("div",{className:"row no-gutters"},s.createElement("h2",null,(0,h._)("Rate Buyer")),s.createElement(f.Z,{heading:e,onPostRating:this.rate.bind(this)}))}}class R extends s.Component{constructor(e,t){super(e,t),this.state={resolved:!1,details:"",submission:"new",attachments:[],sellerMustRespondExpired:!1,buyerMustEscalateExpired:!1}}onSend(e){let{details:t,attachments:a}=this.state,s=(c.Z.profile,d.Z.exchange);this.setState({submission:"sending"});let n={message:t,audience:"support"};r.Z.postExchangeMessage(s.id,n,(e=>{this.setState({submission:"sent",details:"",attachments:[]}),d.Z.fetchExchange(s.id,(()=>{}),(e=>{l.Z.showErrorDialog(e)}))}),(e=>{l.Z.showErrorDialog(e)}))}onDisputeDetails(e){let t=e.target.value;i.Log.debug(t,"Got details"),this.setState({details:t})}onDrop(e){i.Log.debug(e,"onDrop files");let{attachments:t}=this.state;if(t.length>=6)return;let a=-1,s=()=>{if(a++,a>=e.length||a>=6)return;let t=e[a];l.Z.notValidImage(t)||this.uploadAttachment(t,(()=>{s()}))};s()}uploadAttachment(e,t){let a=d.Z.exchange;l.Z.compressImageAny(e.preview,1920,1200,0,!1,(e=>{let s=l.Z.dataURItoBlob(e);r.Z.uploadExchangePhoto(a.id,s,"support",((e,a,s)=>{s.media_id=e,s.view_url=a;let{attachments:n}=this.state;n.push(s),this.setState({attachments:n}),t()}),(e=>{l.Z.showErrorDialog(e),t()}))}))}zoomImage(e,t){$("#message-photo-dialog").length>0&&($("#message-photo-dialog img.photo-dialog-img").attr("src",e),$("#message-photo-dialog").is(":visible")||$("#message-photo-dialog").modal("show"))}deleteAttachment(e,t){let{attachments:a}=this.state;a=a.filter((t=>t.media_id!=e.media_id)),this.setState({attachments:a})}onResolved(e){this.setState({resolved:e.target.checked})}sellerMustRespondExpire(){this.setState({sellerMustRespondExpired:!0})}buyerMustEscalateExpire(){this.setState({buyerMustEscalateExpired:!0})}render(){let{details:e,submission:t,attachments:a}=this.state,r=d.Z.exchange,o="sending"==t;this.valid=e&&e.length&&l.Z.notEmpty(a);let c="";l.Z.notEmpty(a)&&(c=a.map(((e,t)=>s.createElement("div",{className:"col-4",key:t},s.createElement("div",{className:"attachment zoom-photo"},s.createElement("img",{className:"img-fluid img-thumbnail pointer",src:e.view_url,onClick:this.zoomImage.bind(this,e.view_url)}),s.createElement("button",{className:"close",onClick:this.deleteAttachment.bind(this,e)},s.createElement("img",{src:"/img/app/icon_close.gif"})))))));let m=s.createElement("div",{className:"container-fluid",id:"dispute-details"},s.createElement("img",{className:"mini-icon",src:"/img/app/icon_support.png"})," Â ",s.createElement("b",null,(0,h._)("Delivery Evidence")),"sent"==t?s.createElement("div",{className:"text-success"},(0,h._)("Evidence has been sent. You may provide additional evidence if necessary.")):"",s.createElement("fieldset",{disabled:o},s.createElement("div",{className:"form-group",style:{marginTop:"4px"}},s.createElement("textarea",{className:"form-control",placeholder:(0,h._)("Please describe in more details."),rows:"3",value:e,onChange:this.onDisputeDetails.bind(this)})),s.createElement("div",{className:"attachments"},s.createElement("small",{className:"text-muted"},(0,h._)("You must submit <b>screenshots or photos</b> showing that you had sent the correct item.",{__html:!0})),s.createElement("div",{className:"row"},c,a.length>0?s.createElement("p",{className:"col-12"},"Â "):"",a.length<6?s.createElement(n.Z,{className:"col-12 dropzone",onDrop:this.onDrop.bind(this),multiple:!0},s.createElement("button",{className:"btn btn-outline-secondary btn-lg center-block"},s.createElement("span",{className:"fa fa-picture"}),"Â Â ",(0,h._)("Attach Screenshot"))):"")),s.createElement("div",{className:"row"},s.createElement("span",{className:"col-9"},(0,h._)("Please review <a target='_blank' href='https://gameflip.zendesk.com/hc/en-us/articles/209576277'>how to resolve a dispute</a> with your sale for faster resolution.",{__html:!0})),s.createElement("div",{className:"col-3"},s.createElement("span",{className:"float-right"},s.createElement("button",{className:"btn btn-primary"+(this.valid?"":" disabled"),onClick:this.valid?this.onSend.bind(this):null},"Submit")))))),p=r.hold_dispute_auto_rescind_after,g=r.hold_dispute_auto_accept_after,u=r.hold_dispute_ticket_id,_=p&&!g,v=g&&!u,E=new Date,f=this.state.sellerMustRespondExpired||_&&E>new Date(p),b=this.state.buyerMustEscalateExpired||v&&E>new Date(g);return f||b?s.createElement("div",{className:"row no-gutters"},s.createElement("div",{className:"col"},s.createElement("h2",null,(0,h._)("Issue Resolution")),f?s.createElement("p",null,(0,h._)("Since you did not communicate with the buyer nor respond to the dispute, the dispute has been closed in the buyer's favor.")):"",b?s.createElement("p",null,(0,h._)("Because the buyer did not escalate the issue further, we conclude that the buyer's issue has been resolved.")):"",s.createElement("p",null,(0,h._)("Please wait while the resolution is being processed.")))):s.createElement("div",{className:"row no-gutters"},s.createElement("div",{className:"col"},s.createElement("h2",null,(0,h._)("Issue Resolution")),_?s.createElement("p",null,(0,h._)("Must cancel or respond within"),": ",s.createElement(i.TimeCountDown,{className:"text-danger",datetime:r.hold_dispute_auto_rescind_after,onZero:this.sellerMustRespondExpire.bind(this)})):"",v?s.createElement("p",null,(0,h._)("Buyer must close or escalate issue within"),": ",s.createElement(i.TimeCountDown,{className:"text-danger",datetime:r.hold_dispute_auto_accept_after,onZero:this.buyerMustEscalateExpire.bind(this)})):"",u?s.createElement("p",{className:"text-danger"},(0,h._)("The buyer has escalated the dispute to Dispute Support. Additional evidence may be requested from you to resolve the issue.")):"",s.createElement("div",{id:"resolve-accordion",className:"container-fluid info-table form-horizontal panel-group"},s.createElement("div",{className:"panel"},s.createElement("div",{id:"cancel-toggle"},s.createElement("h3",null,(0,h._)("Cancel Transaction")),s.createElement("a",{className:"btn btn-link exchange-btn-toggle","data-toggle":"collapse","data-target":"#cancel-container","aria-expanded":"false","aria-controls":"cancel-container",style:{whiteSpace:"normal"}},s.createElement("span",{className:"fa fa-chevron-right","aria-hidden":"true"},"Â "),(0,h._)("I want to cancel and refund the buyer"))),s.createElement("div",{id:"cancel-container",className:"collapse","aria-labelledby":"cancel-toggle","data-parent":"#resolve-accordion"},s.createElement(U,null))),s.createElement("div",{className:"panel"},s.createElement("div",{id:"evidence-toggle",className:"panel-header"},s.createElement("h3",null,(0,h._)("Provide Delivery Information")),s.createElement("a",{className:"btn btn-link exchange-btn-toggle","data-toggle":"collapse","data-target":"#evidence-container","aria-expanded":"false","aria-controls":"evidence-container"},s.createElement("span",{className:"fa fa-chevron-right","aria-hidden":"true"},"Â "),(0,h._)("I want to provide evidence that I had sent the correct item"))),s.createElement("div",{id:"evidence-container",className:"collapse","aria-labelledby":"evidence-toggle","data-parent":"#resolve-accordion"},s.createElement("div",{className:"panel-body"},m)))),_?s.createElement("p",{className:"text-danger"},(0,h._)("Failure to resolve the issue or provide evidence will result in automatic cancellation and refund of the transaction.")):""))}}class U extends s.Component{constructor(e,t){super(e,t),this.state={reason:"",other:""}}show(){$("#exchange-cancel-dialog").is(":visible")||$("#exchange-cancel-dialog").modal("show")}hide(){$("#exchange-cancel-dialog").modal("hide")}onChangeProp(e,t){let a=this.state;a[e]=t.target.value,this.setState(a)}cancel(e){d.Z.cancel(this.state.reason,this.state.other.trim(),(()=>{this.hide()}),(e=>{this.hide(),l.Z.showErrorDialog(e)}))}render(){let e=this.state.reason,t=this.state.other,a=[{token:"item_gone",text:(0,h._)("I no longer have this item")},{token:"no_sell",text:(0,h._)("I donât want to sell this item")},{token:"item_defective",text:(0,h._)("I found the item to be defective")},{token:"buyer_request",text:(0,h._)("Buyer requested me to cancel the order")},{token:"other",text:(0,h._)("Other reason")}].map(((t,a)=>s.createElement("div",{className:"row reason",key:a},s.createElement("div",{className:"col-12"},s.createElement("label",{className:"pointer"},s.createElement("input",{type:"radio",name:"reason",id:t.token,value:t.token,checked:e==t.token,onChange:this.onChangeProp.bind(this,"reason")})," Â  ",t.text))))),n=s.createElement("br",null);"other"==e&&(n=s.createElement("div",{className:"row other"},s.createElement("div",{className:"col-2 col-md-1"}),s.createElement("div",{className:"col-10 col-md-11"},s.createElement("textarea",{className:"form-control",placeholder:(0,h._)("Enter your reason"),rows:"2",value:t,onChange:this.onChangeProp.bind(this,"other")}))));let l=e;return s.createElement("div",{className:"exchange-detail-cancel"},s.createElement("div",{className:"text-center"},s.createElement("button",{className:"btn btn-outline-secondary",onClick:this.show},(0,h._)("Cancel the order"))),s.createElement(i.Dialog,{id:"exchange-cancel-dialog",className:"fade",title:(0,h._)("Cancel Order"),content:s.createElement("div",{className:"container-fluid"},s.createElement("div",{className:"row"},s.createElement("h4",null,(0,h._)("REASON FOR CANCELLATION"))),a,n,s.createElement("div",{className:"row"},s.createElement("p",null,(0,h._)("You are responsible for updating your on sale listings to reflect the availability and accuracy of your item."))),s.createElement("div",{className:"row"},s.createElement("button",{className:"btn btn-danger"+(l?"":" disabled"),onClick:l?this.cancel.bind(this):null},(0,h._)("Cancel Order"))))}))}}},97261:(e,t,a)=>{a.d(t,{Z:()=>p});var s=a(84766),n=(a(67294),a(46858)),i=a(42741),l=a(78314),r=a(1055),o=a(96655);const c="change_item",d="change_profile",h="change_vault";class m extends s.EventHandler{constructor(){super(),this.reset()}reset(){this._exchange={},this._item={},this._profile={},this._vault=""}emitChangeItem(){this.emit(c)}onChangeItem(e){this.on(c,e)}offChangeItem(e){this.off(c,e)}emitChangeProfile(){this.emit(d)}onChangeProfile(e){this.on(d,e)}offChangeProfile(e){this.off(d,e)}emitChangeVault(){this.emit(h)}onChangeVault(e){this.on(h,e)}offChangeVault(e){this.off(h,e)}fetchExchange(e,t,a){this.reset(),i.Z.getExchange(e,(e=>{if(l.Z.profile.owner!=e.seller)return this.reset(),void a("Access disallowed.");this._exchange=e,s.Log.debug(this._exchange,"exchange"),this.processData(),this.emitChange(),this._item.id=e.listing_id,this._item.name=e.name,this.emitChangeItem(),this.fetchItem(),this.fetchProfile(),e.digital&&e.status!=o.WWs&&"code"==e.digital_deliverable&&!e.escrow_status&&this.fetchVault(),t(this._exchange)}),(e=>{a(e)}))}fetchItem(){this._exchange.listing_id&&i.Z.getListing(this._exchange.listing_id,(e=>{s.Log.debug(e,"item"),this._item=e,this.emitChangeItem()}),(e=>{}))}fetchProfile(){this._exchange.buyer&&i.Z.getProfile(this._exchange.buyer,(e=>{s.Log.debug(e,"profile"),this._profile=e,this.emitChangeProfile()}),(e=>{}))}fetchVault(){i.Z.getDigitalVault(this.exchange.listing_id,(e=>{s.Log.debug(e,"vault"),this._vault=e,this.emitChangeVault(),this.emitChange()}),(e=>{}))}processData(){let e=this._exchange;if(!e.id)return;let t=e.status;this._exchange.original_status=t,s.Log.debug(t,"exchange.original_status"),o.rlS==t?e.shipping_fee?o.IfI==e.handling_status?t=o.PGQ:o.jJH==e.handling_status&&(t=o.Xp3):(t=o.PGQ,o.jJH==e.handling_status&&(t=o.Xp3)):o.V5K==t?t=e.buyer_rated?o.Zue:o.Xp3:o.nmn==t&&(t=o.VxZ),e.hold_status&&this._exchange.original_status!=o.unP&&(t=e.hold_status),s.Log.debug(t,"processed status"),this._exchange.status=t,this.updateState()}get exchangeStates(){return{pending:{icon:"/img/app/icon_exchange_processing.png",title:(0,r._)("Order is being processed"),detail:(0,r._)("Good news, your item is being bought, and we're processing the payment. Do NOT send or ship the item to the buyer until payment processing is successful.")},settled:{icon:"/img/app/icon_exchange_label.png",title:(0,r._)("Create shipping label"),detail:(0,r._)("Congratulations, your item has sold! Please follow the steps below to complete the transaction.")},received_rated:{icon:"/img/app/icon_exchange_rate.png",title:(0,r._)("Rate the buyer to get paid"),detail:(0,r._)("Please rate the Buyer to get paid and to complete the transaction.")},pending_completion:{icon:"/img/app/icon_exchange_processing.png",title:(0,r._)("Order is being processed"),detail:(0,r._)("Order is being processed. Please check back in a few minutes.")},complete:{icon:"/img/app/icon_exchange_check.png",title:(0,r._)("Congratulations, this transaction is complete!"),detail:(0,r._)("Check your wallet for details of the payment received.")},cancelled:{icon:"/img/app/icon_exchange_trash.png",title:(0,r._)("The buyer has cancelled or unable to complete this transaction"),detail:(0,r._)("Your listing is automatically relisted back on the marketplace for you.")},rescinded:{icon:"/img/app/icon_exchange_trash.png",title:(0,r._)("This transaction has been cancelled"),detail:""},hold_buy:{icon:"/img/app/icon_exchange_processing.png",title:(0,r._)("Under Review"),detail:(0,r._)("Good news, your item has been bought. We are reviewing the buyer payment information, and you will be notified once the payment is successfully processed. For your protection, please do NOT send the item to the buyer while the order is under review.")},hold_challenge:{icon:"/img/app/icon_exchange_processing.png",title:(0,r._)("Under Review"),detail:(0,r._)("Good news, your item has been bought. We are reviewing the buyer payment information, and you will be notified once the payment is successfully processed. For your protection, please do NOT send the item to the buyer while the order is under review.")},hold_dispute:{icon:"/img/app/icon_exchange_processing.png",title:(0,r._)("Under Dispute"),detail:(0,r._)("The buyer has opened a dispute. Please communicate with the buyer to resolve the issue and submit evidences showing that you had delivered the correct and working item."),help:"https://gameflip.com/static/help/faq.html#on-hold"}}}updateState(){if(!this._exchange.id)return;let e=n.Z.clone(this.exchangeStates);this._exchange.kind==o.Bxu?this._exchange.category==o.gav?(e.shipping={icon:"/img/app/icon_exchange_digital_transfer.png",title:(0,r._)("Deliver your Session"),detail:(0,r._)("Contact the buyer via messaging and coordinate the delivery of your session.")},e.shipped={icon:"/img/app/icon_exchange_truck.png",title:(0,r._)("Wait for acceptance"),detail:(0,r._)("We will notify you when the Buyer has accepted the session and completed the transaction.")}):(e.shipping={icon:"/img/app/icon_exchange_digital_transfer.png",title:(0,r._)("Deliver your Gig"),detail:(0,r._)("Contact the buyer via messaging and coordinate the delivery of your gig.")},e.shipped={icon:"/img/app/icon_exchange_truck.png",title:(0,r._)("Wait for acceptance"),detail:(0,r._)("We will notify you when the Buyer has accepted the gig and completed the transaction.")}):this._exchange.digital?(this._exchange.shipping_within_days>0&&this._exchange.shipping_late?e.shipping={icon:"/img/app/icon_exchange_trash.png",title:(0,r._)("Do not send your item"),detail:(0,r._)("Delivery time has passed. Buyer can now cancel this transaction.")}:this._exchange.digital_deliverable&&"transfer"==this._exchange.digital_deliverable?e.shipping={icon:"/img/app/icon_exchange_digital_transfer.png",title:(0,r._)("Send your item"),detail:(0,r._)("Contact the buyer via messaging and coordinate the delivery of your item.")}:this._exchange.escrow_status?e.shipping={icon:"/img/app/icon_exchange_bot_trade.png",title:(0,r._)("Wait for acceptance"),detail:(0,r._)("We will notify you when the Buyer has retrieved and accepted the item.")}:this._exchange.nft?e.shipping={icon:"/img/app/icon_exchange_bot_trade.png",title:(0,r._)("Wait for delivery"),detail:(0,r._)("We will notify you when the item has been delivered.")}:e.shipping={icon:"/img/app/icon_exchange_digital_key.png",title:(0,r._)("Send your key or code"),detail:(0,r._)("We will notify the buyer once the key or code has been entered and sent.")},e.shipped={icon:"/img/app/icon_exchange_truck.png",title:(0,r._)("Wait for acceptance"),detail:(0,r._)("We will notify you when the Buyer has accepted the item and rated you.")}):(e.shipping={icon:"/img/app/icon_exchange_truck.png",title:(0,r._)("Ship your item"),detail:(0,r._)("We will notify the Buyer once you confirm the item has shipped.")},e.shipped={icon:"/img/app/icon_exchange_truck.png",title:(0,r._)("Wait for delivery"),detail:(0,r._)("We will notify you when the item has been delivered and the Buyer has completed the transaction.")}),this._exchange.status!=o.c9c||!this._exchange.hold_dispute_ticket_id&&this._exchange.hold_dispute_reason_code||(e.hold_dispute={icon:"/img/app/icon_exchange_processing.png",title:(0,r._)("Under Dispute Review"),detail:(0,r._)("Buyer has escalated the issue to Gameflip to decide the dispute based on the evidence submitted."),help:"https://gameflip.com/static/help/faq.html#on-hold"}),this._exchange.state=e[this._exchange.status]||e[o.WWs]}get exchange(){return this._exchange}get item(){return this._item}get profile(){return this._profile}get vault(){return this._vault}set vault(e){s.Log.debug(e),this._vault=e,this.emitChangeVault()}putVault(e,t){this._exchange.id&&(this._vault=this._vault.trim(),i.Z.putDigitalVault(this._exchange.listing_id,this._vault,(t=>{this.emitChangeVault(),this.emitChange(),e()}),(e=>{t(e)})))}sendVault(e,t){this.putVault((()=>{i.Z.postExchangeShipped(this._exchange.id,(t=>{this._exchange.status=o.Xp3,this._exchange.handling_status=o.jJH,this.updateState(),this.emitChange(),e()}),(e=>{t(e)}))}),(e=>{t(e)}))}createLabel(e,t,a){i.Z.postExchangeLabel(this._exchange.id,e,(e=>{this._exchange.status=o.PGQ,this._exchange.handling_status=o.IfI,this._exchange.label_pdf_url=e.label_pdf_url,this._exchange.carrier=e.carrier,this._exchange.tracking_code=e.tracking_code,this._exchange.tracking_id=e.tracking_id,s.Log.debug(this._exchange,"label created exchange"),this.updateState(),this.emitChange(),t(e.label_pdf_url)}),(e=>{a(e)}))}deliver(e,t,a){let s=()=>{i.Z.postExchangeShipped(this._exchange.id,(a=>{this._exchange.status=o.Xp3,this._exchange.handling_status=o.jJH,e&&(this._exchange.carrier=e.carrier,this._exchange.tracking_code=e.tracking_code),this.updateState(),this.emitChange(),t()}),(e=>{a(e)}))};e?i.Z.postExchangeTracking(this._exchange.id,e,(e=>{s()}),(e=>{a(e)})):s()}postRating(e,t,a){e.exchange_id=this._exchange.id,i.Z.postRating(e,(e=>{this.fetchExchange(e.exchange_id,t,a)}),a)}cancel(e,t,a,s){let n=[{op:"replace",path:"/status",value:o.VxZ},{op:"replace",path:"/cancel_reason",value:e}];"other"==e&&t&&n.push({op:"replace",path:"/cancel_reason_other",value:t}),i.Z.patchExchange(this._exchange.id,n,(e=>{a(),this._exchange.original_status=o.VxZ,this._exchange.status=o.VxZ,this.updateState(),this.emitChange()}),(e=>{s(e)}))}}const p=new m},4942:(e,t,a)=>{function s(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}a.d(t,{Z:()=>s})}}]);